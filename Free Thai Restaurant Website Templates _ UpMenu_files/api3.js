
jQuery(".lazy-image:not(.load-spinner)").Lazy();jQuery(".lazy-image.load-spinner").Lazy({afterLoad:function(element){element.find('img').remove();jQuery(".theme-gallery").matchHeight();}});I18n.locale=com.upmenu.language;$.noty.defaults.layout='topCenter';$.noty.defaults.force=true;$.noty.defaults.timeout=3000;$.noty.defaults.theme='upmenuTheme';$.noty.defaults.maxVisible=2;var api=new com.upmenu();com.upmenu.reservation=false;var reservation=api._getParameterByName('reservation');if(reservation=='true'){com.upmenu.reservation=true;}
var defaultFonts=[{family:'Arial, sans-serif',name:'Arial'},{family:'Arial Black, sans-serif',name:'Arial Black'},{family:'Tahoma, sans-serif',name:'Tahoma'},{family:'Verdana, sans-serif',name:'Verdana'},{family:'Trebuchet MS, sans-serif',name:'Trebuchet MS'},{family:'Helvetica, sans-serif',name:'Helvetica'},{family:'Courier, serif',name:'Courier'},{family:'Courier New, serif',name:'Courier New'},{family:'Georgia, serif',name:'Georgia'},{family:'Times, serif',name:'Times'},{family:'Times New Roman, serif',name:'Times New Roman'},{family:'Minion Pro, serif',name:'Minion Pro'},{family:'Myriad Pro, sans-serif',name:'Myriad Pro'}];var _loadGoogleFonts=function(fonts){var removeDuplicates=function(array){var unique=[];for(var i=0;i<array.length;i++){var current=array[i];if(unique.indexOf(current)<0)unique.push(current);}
return unique;};var fontsToLoad=[];for(f in fonts){var load=true;for(df in defaultFonts){if(fonts[f]==''||fonts[f]==defaultFonts[df].family){load=false;}}
if(load)fontsToLoad.push(fonts[f]+':regular,100,200,300,400,500,600,700,800,900:latin,latin-ext');}
fontsToLoad=removeDuplicates(fontsToLoad);fontsToLoad[fontsToLoad.length-1]=fontsToLoad[fontsToLoad.length-1]+'&display=swap';if(fontsToLoad.length==0)return;WebFont.load({google:{families:fontsToLoad}});};com.upmenu.qrScanRequired=false;if(typeof com.upmenu.restaurant!='undefined'&&com.upmenu.restaurant.onlyTableOrdering==true){var tableNumber=api._getParameterByName('tableNumber');if(!tableNumber){com.upmenu.qrScanRequired=true;}}
function detectIOS(){return(['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'].indexOf(navigator.platform)!==-1)||(navigator.userAgent.indexOf("Mac")!==-1&&"ontouchend"in document)};function detectSafari(){return navigator.userAgent.indexOf("Safari")!==-1;};var device='';if(detectIOS()){device+='iOS ';};if(detectSafari()){device+='Safari ';};jQuery('html').addClass(device);function isIframe(){return window.location!==window.parent.location;};function addMetaElement(name,content){var meta=document.createElement('meta');meta.name=name;meta.content=content;document.getElementsByTagName('head')[0].appendChild(meta);};$(function(){var onClickItems=jQuery('#_theme-modals-carousel .item');var onVisitItems=jQuery('#_theme-popups-carousel .item');onClickItems.first().addClass('active');onVisitItems.first().addClass('active');if(onClickItems.length<=1){jQuery('#_theme-modals-carousel').removeAttr('data-ride');jQuery('#_theme-modals-carousel .carousel-control').hide();}
if(onVisitItems.length<=1){jQuery('#_theme-popups-carousel').removeAttr('data-ride');jQuery('#_theme-popups-carousel .carousel-control').hide();}
if(!isIframe()){if(com.upmenu.appleItunesAppId.length>0){addMetaElement("apple-itunes-app","app-id="+com.upmenu.appleItunesAppId);}
if(com.upmenu.googlePlayAppId.length>0){addMetaElement("google-play-app","app-id="+com.upmenu.googlePlayAppId);}
if(com.upmenu.appleItunesAppId.length>0||com.upmenu.googlePlayAppId.length>0){$.smartbanner({title:com.upmenu.siteName,author:I18n.translations[I18n.locale].cms_smart_banner_cta,button:I18n.translations[I18n.locale].cms_smart_banner_download_btn,price:"",icon:com.upmenu.mobileAppIconUrl});}}
if(com.upmenu.cookieLawContent.length>0){var cookieLabel=com.upmenu.cookieLabel.length>0?com.upmenu.cookieLabel:'Ok';if($.cookieBar){$.cookieBar({message:com.upmenu.cookieLawContent,acceptText:cookieLabel,fixed:true});}}
if($('.fancybox').length>0){$('.fancybox').fancybox({helpers:{title:{type:'inside'}},beforeLoad:function(){this.title=$(this.element).attr('caption');}});}
$.scrollUp({scrollText:'',zIndex:1049});$(".theme-gallery").matchHeight();$('body').scrollspy({target:'#_cats',offset:250});$('[data-toggle=tooltip]').tooltip();if(com.upmenu.cmsv4){try{$("[data-vbg]").youtube_background();}catch(e){console.log(e);}}
var isEmbed=window!=window.parent;if(isEmbed){$('body').addClass('theme-inside-iframe');}else{$('body').addClass('theme-outside-iframe');}
if(com.upmenu.orderSource=='FACEBOOK'){$('body').addClass('theme-home-fb');}
var tableNumber=api._getParameterByName('tableNumber');if(tableNumber){com.upmenu.tableNumber=tableNumber;addTableNumberToUrl(com.upmenu.tableNumber);}
$('.dropdown-toggle').dropdown();try{var affiliateBannerForceHidden=false;if(window.location!==window.parent.location){setTimeout(function(){if(!affiliateBannerForceHidden){$('#_affiliate-banner').slideDown();var cookie=com.upmenu.Cookies.getAffiliateBannerModal();if(cookie==null){$('#_affiliate-modal-banner').modal('show');com.upmenu.Cookies.saveAffiliateBannerModal();}}},2000);}
window.addEventListener("message",function(e){switch(e.data.type){case'HIDE_AFFILIATE_BANNER':$('#_affiliate-banner').hide();affiliateBannerForceHidden=true;break;}},false);}catch(err){elasticApm.captureError(err);}});var addTableNumberToUrl=function(tableNumber){if(typeof tableNumber!='undefined'){var numberParam="tableNumber="+tableNumber;jQuery("a:not([href*=\"#\"]):not([href*=\"tableNumber\"])").attr('href',function(i,h){if(typeof h!='undefined'){return h+(h.indexOf('?')!=-1?("&"+numberParam):("?"+numberParam));}});}}
jQuery(document).on('click','.btn-placeholder',function(){noty({type:'warning',text:I18n.translations[I18n.locale].cms_order_placeholder});});var getUrlParameter=function getUrlParameter(sParam){var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:decodeURIComponent(sParameterName[1]);}}};(function(){var errorMessage=getUrlParameter('errorMessage');if(typeof errorMessage!=='undefined'){var decodedErrorMessage=decodeURIComponent(errorMessage).replace(/\+/g,' ');var div=document.createElement('div');div.innerHTML=decodedErrorMessage;div.className='apple-notification';document.querySelector('body').appendChild(div);setTimeout(function(){document.querySelector('.apple-notification').remove()},5000);if(api){api.startRegistration(decodedErrorMessage);}else{var api=new com.upmenu();api.startRegistration(decodedErrorMessage);}}})();try{store.set("__test_store_",[{"id":"10","keys":"dev"}])}
catch(e){console.warn("Store fallback!");store._get=store.get;store.get=function(key){var r=null;try{r=store._get(key);}catch(E){r=JSON.parse(localStorage.getItem(key));}
return r;};store._set=store.set;store.set=function(key,val){try{store._set(key,val);}catch(E){localStorage.setItem(key,JSON.stringify(val));}}}
$.fn.serializeObject=function()
{var o={};var a=this.serializeArray();$.each(a,function(){if(o[this.name]!==undefined){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});return o;};$(function(){const api=new com.upmenu();const showLogin=getUrlParameter('login');const showRegistration=getUrlParameter('registration');if(com.upmenu.customer.id){return;}
if(showLogin){api.startLogin();}
else if(showRegistration){api.startRegistration();}});

var com=com||{};com.upmenu=com.upmenu||function(){};com.upmenu.Templates={};com.upmenu.Templates.cart=function(cart){var completedCustomer=com.upmenu.Cookies.getCustomerData();completedCustomer.registered=com.upmenu.customer.registered;var model=$.extend({},cart,{restaurant:com.upmenu.restaurant,site:com.upmenu.site,customer:completedCustomer,user:com.upmenu.customer,static_url:com.upmenu.staticPath,language:com.upmenu.language,tableNumber:com.upmenu.tableNumber,editMode:com.upmenu.editMode});var source=$("#cms3-cart-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);if(jQuery('._mobile-cart').length>0){var mobileDelivery=jQuery(html).find('.mobile-cart-container ._cart-mobile-delivery').clone();var cartDetails=jQuery(html).find('.mobile-cart-container ._cart-details').clone();var mobileCheckoutBtn=jQuery(html).find('.mobile-cart-container ._start-order').clone();var mobileCartBar=jQuery(html).find('._mobile-cart').clone();jQuery('.mobile-cart-container ._cart-mobile-delivery').replaceWith(mobileDelivery);jQuery('.mobile-cart-container ._cart-details').replaceWith(cartDetails);jQuery('.mobile-cart-container ._start-order').replaceWith(mobileCheckoutBtn);jQuery('._mobile-cart').replaceWith(mobileCartBar);}
else{jQuery('._shopping-cart-container').parent().html(html);}
if(jQuery('._desktop-cart').length>0){var desktopCart=jQuery(html).find('._desktop-cart').clone();jQuery('._desktop-cart').replaceWith(desktopCart);}
else{jQuery('._shopping-cart-container').parent().html(html);}
if(jQuery('#_order-form-modal-content ._shopping-cart-container').length>0){jQuery('._shopping-cart-container').parent().html(html);}
var dataHiddenErrors=jQuery(html).find('._shopping-cart-container').data('hidden-errors');jQuery('._shopping-cart-container').attr('data-hidden-errors',dataHiddenErrors);com.upmenu.Templates.cartDeliveryType(model);if($(window).width()<=480){showMoreItems();if($('#scroll-items').find('li').length>3){setTimeout(function(){$('#scroll-items').find('li').last().css({'margin-bottom':'50px'});},1000);}else{setTimeout(function(){$('#scroll-items').find('li').last().css({'margin-bottom':'0px'});},1000);}}
showRestaurantRating();setMaxCartHeight();};com.upmenu.Templates.cartQR=function(){var model=$.extend({},{static_url:com.upmenu.staticPath,language:com.upmenu.language});var source=$("#cms3-cartQR-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('._shopping-cart-container').parent().html(html);};com.upmenu.Templates.cartDeliveryType=function(model){var source=$("#cms3-cart-delivery-type-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('._cart-header').html(html);var isCartDelivery=jQuery('._cart-mobile-delivery').length;jQuery('._cart-mobile-delivery').html(html);var $label=jQuery('.theme-cart-delivery-type li.active:first');if($label.length==0){$label=jQuery('.theme-cart-delivery-type li:first');}
jQuery('.theme-cart-delivery-type button .dropdown-label').html($label.find("a").html());};com.upmenu.Templates.couponForm=function(form){var model=$.extend({},form,{static_url:com.upmenu.staticPath});var source=$("#cms3-couponForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);$('#_cms-modal-narrow-content').html(html);};com.upmenu.Templates.promotionModal=function(promotionId){var model=$.extend({},{},{static_url:com.upmenu.staticPath,promotions:com.upmenu.promotions,promotionId:promotionId});var source=$("#cms3-promotionModal-html").html();var template=Handlebars.compile(source);var html=template(model);$('#_cms-promotion-modal-content').html(html);};com.upmenu.Templates.restaurantContext=function(){var model=$.extend({},{},{site:com.upmenu.site,restaurant:com.upmenu.restaurant,customer:com.upmenu.customer,tableNumber:com.upmenu.tableNumber,static_url:com.upmenu.staticPath});var source=$("#cms3-cartContent-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('._theme-restaurant-cart-placeholder').html(html);if(com.upmenu.restaurant.publishedRatings){showRestaurantRating()}}
com.upmenu.Templates.restaurantInfo=function(deliveryAreas){var model=$.extend({},{},{site:com.upmenu.site,restaurant:com.upmenu.restaurant,deliveryAreas:deliveryAreas,static_url:com.upmenu.staticPath,language:com.upmenu.language,cmsv4:com.upmenu.cmsv4});var source=$("#cms3-restaurantInfo-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_restaurant-info-modal-content').html(html);};com.upmenu.Templates.workingHoursExceptions=function(exceptions){var model=$.extend({},{},{restaurant:com.upmenu.restaurant,exceptions:exceptions,language:com.upmenu.language});var source=$("#cms3-workingHoursExceptions-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_working-hours-exceptions').html(html);};com.upmenu.Templates.orderForm=function(orderForm){var model=$.extend({},orderForm,{restaurant:com.upmenu.restaurant,site:com.upmenu.site,customer:com.upmenu.customer,static_url:com.upmenu.staticPath});var source=$("#cms3-orderForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_order-form-modal-content').html(html);$('#_order-form-modal-content .theme-cart-coupons').css({'margin-bottom':'100px'});};com.upmenu.Templates.deliveryCheckForm=function(restaurants,msg,msgType,restaurantTemplate,restaurantSearchForm,kitchenTypes){var $deliveryForm=jQuery('#_restaurants-delivery-check-form');const productId=api._getParameterByName('pid');var source;if(!com.upmenu.cmsv4){if($deliveryForm){var hideRestaurants=$deliveryForm.attr('hide-restaurants');hideRestaurants=hideRestaurants?hideRestaurants:'false';$deliveryForm.attr('hide-restaurants','');if(!restaurantTemplate){restaurantTemplate=$deliveryForm.attr('restaurant-template');restaurantTemplate=restaurantTemplate?restaurantTemplate:null;}}
var model=$.extend({},{},{site:com.upmenu.site,restaurants:restaurants,theme_settings:com.upmenu.theme_settings,msg:msg,msgType:msgType,static_url:com.upmenu.staticPath,language:com.upmenu.language,restaurantTemplate:restaurantTemplate,restaurantSearchForm:restaurantSearchForm,kitchenTypes:kitchenTypes,hideRestaurants:hideRestaurants,productId:productId?productId:null});source=$("#cms3-deliveryCheckFormContent-html").html();}
else{var model=$.extend({},{},{site:com.upmenu.site,restaurants:restaurants,menuSettings:com.upmenu.theme_JSON.globalStyles.menu,msg:msg,msgType:msgType,static_url:com.upmenu.staticPath,language:com.upmenu.language,restaurantSearchForm:restaurantSearchForm,kitchenTypes:kitchenTypes,editModeCms4:com.upmenu.editMode,productId:productId?productId:null});source=$("#cms4-menu-deliveryCheckFormContent-html").html();}
var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);if($deliveryForm.length){$deliveryForm.html(html);}
jQuery(document).trigger("upmenu:fitIframeSize");};com.upmenu.Templates.order=function(order){var model=$.extend({},order,{site:com.upmenu.site,restaurant:com.upmenu.restaurant,static_url:com.upmenu.staticPath,currency:com.upmenu.site.currency,dateTimeFormat:com.upmenu.dateTimeFormat,language:com.upmenu.language});try{var source=$("#cms3-order-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);}catch(error){elasticApm.captureError("Template compile error "+error);elasticApm.captureError("Template compile model "+model);}
jQuery('#_cms-modal-content').html(html);};com.upmenu.Templates.orderRatingForm=function(ratingForm){var model=$.extend({},ratingForm,{deliveryType:com.upmenu.order.deliveryType,static_url:com.upmenu.staticPath});var source=$("#cms3-orderRatingForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_order-rating-form-wrapper').replaceWith(html);};com.upmenu.Templates.getViewSource=function(viewName){if(com.upmenu.cmsAbVersion&&com.upmenu.cmsAbVersion!=='1'){viewName=viewName.replace('-html','-'+com.upmenu.cmsAbVersion+'-html');}
var source=$(viewName).html();return source;}
com.upmenu.Templates.buyingFlow=function(flow){var model=$.extend({},flow,{site:com.upmenu.site,static_url:com.upmenu.staticPath,bigPhoto:com.upmenu.BuyingFlow.bigPhoto,restaurant:com.upmenu.restaurant,language:com.upmenu.language});var source=com.upmenu.cmsv4?jQuery("#cms4-buyingFlow-html").html():jQuery("#cms3-buyingFlow-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_buying-flow-modal-content').html(html);jQuery('#_buying-flow-modal .modal-body').on('scroll',function(){onModalScroll(jQuery('#_buying-flow-modal'));});jQuery('#_buying-flow-modal .modal-body').scroll();jQuery('#_buying-flow-modal').on('hidden.bs.modal',function(){jQuery('._scroll-modal').hide();});jQuery('#_buying-flow-modal').on('shown.bs.modal',function(){onModalScroll(jQuery('#_buying-flow-modal'));jQuery(document).trigger("upmenu:buyingFlowFormShown");});jQuery(".lazy-image:not(.load-spinner)").Lazy();$('[data-toggle=tooltip]').tooltip();$('.popover').popover('hide');if(!mobileAndTabletCheck()){$("[data-toggle=popover]").popover();}};com.upmenu.Templates.buyingFlowFragments=function(flow,section){var model=$.extend({},flow,{site:com.upmenu.site,static_url:com.upmenu.staticPath,bigPhoto:com.upmenu.BuyingFlow.bigPhoto,restaurant:com.upmenu.restaurant,language:com.upmenu.language});var source=com.upmenu.cmsv4?jQuery("#cms4-buyingFlow-html").html():jQuery("#cms3-buyingFlow-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);var getHalfSection=function(){var bodyHtml=jQuery(html).find('.theme-buying-flow-half .theme-buying-flow-row').html();jQuery('.theme-buying-flow-half .theme-buying-flow-row').html(bodyHtml);};var setHalfSection=function(half){let $halfSection=jQuery('#_buying-flow-modal-content .theme-buying-flow-half');if(!half.enabled&&$halfSection.is(":visible")){$halfSection.hide();}else if(half.enabled&&$halfSection.is(":hidden")){$halfSection.show();}};var getVariantsSection=function(){var bodyHtml=jQuery(html).find('.theme-buying-flow-variants .theme-buying-flow-row').html();jQuery('.theme-buying-flow-variants .theme-buying-flow-row').html(bodyHtml);};var getAll=function(){var bodyHtml=$(html).find('.modal-body').html();jQuery('#_buying-flow-modal-content .modal-body').html(bodyHtml);};var getModifiersSection=function(groupId){var allModifiersSection=jQuery(html).find('.theme-buying-modifiers').html();if(typeof allModifiersSection==='undefined')allModifiersSection='';if(typeof groupId==='undefined'||typeof groupId===''){var oldAddonsId=[];var newAddonsId=[];jQuery('._buying-flow-step-group').each(function(){oldAddonsId.push(jQuery(this).data('addon-id'));});jQuery(allModifiersSection).find('._buying-flow-step-group').each(function(){newAddonsId.push(jQuery(this).data('addon-id'));});if(oldAddonsId.toString()!==newAddonsId.toString()){jQuery('.theme-buying-modifiers').html(allModifiersSection);return;}
var modifiersSections=jQuery(html).find('._buying-flow-step-group');modifiersSections.each(function(){var groupId=jQuery(this).data('addon-id');var bodyHtml=jQuery(html).find('._buying-flow-step-group[data-addon-id="'+groupId+'"]').html();jQuery('._buying-flow-step-group[data-addon-id="'+groupId+'"]').html(bodyHtml);});}
else{var bodyHtml=jQuery(html).find('._buying-flow-step-group[data-addon-id="'+groupId+'"]').html();jQuery('._buying-flow-step-group[data-addon-id="'+groupId+'"]').html(bodyHtml);}};var getQuantitySection=function(){var bodyHtml=jQuery(html).find('.theme-buying-flow-increment').html();jQuery('.theme-buying-flow-increment').html(bodyHtml);};var getFooter=function(){var footerHtml=$(html).find('.modal-footer').html();jQuery('#_buying-flow-modal-content .modal-footer').html(footerHtml);};if(typeof section==='undefined'){getAll();getFooter();}
else if(section=='half'){getHalfSection();setHalfSection(flow.half);getFooter();}
else if(section=='variant'){getVariantsSection();getHalfSection();setHalfSection(flow.half);getModifiersSection();getQuantitySection();getFooter();}
else if(section=='quantity'){getQuantitySection();getFooter();}
else{getModifiersSection(section);getFooter();};jQuery('#_buying-flow-modal .modal-body').scroll();$('[data-toggle=tooltip]').tooltip();$('.popover').popover('hide');if(!mobileAndTabletCheck()){$("[data-toggle=popover]").popover();}
jQuery(document).trigger("upmenu:buyingFlowFormShown");};com.upmenu.Templates.loginForm=function(failure){var model={siteId:com.upmenu.siteId,failure:failure,production:com.upmenu.production,socialLoginEnabled:com.upmenu.socialLoginEnabled==='true'};var source=$("#cms3-loginForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_cms-modal-narrow-content').html(html);};com.upmenu.Templates.registrationForm=function(registrationForm){var model=$.extend({},registrationForm,{site:com.upmenu.site,production:com.upmenu.production,socialLoginEnabled:com.upmenu.socialLoginEnabled==='true'});var source=$("#cms3-registrationForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_cms-modal-narrow-content').html(html);};com.upmenu.Templates.forgotPasswordForm=function(forgotPasswordForm){var model=$.extend({},forgotPasswordForm,{});var source=$("#cms3-loginForgotPasswordForm-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_cms-modal-narrow-content').html(html);};com.upmenu.Templates.restaurantInfoDeliveryAreaPopup=function(area){var model=$.extend({},area,{language:com.upmenu.language});var source=$('#cms3-restaurantInfoDeliveryAreaPopup-html').html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);return html;};com.upmenu.Templates.loyaltySummaryView=function(loyaltySummaries,order){let loyaltySummaryDto=null
if(loyaltySummaries.length>1){for(let i=0;i<loyaltySummaries.length;i++){let dto=loyaltySummaries[i];for(let j=0;j<dto.restaurants.length;j++){if(dto.restaurants[j].id===com.upmenu.restaurantId){loyaltySummaryDto=dto;break;}}}}
if(loyaltySummaries.length===1){loyaltySummaryDto=loyaltySummaries[0]}
if(loyaltySummaryDto!=null){var model=$.extend({},loyaltySummaryDto,{loyaltyPoints:order.loyaltyPoints,registerMessage:loyaltySummaryDto.maxPointsForOrderCount===loyaltySummaryDto.points});if(model.type==="POINTS_FOR_ORDER")
model.points=loyaltySummaryDto.points>=loyaltySummaryDto.maxPointsForOrderCount?loyaltySummaryDto.maxPointsForOrderCount:loyaltySummaryDto.points;var source=$("#cms3-loyaltySummary-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#_loyalty-container').show().html(html);$('.popover').popover('hide');$("[data-toggle=popover]").popover();}};com.upmenu.Templates.restaurantRatings=function(ratings){var model={language:com.upmenu.language,ratingsPublished:ratings};var source=$('#cms3-restaurantRatings-html').html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);return html;};com.upmenu.Templates.reservation=function(reservation,restaurants,showForm){if(!com.upmenu.cmsv4){var model={reservation:reservation,restaurants:restaurants,showForm:showForm};var source=$('#cms3-reservationForm-html').html();}else{var model={site:com.upmenu.site,reservation:reservation,restaurants:restaurants,editMode:com.upmenu.editMode,disabledText:$("#disabledText").val(),color:$("#color").val(),colorVariant:$("#colorVariant").val()};var source=$('#cms4-widgets-booking-html').html();}
var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);return html;};com.upmenu.Templates.getOptions=function(){if(com.upmenu.showTranslationUsages){return{noEscape:true};}else{return{};}}
com.upmenu.Templates.customerForm=function(customer,site){var model={language:com.upmenu.language,site:site,command:customer};var source=$('#cms3-customerAccountForm-html').html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);return html;};com.upmenu.Templates.restaurantOpenInfo=function(restaurant){var model={restaurant:restaurant};var source=$('#cms3-restaurantOpenInfo-html').html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('.restaurant-open-info').html(html);};com.upmenu.Templates.popupsModal=function(popupsList,callback){var model=$.extend({},{},{site:com.upmenu.site,restaurant:com.upmenu.restaurant,static_url:com.upmenu.staticPath,language:com.upmenu.language,popups:popupsList});var source=$("#cms4-popupsModal-html").html();var template=Handlebars.compile(source,com.upmenu.Templates.getOptions());var html=template(model);jQuery('#cms4-popups-content').html(html);if(callback){callback();}};

var com=com||{};com.upmenu=com.upmenu||function(){};com.upmenu.Cookies={};com.upmenu.Cookies.CART='cart-'+com.upmenu.restaurantId;com.upmenu.Cookies.CUSTOMER='cid';com.upmenu.Cookies.ANONYMOUS_CUSTOMER='anonymous-cid';com.upmenu.Cookies.CUSTOMER_DATA='customer-data';com.upmenu.Cookies.SESSION_ID='session-id';com.upmenu.Cookies.RECOMMENDATION_ON_PAGE_ENTER='recommendation-on-page-enter-modal';com.upmenu.Cookies.AFFILIATE_BANNER_MODAL='affiliate-banner-modal';com.upmenu.Cookies.PARTNERS_PROGRAM='um_ppid';com.upmenu.Cookies.NEWSLETER_MODAL='newsletter-modal';com.upmenu.Cookies.THEME_MODALS='theme-modals';com.upmenu.Cookies.THEME_POPUPS='theme-popups';com.upmenu.Cookies.CAMPGAIN_TRACER='um_cid_';com.upmenu.Cookies.COOKIE_IDS_NAME='um_cids';com.upmenu.Cookies.UTM_PARAM_NAMES=['utm_source','utm_campaign','utm_medium','utm_term','utm_content'];com.upmenu.Cookies.TABLE_NUMBER='table-number';com.upmenu.Cookies.VERIFY_AGE='verify-age';com.upmenu.Cookies.REFERRAL='upmenu_referral';com.upmenu.Cookies.saveCartId=function(cartId){var date=new Date();date.setTime(date.getTime()+(1*6*60*60*1000));store.set(com.upmenu.Cookies.CART,cartId,date.getTime());};com.upmenu.Cookies.getCartId=function(){var cartId=store.get(com.upmenu.Cookies.CART);if(cartId==null)cartId='';return cartId;};com.upmenu.Cookies.saveCustomerId=function(customerId){var date=new Date();date.setTime(date.getTime()-(3*365*24*60*60*1000));store.set(com.upmenu.Cookies.CUSTOMER,customerId,date.getTime());};com.upmenu.Cookies.getCustomerId=function(){return store.get(com.upmenu.Cookies.CUSTOMER);};com.upmenu.Cookies.saveAnonymousCustomerId=function(customerId){var date=new Date();date.setTime(date.getTime()+(3*365*24*60*60*1000));jQuery.cookie(com.upmenu.Cookies.ANONYMOUS_CUSTOMER,customerId,{expires:date,path:'/'});};com.upmenu.Cookies.getAnonymousCustomerId=function(){var customerId=jQuery.cookie(com.upmenu.Cookies.ANONYMOUS_CUSTOMER);return customerId;};com.upmenu.Cookies.saveCustomerData=function(customerData){var current=com.upmenu.Cookies.getCustomerData();var model=$.extend(false,current,customerData);var date=new Date();date.setTime(date.getTime()+(3*365*24*60*60*1000));var str=JSON.stringify(model);store.set(com.upmenu.Cookies.CUSTOMER_DATA,str,date.getTime());};com.upmenu.Cookies.getCustomerData=function(){var customer=store.get(com.upmenu.Cookies.CUSTOMER_DATA);if(customer==null){return{};}
var model=JSON.parse(customer);if(model==null){model={};}
return model;};com.upmenu.Cookies.saveSessionId=function(sessionId,date){jQuery.cookie(com.upmenu.Cookies.SESSION_ID,sessionId,{path:'/',expires:date});};com.upmenu.Cookies.getSessionId=function(){return jQuery.cookie(com.upmenu.Cookies.SESSION_ID);};com.upmenu.Cookies.saveRecommendationOnPageEnter=function(hash){store.set(com.upmenu.Cookies.RECOMMENDATION_ON_PAGE_ENTER,hash);};com.upmenu.Cookies.getRecommendationOnPageEnter=function(){return store.get(com.upmenu.Cookies.RECOMMENDATION_ON_PAGE_ENTER);};com.upmenu.Cookies.saveAffiliateBannerModal=function(){store.set(com.upmenu.Cookies.AFFILIATE_BANNER_MODAL,true);};com.upmenu.Cookies.getAffiliateBannerModal=function(){return store.get(com.upmenu.Cookies.AFFILIATE_BANNER_MODAL);};com.upmenu.Cookies.savePartnersProgram=function(ppid,expires){jQuery.cookie(com.upmenu.Cookies.PARTNERS_PROGRAM,ppid,{expires:expires,path:'/'});};com.upmenu.Cookies.getPartnersProgram=function(){return jQuery.cookie(com.upmenu.Cookies.PARTNERS_PROGRAM);};com.upmenu.Cookies.saveNewsletterModal=function(){var date=new Date(date.getTime()+90*60000);store.set(com.upmenu.Cookies.NEWSLETER_MODAL,'true',date.getTime());};com.upmenu.Cookies.getNewsletterModal=function(){return store.get(com.upmenu.Cookies.NEWSLETER_MODAL);};com.upmenu.Cookies.saveThemeModals=function(value,date){if(date){store.set(com.upmenu.Cookies.THEME_MODALS,value,date.getTime());}
else{store.remove(com.upmenu.Cookies.THEME_MODALS);}};com.upmenu.Cookies.saveThemePopups=function(value,date){if(date){store.set(com.upmenu.Cookies.THEME_POPUPS,value,date.getTime());}
else{store.remove(com.upmenu.Cookies.THEME_POPUPS);}};com.upmenu.Cookies.getThemeModals=function(){return store.get(com.upmenu.Cookies.THEME_MODALS);};com.upmenu.Cookies.getThemePopups=function(){return store.get(com.upmenu.Cookies.THEME_POPUPS);};com.upmenu.Cookies.saveCampaignTracker=function(suffix,value,expires){jQuery.cookie(com.upmenu.Cookies.CAMPGAIN_TRACER+suffix,value,{expires:expires});};com.upmenu.Cookies.getCampaignTracker=function(suffix){return jQuery.cookie(com.upmenu.Cookies.CAMPGAIN_TRACER+suffix);};com.upmenu.Cookies.saveCampaignTrackerids=function(value){jQuery.cookie(com.upmenu.Cookies.COOKIE_IDS_NAME,value,60);};com.upmenu.Cookies.saveUTMCampaignParam=function(param,value){var existingParam=jQuery.cookie(param);if(existingParam){var existings=existingParam.split(',');if(existings.length<10&&existings.indexOf(value)<0){existingParam+=','+value;jQuery.cookie(param,existingParam,{expires:30,path:'/'});}}else{jQuery.cookie(param,value,{expires:30,path:'/'});}}
com.upmenu.Cookies.clearUTMCampaignParam=function(){$.each(com.upmenu.Cookies.UTM_PARAM_NAMES,function(idx,param){jQuery.cookie(param,null,{path:'/'});})}
com.upmenu.Cookies.initUTM=function(){$.each(com.upmenu.Cookies.UTM_PARAM_NAMES,function(idx,param){var value=com.upmenu.prototype._getParameterByName(param);if(value){com.upmenu.Cookies.saveUTMCampaignParam(param,value);}});}
com.upmenu.Cookies.setVerifyAge=function(){var date=new Date();date.setTime(date.getTime()+(12*60*60*1000));store.set(com.upmenu.Cookies.VERIFY_AGE,date.getTime());};com.upmenu.Cookies.getVerifyAge=function(){return store.get(com.upmenu.Cookies.VERIFY_AGE);};com.upmenu.Cookies.saveReferral=function(){var currentCookieVal=$.cookie(com.upmenu.Cookies.REFERRAL);if(!currentCookieVal){var dataReferrer=document.referrer;if(dataReferrer&&dataReferrer!=""&&dataReferrer.indexOf('upmenu.com')===-1){jQuery.cookie(com.upmenu.Cookies.REFERRAL,document.referrer,{expires:30,path:'/'});}}};com.upmenu.Cookies.clearReferral=function(){jQuery.cookie(com.upmenu.Cookies.REFERRAL,null,{path:'/'});};

com.upmenu._generateSessionId=function(){var sessionId=com.upmenu.Cookies.getSessionId();if(sessionId==null||sessionId==undefined){sessionId=guid();var date=new Date();var minutes=30;date.setTime(date.getTime()+(minutes*60*1000));com.upmenu.Cookies.saveSessionId(sessionId,date);}
return sessionId;};com.upmenu.trackPageView=function(){var sessionId=com.upmenu._generateSessionId();jQuery.ajax({url:'/api/v1/trackPageView',type:'POST',data:{sessionId:sessionId,url:window.location.href,referer:document.referrer,userAgent:navigator.userAgent,siteId:com.upmenu.siteId,restaurantId:com.upmenu.restaurantId,cid:store.get(com.upmenu.Cookies.CUSTOMER)}});};if(com.upmenu.editMode!==true){com.upmenu.trackPageView();};

com.upmenu.prototype.trackPageEvent=function(type,value1,value2,value3,value4,value5){var sessionId=com.upmenu._generateSessionId();jQuery.ajax({url:'/api/v1/trackPageEvent',type:'POST',data:{sessionId:sessionId,url:window.location.href,siteId:com.upmenu.siteId,restaurantId:com.upmenu.restaurantId,type:type,value1:value1,value2:value2,value3:value3,value4:value4,value5:value5}});};

com.upmenu.prototype.showMessage=function(){var api=new com.upmenu();var message=api._getParameterByName('message');if(message=='')return;var template=Handlebars.compile('<div class="modal-body"><div class="text-center"><h4>{{{msg}}}</h4><br /></div></div>');var html='';if(message=='Registered'){html=template({title:I18n.t('js_messages_registration_modal_title'),msg:I18n.t('js_messages_registration_finished')+' <br/><br/><a href="?login" class="btn btn-upmenu" id="_start-login">'+I18n.t('js_messages_registration_login_btn')+'</a>'});}
if(message=="TemporaryCustomerNotExist"){html=template({title:I18n.t('js_messages_registration_modal_title'),msg:I18n.t('js_messages_registration_not_possible')});}
if(message=="CustomerAlreadyExists"){html=template({title:I18n.t('js_messages_registration_modal_title'),msg:I18n.t('js_messages_registration_email_exist')});}
if(message=="BadChangePasswordData"){html=template({title:I18n.t('js_messages_change_password_modal_title'),msg:I18n.t('js_messages_change_password_bad_data')});}
if(message=="ChangePasswordLinkInnactive"){html=template({title:I18n.t('js_messages_change_password_modal_title'),msg:I18n.t('js_messages_change_password_link_inactive')});}
if(message=="FacebookInstalled"){html=template({title:I18n.t('js_messages_facebook_ordering_modal_title'),msg:I18n.t('js_messages_facebook_instalation_finished')});}
jQuery('#_cms-modal-narrow-content').html(html);jQuery('#_cms-modal-narrow').modal();}
jQuery(function(){var api=new com.upmenu();api.showMessage();});

com.upmenu.login={}
com.upmenu.login.fields={loginForm:"#_login-form",startLogin:"#_start-login",login:"#_login"}
com.upmenu.updateFbLoginIframeSrc=function(){jQuery('._fb-login-iframe').attr('src',com.upmenu.socialLoginDomain+'/facebookLoginIframe/'+com.upmenu.siteId+'?j_target_success_url='+com.upmenu.socialLoginDomain+'/facebookLoginFinish?redirect_url='+document.location);}
com.upmenu.prototype.startLogin=function(){ga('send','event','Login','Start login');trackEventsDataLayer('_LoginForm','login-form-category','Start login','Login');var api=new com.upmenu();com.upmenu.Templates.loginForm(false);jQuery('#_cms-modal-narrow').modal();com.upmenu.updateFbLoginIframeSrc();return false;}
com.upmenu.prototype.login=function(){ga('send','event','Login','Start login');trackEventsDataLayer('_LoginForm','login-form-category','Start login','Login');jQuery("#j_target_success_url").val(document.location);var $loginForm=jQuery(com.upmenu.login.fields.loginForm);jQuery.ajax({type:$loginForm.attr('method'),url:$loginForm.attr('action'),data:$loginForm.serialize(),success:function(data){handleSuccess();},error:function(xhr){if(xhr!==undefined&&xhr.status===0){handleSuccess();}
else{ga('send','event','Login','Validation error');trackEventsDataLayer('_LoginFormError','login-form-error-category','Validation error','Login');com.upmenu.Templates.loginForm(true);jQuery('#_cms-modal-narrow').modal();com.upmenu.updateFbLoginIframeSrc();}}});return false;function handleSuccess(){ga('send','event','Login','Logged in');trackEventsDataLayer('_LoginFormLogged','Login','login-form-logged-category','Login');$('#_cms-modal-narrow').modal('hide');window.location.href=api._updateParameterByName(window.location.toString(),'message','');}}
jQuery(document).on("click",com.upmenu.login.fields.startLogin,function(event){var api=new com.upmenu();api.startLogin();return false;});jQuery(document).on('click',com.upmenu.login.fields.login,function(){var api=new com.upmenu();api.login();return false;});jQuery(document).on("click","#_start-logout",function(){document.location.href='/api/v1/logOut';return false;});function handleCustomerCredentialResponse(response){const reqUrl=com.upmenu.socialLoginDomain+'/googleLoginRedirector?credentials='+response.credential
+'&redirectUrl='+encodeURIComponent(document.location)
+'&siteId='+com.upmenu.siteId;window.location.href=reqUrl;}
window.addEventListener('message',receiver,false);function receiver(e){if(e.data.type==='GOOGLE_AUTHENTICATION'){handleCustomerCredentialResponse(e.data);}};

com.upmenu.forgotPassword={}
com.upmenu.forgotPassword.fields={forgotPasswordForm:"#_login-forgot-password-form",startForgotPassword:"#_start-login-forgot-password",forgotPassword:"#_login-forgot-password-form-submit"}
com.upmenu.prototype.startLoginForgotPassword=function(){var api=new com.upmenu();com.upmenu.Templates.forgotPasswordForm({});jQuery('#_cms-modal-narrow').modal();return false;}
com.upmenu.prototype.loginForgotPassword=function(){var $forgotPasswordForm=jQuery(com.upmenu.forgotPassword.fields.forgotPasswordForm);com.upmenu.RestApi.Customer.forgotPassword(com.upmenu.siteId,com.upmenu.language,api._serializeObject($forgotPasswordForm)).done(function(data){ga('send','event','Login forgot password','Send password');trackEventsDataLayer('_LoginForgotPassword','login-forgot-password-category','Send password','Login');com.upmenu.Templates.forgotPasswordForm({finished:true});}).fail(function(data){ga('send','event','Login forgot password','Validation error');trackEventsDataLayer('_LoginForgotPasswordError','login-forgot-password-error-category','Validation error','Login');com.upmenu.Templates.forgotPasswordForm(data.responseJSON);});return false;}
jQuery(document).on('click',com.upmenu.forgotPassword.fields.startForgotPassword,function(){ga('send','event','Login forgot password','Show forgot password form');trackEventsDataLayer('_LoginForgotPasswordShowForm','login-forgot-password-show-form-category','Show forgot password form','Login');var api=new com.upmenu();api.startLoginForgotPassword();return false;});jQuery(document).on('click',com.upmenu.forgotPassword.fields.forgotPassword,function(){var api=new com.upmenu();api.loginForgotPassword();return false;});com.upmenu.createNewPassword={}
com.upmenu.createNewPassword.fields={createNewPasswordForm:"#_forgot-password-create-new-password-form",startCreateNewPassword:"#_start-login-forgot-password",createNewPassword:"#_forgot-password-create-new-password-form-submit"}
com.upmenu.prototype.startForgotPasswordCreateNewPassword=function(){var name='changePassword';var name2='customerId';var api=new com.upmenu();var changePassword=api._getParameterByName(name);var customerId=api._getParameterByName(name2);if(customerId==''||changePassword!='true')return;jQuery.ajax({url:'/api/v1/startForgotPasswordCreateNewPassword/'+customerId+'/'+com.upmenu.siteId,type:'POST',success:function(data){jQuery('#_cms-modal-narrow-content').html(data);jQuery('#_cms-modal-narrow').modal();$('[data-toggle=popover]').popover();}});return false;}
com.upmenu.prototype.forgotPasswordCreateNewPassword=function(){var $createNewPasswordForm=jQuery(com.upmenu.createNewPassword.fields.createNewPasswordForm);jQuery.ajax({type:$createNewPasswordForm.attr('method'),url:$createNewPasswordForm.attr('action'),data:$createNewPasswordForm.serialize(),success:function(data){jQuery('#_cms-modal-narrow-content').html(data);var api=new com.upmenu();setTimeout(function(){window.location=api._updateParameterByName(window.location.toString(),'changePassword','false');},3000);},error:function(data){jQuery('#_cms-modal-narrow-content').html(data.responseText);jQuery('[data-toggle=popover]').popover();}});return false;}
jQuery(document).on('click',com.upmenu.createNewPassword.fields.createNewPassword,function(){var api=new com.upmenu();api.forgotPasswordCreateNewPassword();return false;});jQuery(function(){var api=new com.upmenu();api.startForgotPasswordCreateNewPassword();});

com.upmenu.registration={}
com.upmenu.registration.fields={registrationForm:"#_registration-form",startRegistration:"#_start-registration",register:"#_registration-form-submit"}
com.upmenu.updateFbLoginIframeSrc=function(){jQuery('._fb-login-iframe').attr('src',com.upmenu.socialLoginDomain+'/facebookLoginIframe/'+com.upmenu.siteId+'?j_target_success_url='+com.upmenu.socialLoginDomain+'/facebookLoginFinish?redirect_url='+document.location);}
com.upmenu.prototype.startRegistration=function(errorMessage){ga('send','event','Registration','Start registration');trackEventsDataLayer('_RegistrationUser','registration-user-category','Start registration','Registration');com.upmenu.Templates.registrationForm({errorMessage:errorMessage,});jQuery('#_cms-modal-narrow').modal();$('[data-toggle=popover]').popover();com.upmenu.updateFbLoginIframeSrc();return false;};com.upmenu.prototype.register=function(){var $registrationForm=jQuery(com.upmenu.registration.fields.registrationForm);com.upmenu.RestApi.Customer.registration(com.upmenu.siteId,com.upmenu.language,api._serializeObject($registrationForm)).done(function(data){ga('send','event','Registration','Registered');trackEventsDataLayer('_RegisteredUser','registered-user-category','Registered','Registration');com.upmenu.Facebook.sendCompleteRegistrationEvent();com.upmenu.Templates.registrationForm({finished:true});}).fail(function(data){ga('send','event','Registration','Validation error');trackEventsDataLayer('_RegisteredUserError','registered-user-error-category','Validation error registration','Registration');com.upmenu.Templates.registrationForm(data.responseJSON);com.upmenu.updateFbLoginIframeSrc();$('[data-toggle=popover]').popover();});return false;}
jQuery(document).on("click",com.upmenu.registration.fields.startRegistration,function(event){var api=new com.upmenu();api.startRegistration();return false;});jQuery(document).on('click',com.upmenu.registration.fields.register,function(){var api=new com.upmenu();api.register();return false;});function registrationPasswordStrength(){var string=jQuery('#customer-password').val();var length=false,moreLength=false,number=false,special=true,uppercase=false,strength=0;if(string.length>7){jQuery('._validation-chars').addClass('success').removeClass('error');length=true;strength+=1;}
else{jQuery('._validation-chars').addClass('error').removeClass('success');length=false;}
if(string.length>8){jQuery('._validation-chars').addClass('success').removeClass('error');moreLength=true;strength+=1;}
else{jQuery('._validation-chars').addClass('error').removeClass('success');moreLength=false;}
if(/[0-9]/.test(string)){jQuery('._validation-number').addClass('success').removeClass('error');number=true;strength+=1;}
else{jQuery('._validation-number').addClass('error').removeClass('success');number=false;}
if(/[`!@#$%^&*()_+\-=\[\]{}\|,.<>\/?~]/.test(string)){jQuery('._validation-special').addClass('success').removeClass('error');special=true;strength+=1;}
else{jQuery('._validation-special').addClass('error').removeClass('success');special=false;}
if(/[A-Z]/.test(string)&&/[a-z]/.test(string)){jQuery('._validation-uppercase').addClass('success').removeClass('error');uppercase=true;strength+=1;}
else{jQuery('._validation-uppercase').addClass('error').removeClass('success');uppercase=false;}
if((jQuery('#_registration-form input[name="password"]').val().length>7)&&(jQuery('#_registration-form input[name="email"]').val().length>0)&&(jQuery('#_registration-form input[name="passwordConfirm"]').val().length>0)){jQuery('#_registration-form-submit').removeAttr('disabled');}
else{jQuery('#_registration-form-submit').attr('disabled','');}
if((jQuery('#customer-password').val().length>7)){jQuery('.password-strength').attr('data-strength',strength);}
else{jQuery('.password-strength').attr('data-strength',0);}}
jQuery(document).on('keyup focus','#_registration-form input',function(e){registrationPasswordStrength();});

function getProductQuantity(productId){if(com.upmenu.cmsv4){let sum;let productIds=[];jQuery('._desktop-cart .cart-menu-item .quantity').each(function(){const $this=jQuery(this);productIds.push($this.data('product-id'));});let uniqueIds=productIds.filter(function(itm,i,a){return i==a.indexOf(itm);});uniqueIds.each(function(value){sum=0;jQuery('._desktop-cart .cart-menu-item .quantity[data-product-id="'+value+'"]').each(function(){sum+=jQuery(this).data('pquantity');})})
return sum;}else{let sum=0;$('.cart-items-scrollable li[data-pid="'+productId+'"] .quantity').each(function(k,v){if($(this).data('pquantity')=='0.5'){sum+=parseInt(1);}else{sum+=parseInt($(this).data('pquantity'));}});return parseInt(sum);}}
function setProductQuantity(productId=null){let productIds=[];jQuery('._desktop-cart .cart-menu-item .quantity').each(function(){const $this=jQuery(this);productIds.push($this.data('product-id'));});let uniqueIds=productIds.filter(function(itm,i,a){return i==a.indexOf(itm);});uniqueIds.each(function(value){let sum=0;jQuery('.theme-cart-col ._desktop-cart .cart-menu-item .quantity[data-product-id="'+value+'"]').each(function(){sum+=jQuery(this).data('pquantity');})
if(sum%1!==0){let fraction=sum%1;let integerPart=Math.floor(sum);if(integerPart===0){sum='½';}else{sum=integerPart+'½';}}else{sum=Math.floor(sum);}
if(isMobile()&&com.upmenu.cmsv4&&com.upmenu.theme_JSON.globalStyles.menu.columnsMobile==='1'){jQuery('.theme-products-number[data-product-id="'+value+'"]').each(function(){jQuery(this).closest('#p-'+value).addClass('is-added');jQuery(this).text(sum==0?'':sum);})}else{jQuery('.products-quantity[data-product-id="'+value+'"]').each(function(){jQuery(this).text(sum==0?'':sum);})}})}
function getProductQuantity2(productId){$('.dropdown[data-pid="'+productId+'"]').each((index,dropdown)=>{const $dropdown=$(dropdown)
const $list=$dropdown.find('ul')
const $productNumbers=$list.find('span.products-number-group')
let sum=0
$productNumbers.each((index,element)=>{if(!isNaN(parseInt(element.innerHTML,10))){sum+=parseInt(element.innerHTML,10)}})
if(sum==0){$dropdown.find("#group-badge-product-number").fadeOut()}else{$dropdown.find("#group-badge-product-number").fadeIn().addClass("animate__animated animate__heartBeat").text(sum).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__heartBeat");});}})}
function animationCart(productId,animationName,whereAnimation='',badgeCount=0){$('.cart-items-scrollable li[data-pid="'+productId+'"] '+whereAnimation).addClass('animate__animated animate__'+animationName).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass('animate__animated animate__'+animationName);});$('.buttons .badge').andSelf().find('[data-product-id="'+productId+'"]').removeClass('product-badge-hide').addClass("animate__animated animate__heartBeat").fadeIn(500).text(badgeCount).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__heartBeat");});$('._group-products-list-item .badge').andSelf().find('[data-product-id="'+productId+'"]').removeClass('product-badge-hide').addClass("animate__animated animate__heartBeat").text(badgeCount).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__heartBeat");});getProductQuantity2(productId);let badgeDisable=badgeCount;if(badgeDisable==0){$('.cart-items-scrollable li[data-pid="'+productId+'"]').addClass("animate__animated animate__fadeOut").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__fadeOut");});$('._group-products-list-item .badge').andSelf().find('[data-product-id="'+productId+'"]').fadeOut(500)
$('.buttons .badge').andSelf().find('[data-product-id="'+productId+'"]').fadeOut(500)}}
function animationCartIncDec(id,productPriceCartId,productId,animationName,whereAnimation='',countBadge=0){let badgeCount=getProductQuantity(productPriceCartId);$('.cart-items-scrollable li[data-pid="'+productPriceCartId+'"][data-id="'+id+'"] '+whereAnimation).addClass('animate__animated animate__'+animationName).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass('animate__animated animate__'+animationName);});$('.buttons .badge').andSelf().find('[data-product-id="'+productPriceCartId+'"]').removeClass('product-badge-hide').addClass("animate__animated animate__heartBeat").fadeIn(500).text(badgeCount+countBadge).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__heartBeat");});$('._group-products-list-item .badge').andSelf().find('[data-product-id="'+productPriceCartId+'"]').removeClass('product-badge-hide').addClass("animate__animated animate__heartBeat").text(badgeCount+countBadge).one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__heartBeat");});getProductQuantity2(productPriceCartId);let badgeDisable=badgeCount+countBadge;if(badgeDisable==0){if(isMobile()&&com.upmenu.cmsv4&&com.upmenu.theme_JSON.globalStyles.menu.columnsMobile==='1'){jQuery('.theme-product[data-product-id="'+productId+'"]').removeClass('is-added');jQuery('.theme-products-number[data-product-id="'+productId+'"]').each(function(){jQuery(this).text('0');})}else{$('.cart-items-scrollable li[data-pid="'+productPriceCartId+'"]').addClass("animate__animated animate__fadeOut").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(this).removeClass("animate__animated animate__fadeOut");});$('._group-products-list-item .badge').andSelf().find('[data-product-id="'+productPriceCartId+'"]').fadeOut(500);$('.buttons .badge').andSelf().find('[data-product-id="'+productPriceCartId+'"]').fadeOut(500);$('.buttons-'+productId+' .products-quantity').text('');}}}
function animationButton(productId,animationDelay,whichButton=''){if(whichButton=='single'){$("#buttons-"+productId+" .loading-icon").removeClass("hide");setTimeout(function(){$("#buttons-"+productId+" .loading-icon").addClass("hide");},animationDelay);}else{let getGroupSingleProductId=$('._group-products-list-item a[data-pid='+productId+']').data("pid");$("._group-products-list-item a[data-pid="+getGroupSingleProductId+"]").closest(".dropdown").attr('data-pid',getGroupSingleProductId);$(".dropdown[data-pid="+getGroupSingleProductId+"] .buttons .loading-icon").removeClass("hide");setTimeout(function(){$(".dropdown[data-pid="+getGroupSingleProductId+"] .buttons .loading-icon").addClass("hide");},animationDelay);}}
com.upmenu.prototype.addToCart=function(productPriceId,recommendationType,productPrice){var cartId=com.upmenu.Cookies.getCartId();var api=new com.upmenu();com.upmenu.RestApi.BuyingFlow.isRequired(com.upmenu.restaurantId,productPriceId).done(function(data){if(data.required){jQuery('#_product-recommendation-modal').modal('hide');com.upmenu.BuyingFlow.startByProductPrice(productPriceId);return;}
com.upmenu.RestApi.Cart.addProduct(cartId,com.upmenu.restaurantId,productPriceId,com.upmenu.customer.id,com.upmenu.language).done(function(data){const order={'value':parseFloat(productPrice),'currency':com.upmenu.site.currency};ga('send','event','Cart','Add to cart');trackEventsDataLayer('_AddToCart','add-to-cart-category','Add to cart','Cart');gtag("event","add_to_cart");if(com.upmenu.editMode!==true){api.trackPageEvent('CART_ADD_PRODUCT');api.trackPageEvent('PRODUCT_CLICKED');}
jQuery('#_product-on-page-enter-recommendation-modal').modal('hide');com.upmenu.Cookies.saveCartId(data.cartId);noty({text:I18n.t('js_cart_product_added_to_cart'),type:'success',killer:true});api.refreshCart(true,function(){jQuery(document).trigger("upmenu:productAddedToCart");com.upmenu.Facebook.sendAddToCartEvent(order);let badgeCount=getProductQuantity(productPriceId);if(badgeCount>1){animationCart(productPriceId,'pulse','.price .price-value',0);}else{animationCart(productPriceId,'fadeIn','',0);}});}).fail(function(data){if(data.status===400){data=jQuery.parseJSON(data.responseText);noty({text:data.errors[0],killer:true});}else{noty({text:I18n.t('cms_ajax_error'),killer:true});}});}).fail(function(data){noty({text:I18n.t('cms_ajax_error'),killer:true});});return false;};jQuery(document).on("click","._add-to-cart",function(event){var productPriceId=jQuery(this).attr('data-id');var productPrice=jQuery(this).attr('data-price');var api=new com.upmenu();var recommendationType=jQuery(this).attr('data-recommendation-type');if(recommendationType==undefined)recommendationType='';com.upmenu.BuyingFlow.bigPhoto=false;animationButton(productPriceId,1000,'single');animationButton(productPriceId,1000,'group');api.addToCart(productPriceId,recommendationType,productPrice);return false;});jQuery(document).on("click","._language-element",function(){jQuery('#_cart-language-mini').slideToggle();return false;});com.upmenu.prototype.loadRestaurantContext=function(){if($('._theme-restaurant-cart-placeholder').length===0){return;}
$.when(com.upmenu.RestApi.Restaurant.get(com.upmenu.restaurantId,com.upmenu.language)).done(function(restaurantResponse){com.upmenu.restaurant=restaurantResponse;com.upmenu.Templates.restaurantContext();}).fail(function(){noty({text:I18n.t('cms_ajax_error'),killer:true});});}
com.upmenu.prototype.workingHoursExceptions=function(){if(jQuery('#_working-hours-exceptions').length==0){return;}
$.when(com.upmenu.RestApi.Restaurant.workingHoursExceptions(com.upmenu.siteId,com.upmenu.restaurantId,com.upmenu.language)).done(function(restaurantResponse){if(restaurantResponse.description.length>0){com.upmenu.Templates.workingHoursExceptions(restaurantResponse);}}).fail(function(){noty({text:I18n.t('cms_ajax_error'),killer:true});});}
com.upmenu.prototype.refreshCart=function(showErrorsInPopup,callback){if(jQuery('._shopping-cart-container').length==0)return;if(com.upmenu.restaurantId=='')return;if(com.upmenu.qrScanRequired){com.upmenu.Templates.cartQR();jQuery('._table-ordering-disabled').show();return;}
var cartLocation='ORDER_FORM';if(jQuery('._order-form-submit').length===0){cartLocation='MENU';}
var cartId=com.upmenu.Cookies.getCartId();var api=new com.upmenu();var customer=com.upmenu.Cookies.getCustomerData();var takeaway=com.upmenu.restaurant.takeaway;var delivery=com.upmenu.restaurant.delivery;var deliveryType;var paymentMethod=jQuery('input[name="paymentType"]:checked').val();var createAccount=jQuery('input[name="createAccount"]:checked').val();if(typeof customer.deliveryType!=='undefined'&&customer.deliveryType!=''){deliveryType=customer.deliveryType;}
if(com.upmenu.tableNumber){deliveryType='TABLE_ORDER';}
if(typeof deliveryType==='undefined'||deliveryType==''){if(delivery===true){deliveryType='DELIVERY';}else if(takeaway===true){deliveryType='TAKEAWAY';}
com.upmenu.Cookies.saveCustomerData({deliveryType:deliveryType});}
if(typeof paymentMethod==='undefined'||paymentMethod==''){if(com.upmenu.restaurant.onlinePayment===true){paymentMethod='ONLINE';}else if(com.upmenu.restaurant.cardPayment===true){paymentMethod='CART';}else if(com.upmenu.restaurant.cashPayment===true){paymentMethod='CASH';}}
let onlinePaymentProvider=null;if(paymentMethod==='ONLINE'){onlinePaymentProvider=jQuery('input[name="paymentProviderType"]:checked').val()}
var latitude=(typeof com.upmenu.latitude==='undefined')?customer.latitude:com.upmenu.latitude;var longitude=(typeof com.upmenu.longitude==='undefined')?customer.longitude:com.upmenu.longitude;com.upmenu.RestApi.Cart.get(cartId,com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,latitude,longitude,com.upmenu.customer.id,deliveryType,com.upmenu.email,com.upmenu.phone,com.upmenu.deliveryDate,com.upmenu.deliveryTime,cartLocation,paymentMethod,customer.city,customer.street,customer.streetNumber,com.upmenu.invoiceTaxId,createAccount,onlinePaymentProvider).done(function(data){com.upmenu.deliveryId=data.cart.deliveryId;com.upmenu.Templates.cart(data);jQuery(".loading-container").hide();jQuery(window).trigger('scroll');jQuery(window).trigger('resize');var cartItems=data.cart.items;if(api.cartDetailsVisible==true){var data=jQuery('._cart-details').html();$('#_cms-modal-content').html(data);if($('#_cms-modal-cart-details-content').length>0){$('#_cms-modal-cart-details-content').html(data);}}
if(com.upmenu.cmsv4){setProductQuantity();}else{setTimeout(function(){$.each(cartItems,function(k,v){var sum=0;$('.cart-items-scrollable li[data-pid="'+v.productPriceId+'"] .quantity').each(function(){sum+=parseInt($(this).html(),10)||0;});var sumHalf=0;$('.cart-items-scrollable li[data-pid="'+v.productPriceId+'"] .quantity').each(function(){if($(this).data('pquantity')=='½'){sumHalf+=parseFloat(1);}else{sumHalf+=parseFloat($(this).data('pquantity'));}});$(".buttons-"+v.producteId+"").find('.badge').text(sumHalf);$('._group-products-list-item a[data-pid="'+v.productPriceId+'"]').find('.badge').text(sumHalf);$('.p-'+v.productPriceId+'').each((index,dropdown)=>{const $dropdown=$(dropdown);const $list=$dropdown.find('ul');const $productNumbers=$list.find('span.products-number-group');let sum2=0;$productNumbers.each((index,element)=>{sum2+=parseInt(element.innerHTML,10)||0;})
$('.p-'+v.productPriceId+'').find('#group-badge-product-number').text(sum2);})});},1000);}
$('._cart-mini').html(jQuery('._cart-mini-content').html());if(showErrorsInPopup==true&&jQuery("._cart-errors").length>0){noty({text:jQuery("._cart-errors").html(),killer:true});}
$('[data-toggle=tooltip]').tooltip();$('[data-toggle=popover]').popover();$('.dropdown-toggle').dropdown();addTableNumberToUrl(com.upmenu.tableNumber);if(callback!=undefined){callback(data);}}).fail(function(data){noty({text:I18n.t('cms_ajax_error'),killer:true});});return false;};jQuery(document).ready(function(){var api=new com.upmenu();api.loadRestaurantContext();api.workingHoursExceptions()
api.refreshCart();api.loadMenu();api.loadMenuCms2();});com.upmenu.prototype.removeCartItem=function(cartItemId){ga('send','event','Cart','Remove from cart');trackEventsDataLayer('_RemoveFromCart','remove-from-cart','Remove from cart','Cart');com.upmenu.RestApi.Cart.removeItem(cartItemId).done(function(data){api.refreshCart(true);}).fail(function(data){noty({text:I18n.t('cms_ajax_error'),killer:true});});return false;};com.upmenu.prototype.decreaseCartItem=function(cartItemId){ga('send','event','Cart','Decrease in cart');trackEventsDataLayer('_DecreaseItemInCart','decrease-item-in-cart','Decrease item in cart','Cart');com.upmenu.RestApi.Cart.decreaseItem(cartItemId).done(function(data){api.refreshCart(true);}).fail(function(data){noty({text:I18n.t('cms_ajax_error'),killer:true});});return false;};com.upmenu.prototype.increaseCartItem=function(cartItemId){ga('send','event','Cart','Increase in cart');trackEventsDataLayer('_IncreaseItemInCart','increase-item-in-cart','Increase item in cart','Cart');com.upmenu.RestApi.Cart.increaseItem(cartItemId,com.upmenu.language).done(function(data){api.refreshCart(true);}).fail(function(data){if(data.status===400){data=jQuery.parseJSON(data.responseText);noty({text:data.errors[0],killer:true});}else{noty({text:I18n.t('cms_ajax_error'),killer:true});}});return false;};jQuery(document).on("click",".edit-buying-flow-id",function(event){api.trackPageEvent('CART_ITEM_EDIT');var $this=jQuery(this);var cartItemId=$this.attr('id');var productId=$this.attr('data-product-id');com.upmenu.BuyingFlow.startByShoppingCartItemId(cartItemId,productId);return false;});jQuery(document).on("click",".increase-cart-item",function(event){var cartItemId=jQuery(this).attr('id');var productPriceCartId=jQuery(this).attr('data-pid');var productId=jQuery(this).data('productId');var api=new com.upmenu();let getGroupSingleProductId=$('._group-products-list-item a[data-pid='+productPriceCartId+']').data("pid");$("._group-products-list-item a[data-pid="+getGroupSingleProductId+"]").closest(".dropdown").attr('data-pid',getGroupSingleProductId);animationCartIncDec(cartItemId,productPriceCartId,productId,'heartBeat','.price .price-value',+1);api.increaseCartItem(cartItemId);return false;});jQuery(document).on("click",".decrease-cart-item",function(event){event.preventDefault();const $this=jQuery(this);const cartItemId=$this.attr('id');const productPriceCartId=$this.attr('data-pid');const productId=$this.data('productId');const api=new com.upmenu();const getGroupSingleProductId=jQuery('._group-products-list-item a[data-pid='+productPriceCartId+']').data("pid");let badgeCount=$this.attr('data-pquantity');const decreaseValue=badgeCount==0.5?0.5:1;jQuery("._group-products-list-item a[data-pid="+getGroupSingleProductId+"]").closest(".dropdown").attr('data-pid',getGroupSingleProductId);badgeCount-=decreaseValue;if(badgeCount==0){api.decreaseCartItem(cartItemId);animationCartIncDec(cartItemId,productPriceCartId,productId,'fadeOut','',-decreaseValue);}else{animationCartIncDec(cartItemId,productPriceCartId,productId,'heartBeat','.price .price-value',-decreaseValue);api.decreaseCartItem(cartItemId);}});jQuery(document).on('click','.theme-product-decrease',function(e){e.preventDefault();e.stopPropagation();let id=jQuery(this).attr('data-product-id');jQuery('.decrease-cart-item[data-product-id="'+id+'"]:first').trigger('click');})
jQuery(document).on("click",".remove-cart-item",function(event){var cartItemId=jQuery(this).attr('id');var api=new com.upmenu();api.removeCartItem(cartItemId);return false;});jQuery(document).on("click","._set-tip-type",function(event){const $btnGroup=$(this).closest('.btn-group');const selectedValue=$(this).find('input[type="radio"]').val();const $tipPercentGroup=$('.tip-percent-group');const $tipAmountGroup=$('.tip-amount-group');const $tipButton=$('._add-tip');$btnGroup.find('label').removeClass('active');$(this).addClass('active');if(selectedValue==="PERCENT"){$tipPercentGroup.removeClass('hidden');$tipAmountGroup.addClass('hidden');}else if(selectedValue==="AMOUNT"){$tipAmountGroup.removeClass('hidden');$tipPercentGroup.addClass('hidden');}
$tipButton.attr('data-tip-type',selectedValue);});jQuery(document).on("click","._set-tip",function(event){event.preventDefault();const $btn=jQuery(this);const cartId=com.upmenu.Cookies.getCartId();const api=new com.upmenu();let tip=0;let tipType='PERCENT';if($btn.hasClass('selected')){$btn.removeClass('selected');}else{if($btn.hasClass('other')){tipType=$btn.attr('data-tip-type')||'PERCENT';const inputSelector=tipType==='PERCENT'?'.custom-tip-percent':'.custom-tip-amount';tip=jQuery(inputSelector).val()||0;tip=tip.toString().replace(/,/g,'.');}else{tip=$btn.attr('data-tip')||0;tipType=$btn.attr('data-tipType')||'PERCENT';}}
var customer=com.upmenu.Cookies.getCustomerData();var takeaway=com.upmenu.restaurant.takeaway;var delivery=com.upmenu.restaurant.delivery;var deliveryType;if(typeof customer.deliveryType!=='undefined'&&customer.deliveryType!==''){deliveryType=customer.deliveryType;}
if(com.upmenu.tableNumber){deliveryType='TABLE_ORDER';}
if(typeof deliveryType==='undefined'||deliveryType===''){if(delivery===true){deliveryType='DELIVERY';}else if(takeaway===true){deliveryType='TAKEAWAY';}}
com.upmenu.RestApi.CartTip.setTip(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,cartId,tip,tipType,deliveryType).done(function(data){if(data.errors.length>0){$('.tip-percent-group').addClass('error');$('.tip-percent-error-text').html(data.errors[0].error);}else{api.refreshCart();}}).fail(function(){noty({text:I18n.t('cms_ajax_error'),killer:true});});});jQuery(document).on('click','._close-set-tip',function(e){e.preventDefault();jQuery('.tip-amount').popover('hide');});jQuery(document).on("click","._show-cart-mini-nav",function(event){jQuery('._cart-mini-nav').slideToggle();});function setMaxCartHeight(){const $items=jQuery('#scroll-items');const $cart=jQuery('._cart-wrapper');const cartDataHeight=$cart.outerHeight()-$items.outerHeight();let windowHeight=720;if(jQuery('body').hasClass('theme-inside-iframe')){windowHeight=com.upmenu.iframeParentHeight;}
else{windowHeight=window.innerHeight;}
let maxHeight=windowHeight-30-cartDataHeight;$items.css('max-height',maxHeight);}
com.upmenu.prototype.cartDetailsVisible=false;com.upmenu.prototype.showCartDetails=function(){var data=jQuery('._cart-details').html();$('#_cms-modal-cart-details-content').html(data);$('#_cms-modal-cart-details').modal();jQuery('#_cms-modal').on('hide.bs.modall',function(){com.upmenu.prototype.cartDetailsVisible=false;});com.upmenu.prototype.cartDetailsVisible=true;return false;};jQuery(document).on('click','.theme-cart-delivery-type li a',function(event){event.preventDefault();if(!jQuery(this).parent().hasClass('active')){var $this=jQuery(this);var deliveryTypeId=$this.attr('data-delivery-type-id');com.upmenu.Cookies.saveCustomerData({deliveryType:deliveryTypeId});var api=new com.upmenu();api.refreshCart(false);}});jQuery(document).on("click","._show-cart-details",function(e){e.preventDefault();var api=new com.upmenu();api.showCartDetails();});jQuery(document).on('click','._toggle-cart-hours',function(e){e.preventDefault();var $this=jQuery(this);var $cartHours=jQuery('.cart-hours');if($cartHours.hasClass('active')){$cartHours.slideUp(100).removeClass('active');}else{$cartHours.slideDown(100).addClass('active');}
$this.find('.fa-angle-down').toggleClass('fa-rotate-180');});jQuery(document).on('click','input[name="ecoFriendlyPackaging"]',function(event){const ecoFriendlyPackaging=jQuery(this).is(':checked');const newType=ecoFriendlyPackaging?'ECO_FRIENDLY':'PLASTIC';const cartId=com.upmenu.Cookies.getCartId();const api=new com.upmenu();com.upmenu.RestApi.CartPackageType.setPackageType(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,cartId,newType).done(function(data){if(data.errors.length>0){$('.package-type-error-text').html(data.errors[0].error);}else{api.refreshCart();}}).fail(function(){noty({text:I18n.t('cms_ajax_error'),killer:true});});});

com.upmenu.recommendationsShowed=false;com.upmenu.OrderForm={};com.upmenu.OrderForm.id='#order-form';com.upmenu.OrderForm.fields={city:com.upmenu.OrderForm.id+' #order-form-city',street:com.upmenu.OrderForm.id+' #order-form-street',streetNumber:com.upmenu.OrderForm.id+' #order-form-streetNumber',apartmentNumber:com.upmenu.OrderForm.id+' #order-form-apartmentNumber',floorNumber:com.upmenu.OrderForm.id+' #order-form-floorNumber',latitude:com.upmenu.OrderForm.id+' input[name=latitude]',longitude:com.upmenu.OrderForm.id+' input[name=longitude]',firstName:com.upmenu.OrderForm.id+' input[name=firstName]',lastName:com.upmenu.OrderForm.id+' input[name=lastName]',phone:com.upmenu.OrderForm.id+' input[name=phone]',phoneCountryCode:com.upmenu.OrderForm.id+' #phone-country-code',email:com.upmenu.OrderForm.id+' input[name=email]',companyName:com.upmenu.OrderForm.id+' input[name=companyName]',postalCode:com.upmenu.OrderForm.id+' #order-form-postalCode',region:com.upmenu.OrderForm.id+' #order-form-region',customAddressField1:com.upmenu.OrderForm.id+' #order-form-customAddressField1Value',customAddressField2:com.upmenu.OrderForm.id+' #order-form-customAddressField2Value',customAddressField3:com.upmenu.OrderForm.id+' #order-form-customAddressField3Value',deliveryType:com.upmenu.OrderForm.id+' input[name=deliveryType]:checked'};com.upmenu.OrderForm.model={};com.upmenu.prototype._initOrderFormFields=function(){var fields=com.upmenu.OrderForm.fields;var customer=com.upmenu.Cookies.getCustomerData();if(customer.city!=undefined){$(fields.city).val(customer.city);}
if(customer.street!=undefined){$(fields.street).val(customer.street);}
if(customer.streetNumber!=undefined){$(fields.streetNumber).val(customer.streetNumber);}
if(customer.apartmentNumber!=undefined){$(fields.apartmentNumber).val(customer.apartmentNumber);}
if(customer.latitude!=undefined){$(fields.latitude).val(customer.latitude);}
if(customer.longitude!=undefined){$(fields.longitude).val(customer.longitude);}
if(customer.firstName!=undefined){$(fields.firstName).val(customer.firstName);}
if(customer.lastName!=undefined){$(fields.lastName).val(customer.lastName);}
if(customer.phone!=undefined){$(fields.phone).attr('data-phone',customer.phone);$(fields.phone).val(customer.phone);}
if(customer.phoneCountryCode!=undefined){$(fields.phoneCountryCode).val(customer.phoneCountryCode);}
if(customer.email!=undefined){$(fields.email).val(customer.email);}
if(customer.companyName!=undefined){$(fields.companyName).val(customer.companyName);}
if(customer.postalCode!=undefined){$(fields.postalCode).val(customer.postalCode);}
if(customer.region!=undefined){$(fields.region).val(customer.region);}
if(customer.customAddressField1!=undefined){$(fields.customAddressField1).val(customer.customAddressField1);}
if(customer.customAddressField2!=undefined){$(fields.customAddressField2).val(customer.customAddressField2);}
if(customer.customAddressField3!=undefined){$(fields.customAddressField3).val(customer.customAddressField3);}};com.upmenu.prototype._storeOrderFormFields=function(){var fields=com.upmenu.OrderForm.fields;com.upmenu.Cookies.saveCustomerData({city:$(fields.city).val(),street:$(fields.street).val(),streetNumber:$(fields.streetNumber).val(),apartmentNumber:$(fields.apartmentNumber).val(),floorNumber:$(fields.floorNumber).val(),latitude:$(fields.latitude).val(),longitude:$(fields.longitude).val(),firstName:$(fields.firstName).val(),lastName:$(fields.lastName).val(),phone:$(fields.phone).val(),phoneCountryCode:$(fields.phoneCountryCode).val(),email:$(fields.email).val(),companyName:$(fields.companyName).val(),postalCode:$(fields.postalCode).val(),region:$(fields.region).val(),customAddressField1:$(fields.customAddressField1).val(),customAddressField2:$(fields.customAddressField2).val(),customAddressField3:$(fields.customAddressField3).val(),deliveryType:$(fields.deliveryType).val(),});};com.upmenu.prototype.startOrder=function(){var api=new com.upmenu();window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)};jQuery('#_product-recommendation-modal').modal('hide');jQuery('#_cms-modal').modal('hide');if(com.upmenu.recommendationsShowed==false){ga('send','event','Order','Start ordering');trackEventsDataLayer('_StartOrder','start-order-category','Start ordering','Order');gtag("event","begin_checkout");}
var cartId=com.upmenu.Cookies.getCartId();var hiddenErrors=jQuery('._shopping-cart-container').attr('data-hidden-errors');if(hiddenErrors!=''){noty({text:hiddenErrors});return false;}
if(jQuery("._cart-errors").length>0){if(jQuery('._mobile-cart:visible').length>0){$("._mobile-cart-errors").slideDown();}else{$("._cart-errors").slideUp().slideDown();noty({text:jQuery("._cart-errors").html()});var errorText=jQuery("._cart-errors").text();ga('send','event','Order','Validation error - in cart while start ordering',errorText);trackEventsDataLayer('_StartOrderError','start-order-error-category','Validation error - in cart while start ordering',errorText);}
return false;}
if(cartId==''&&com.upmenu.reservation==false){return false;}
if(com.upmenu.editMode!==true){api.trackPageEvent('START_ORDER');}
var products=[];let $recommendation=jQuery('.recommendation');if($recommendation.length>0&&com.upmenu.recommendationsShowed==false){let $recommendationModal=jQuery('#_product-recommendation-modal');let $recommendationModalBody=jQuery('#_product-recommendation-modal-body');$recommendationModalBody.html('');$recommendation.each(function(){var id=jQuery(this).attr('data-id');if($.inArray(id,products)>-1){return;}
products.push(id);if(isMobile()&&com.upmenu.cmsv4&&com.upmenu.theme_JSON.globalStyles.menu.columnsMobile==='1'){var col=jQuery('<div class="col-sm-12 theme-product-box-small"></div>');}else{var col=jQuery('<div class="col-sm-6 theme-product-box-col"></div>');}
var el=jQuery(this).clone();el=el.removeClass("hidden");el=el.css('height','');el.removeClass(function(index,css){return(css.match(/(^|\s)col-\S+/g)||[]).join(' ');});col=col.append(el);$recommendationModalBody.append(col);});if($recommendationModal.find('.modal-with-carousel > div').length>1&&com.upmenu.deviceType=='MOBILE'){$recommendationModal.find('.modal-with-carousel').addClass('owl-carousel').owlCarousel({items:1,margin:0,stagePadding:25,autoHeight:true,loop:true,dots:false,autoplay:true,autoplayHoverPause:true,nav:false});}else{$recommendationModal.find('.modal-with-carousel').addClass('row-flex flex-wrap').removeClass('modal-with-carousel');}
$recommendationModalBody.find('._add-to-cart').attr('data-recommendation-type','BEFORE_ORDER');$recommendationModal.modal();jQuery(".lazy-image:not(.load-spinner)").Lazy();jQuery(".lazy-image.load-spinner").Lazy({afterLoad:function(element){element.find('img').remove();jQuery(".theme-gallery").matchHeight();}});com.upmenu.recommendationsShowed=true;return;}
var customerId=null;if(typeof com.upmenu.customer!=='undefined'&&com.upmenu.customer!==null&&com.upmenu.customer.registered){customerId=com.upmenu.customer.id;}else{customerId=com.upmenu.Cookies.getAnonymousCustomerId();}
function requestOrderForm(){com.upmenu.RestApi.Order.form(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,customerId,cartId).done(function(data){com.upmenu.OrderForm.model=data;com.upmenu.Templates.orderForm(data);var customer=com.upmenu.Cookies.getCustomerData();var delivery='input[name="deliveryType"][value='+customer.deliveryType+"]";jQuery(delivery).attr("checked","checked");api._initOrderFormFields();api.checkCustomerExistence();jQuery('#_order-form-modal').on('shown.bs.modal',function(){api._initOrderFormMap();});jQuery('#_order-form-modal').modal();jQuery(document).trigger("upmenu:orderFormShown");hj('trigger','checkout_show');api._changeDeliveryType();api._changePaymentType();api._changeInvoiceType();api._changeCreateAccount();api._buildDays();$('[data-toggle="tooltip"]').tooltip();setupPhoneInput("phone");com.upmenu.Facebook.sendInitiateCheckoutEvent();}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});setupPhoneInput("phone");});}
com.upmenu.RestApi.Cart.missingRequiredProducts(cartId,com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId).done(function(data){try{if(data.length>0){var productId=data[0];var $product=jQuery('#p-'+productId);if($product.length>0){com.upmenu.BuyingFlow.startByProduct(productId);}
return;}}catch(err){}
requestOrderForm()}).fail(function(data){requestOrderForm();});return false;};com.upmenu.prototype.orderFormHandlePlaceChange=function(place,searchPhrase){com.upmenu.prototype.saveGooglePlacesResponseToCustomerCookie(place,searchPhrase);com.upmenu.prototype._initOrderFormFields();};com.upmenu.prototype.createOrder=function(){com.upmenu.processOrder=false;var api=new com.upmenu();var fields=com.upmenu.OrderForm.fields;ga('send','event','Order','Start create order');trackEventsDataLayer('_OrderCreate','start-order-create-category','Start create order','Order');jQuery(document).off('click','._order-form-submit');jQuery(document).on('click','._order-form-submit',function(){return false;});if(com.upmenu.reservation){jQuery('._order-form-submit').text(I18n.t('js_order_create_sending_reservation'));}else{jQuery('._order-form-submit').text(I18n.t('js_order_create_sending_order'));}
jQuery('#_order-form-cancel').hide();if(jQuery(fields.deliveryType).data('delivery-type')==='DELIVERY'){api._deliveryValuesChanged();}
else{com.upmenu.processOrder=true;}
var interval=setInterval(function(){if(com.upmenu.processOrder==true){clearInterval(interval);com.upmenu.processOrder=false;var $orderForm=jQuery('#order-form');var cartId=com.upmenu.Cookies.getCartId();var orderForm=api._serializeObject($orderForm);com.upmenu.RestApi.Order.create(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurant.id,cartId,com.upmenu.customer.id,orderForm).done(function(data){com.upmenu.GoogleAnalytics.sendCreateOrderEvent(data);com.upmenu.GTM.sendCreateOrderEvent(data);com.upmenu.GA4.sendCreateOrderEvent(data);com.upmenu.Facebook.sendCreateOrderEvent(data);com.upmenu.Cookies.saveCartId('');com.upmenu.Cookies.saveCustomerId(data.customerId);setTimeout(function(){com.upmenu.RestApi.Customer.get(data.customerId).done(function(customer){if(typeof customer!=='undefined'&&customer!=null&&!customer.registered){com.upmenu.Cookies.saveAnonymousCustomerId(data.customerId);}}).fail(function(data){if(typeof data!=="undefined"&&data.status!==404&&data.status!==401){noty({text:I18n.t('cms_ajax_error')});}});},0);if(!data.personalDataDisabled){com.upmenu.prototype._storeOrderFormFields();}
jQuery(document).trigger("upmenu:orderCreated",[data.id]);window.location.href=api._updateParameterByName(window.location.toString(),'orderId',data.id);}).fail(function(data){if(data.status===500){noty({text:I18n.t('cms_ajax_error')});}
com.upmenu.Templates.orderForm(data.responseJSON);ga('send','event','Order','Validation error - in form while create order');trackEventsDataLayer('_OrderCreateError','start-order-create-error-category','Validation error - in form while create order','Order');jQuery(document).trigger("upmenu:orderFormShown");if(typeof com.upmenu.customer.id==='undefined'||com.upmenu.customer.id==null){com.upmenu.customer.id=data.responseJSON.customerId;com.upmenu.Cookies.saveCustomerId(data.responseJSON.customerId);setTimeout(function(){com.upmenu.RestApi.Customer.get(data.responseJSON.customerId).done(function(customer){if(typeof customer!=='undefined'&&customer!=null&&!customer.registered){com.upmenu.Cookies.saveAnonymousCustomerId(customer.id);}
api.refreshCart(true);}).fail(function(data){if(typeof data!=="undefined"&&data.status!==404&&data.status!==401){noty({text:I18n.t('cms_ajax_error')});}});},0);}
api._changeDeliveryType(true);api._changePaymentType();api._changeInvoiceType();api._changeCreateAccount();api._initOrderFormMap();$('[data-toggle="tooltip"]').tooltip();setupPhoneInput("phone");api._focusOnFirstFormError(jQuery('#order-form'));api.refreshCart();if(com.upmenu.reservation){jQuery('._order-form-submit').text(I18n.t('js_order_create_finish_reservation_btn'));}else{api._changePaymentType();}
jQuery(document).off('click','._order-form-submit');jQuery(document).on('click','._order-form-submit',function(e){e.preventDefault();var api=new com.upmenu();api.createOrder();return false;});var container=jQuery('#_order-form-modal-content .modal-body'),scrollTo=jQuery('#_order-form-modal-content .has-error').first(),modalBody=$("#_order-form-modal-content .modal-header").innerHeight(),modalHeader=$("#_order-form-modal-content .container").innerHeight(),modalFooter=$("#_order-form-modal-content .modal-footer").innerHeight(),modalErrorInfo=$("#_order-form-modal-content #_order-form-errors").innerHeight();if(scrollTo.length>0){var distance=scrollTo.offset().top-container.offset().top+container.scrollTop()-modalBody-modalFooter-modalHeader-modalErrorInfo;container.animate({scrollTop:distance},350);}
var modalHeight=com.upmenu.iframeParentHeight;var modalMargin=$(".modal-dialog").outerHeight(true);if(isMobile()){modalHeight=modalHeight-modalMargin;}
$('#_order-form-modal .modal-body').css({'max-height':modalHeight+'px'});});}},250);return false;};com.upmenu.prototype._customFieldsVisibilityHandler=function(){var customFields=new Map([['#_custom-field1','customField1Value'],['#_custom-field2','customField2Value'],['#_custom-field3','customField3Value']])
customFields.forEach(function(value,key){var $field=jQuery(key);var $fieldInput=jQuery('[name="'+value+'"]');if($field){var dataTypes=$field.data('types')
if(dataTypes){if(dataTypes.indexOf(jQuery(com.upmenu.OrderForm.fields.deliveryType).val())!==-1){$field.show();$fieldInput.attr('disabled',false);}
else{$field.hide();$fieldInput.attr('disabled',true);}}
else{$field.show();$fieldInput.attr('disabled',false);}}})};com.upmenu.prototype._manageDeliveryTypes=function(){var deliveryType=jQuery('input[name=deliveryType]:checked','#order-form').attr('data-delivery-type');var deliveryTypeId=jQuery('input[name=deliveryType]:checked','#order-form').val();com.upmenu.Cookies.saveCustomerData({deliveryType:deliveryTypeId});jQuery('.customer-row').each(function(){jQuery(this).show();});if(deliveryType==='TAKEAWAY'){jQuery('#order-form ._order-address-group').hide();jQuery('#order-form #reservation-people').hide();}
if(deliveryType==='DELIVERY'){jQuery('#order-form ._order-address-group').show();jQuery('#order-form #reservation-people').hide();}
if(deliveryType==='ONSITE'){jQuery('#order-form ._order-address-group').hide();jQuery('#order-form #reservation-people').show();}
if(deliveryType==='TABLE_ORDER'){jQuery('#order-form ._order-address-group').hide();jQuery('#order-form #reservation-people').hide();}};com.upmenu.prototype._changeDeliveryType=function(fromError){api._manageDeliveryTypes();var personalDataDisabled=jQuery('input[name=deliveryType]:checked','#order-form').data('personal-data-disabled');if(personalDataDisabled){jQuery('.customer-row').each(function(){jQuery(this).hide();});jQuery('#reservation-people').hide();}
api._buildDays(fromError);api._customFieldsVisibilityHandler();};com.upmenu.prototype._changePaymentType=function(){var $paymentType=jQuery('input[name=paymentType]:checked','#order-form');let $paymentProviderType=jQuery('input[name=paymentProviderType]');var onlineTitle=jQuery('._order-form-submit').attr('data-online-payment-title');var offlineTitle=jQuery('._order-form-submit').attr('data-offline-payment-title');if($paymentType.val()=='ONLINE'){jQuery('._order-form-submit').text(onlineTitle);jQuery('._step-payment').show();$paymentProviderType.each(function(){let $this=jQuery(this);if($paymentType.data('provider')===$this.val()){$this.prop('checked',true);}})}else{jQuery('._order-form-submit').text(offlineTitle);jQuery('._step-payment').hide();$paymentProviderType.prop('checked',false);}};com.upmenu.prototype._changeInvoiceType=function(){var invoice=jQuery('input[name=invoice]:checked','#order-form').val();if(invoice=='false'){jQuery('#order-form #_order-invoice-group').hide();}
if(invoice=='true'){jQuery('#order-form #_order-invoice-group').show();}};com.upmenu.prototype._changeCreateAccount=function(){var createAccount=jQuery('input[name=createAccount]:checked','#order-form').val();if(createAccount==undefined){jQuery('#order-form ._order-create-account').hide();}
if(createAccount=='true'){jQuery('#order-form ._order-create-account').show();}};com.upmenu.prototype._initOrderFormMap=function(){};function sendDeliveryEvent(addressGeocodingDto,cart){var customer=com.upmenu.Cookies.getCustomerData();if(customer&&customer.deliveryType==='DELIVERY'){if(cart&&cart.cart){var deliveryStatus=cart.cart.deliveryStatus;addressGeocodingDto.latitude=com.upmenu.latitude;addressGeocodingDto.longitude=com.upmenu.longitude;if(deliveryStatus==='DELIVERY'){com.upmenu.RestApi.Address.trackDeliveryEvent('GEOCODE_DELIVERY','DELIVERY_CHECK',addressGeocodingDto);}else if(deliveryStatus==='NOT_DELIVERY'){com.upmenu.RestApi.Address.trackDeliveryEvent('GEOCODE_NOT_DELIVERY','DELIVERY_CHECK',addressGeocodingDto);}else if(deliveryStatus==='NO_ADDRESS'){com.upmenu.RestApi.Address.trackDeliveryEvent('GEOCODE_FAIL','DELIVERY_CHECK',addressGeocodingDto);}}}}
com.upmenu.prototype._deliveryValuesChanged=function(){var api=new com.upmenu();var fields=com.upmenu.OrderForm.fields;if($(fields.city).val()){$(fields.city).val($(fields.city).val().capitalize());}
if($(fields.street).val()){$(fields.street).val($(fields.street).val().capitalize());}
var addressForEvent=$(fields.city).val()+', '+$(fields.street).val()+' '+$(fields.streetNumber).val();var city=$(fields.city).val();var street=$(fields.street).val();var streetNumber=$(fields.streetNumber).val();var region=$(fields.region).val();var postalCode=$(fields.postalCode).val();var customAddressField1=$(fields.customAddressField1).val();var customAddressField2=$(fields.customAddressField2).val();var customAddressField3=$(fields.customAddressField3).val();var addressGeocodingDto={siteId:com.upmenu.siteId,restaurantId:com.upmenu.restaurantId,city:city,street:street,streetNumber:streetNumber,postalCode:postalCode,region:region,customAddressField1:customAddressField1,customAddressField2:customAddressField2,customAddressField3:customAddressField3};com.upmenu.prototype._storeOrderFormFields();jQuery(".cart").remove();var loadingContainer=jQuery(".loading-container");loadingContainer.show();com.upmenu.RestApi.Address.findAddress(addressGeocodingDto).done(function(location){jQuery('#order-form #latitude').val(location.latitude);jQuery('#order-form #longitude').val(location.longitude);com.upmenu.longitude=location.longitude;com.upmenu.latitude=location.latitude;com.upmenu.processOrder=true;api.refreshCart(false,(data)=>{sendDeliveryEvent(addressGeocodingDto,data);});api._buildDays();}).fail(function(data){com.upmenu.processOrder=true;ga('send','event','Delivery','Address not found',addressForEvent);trackEventsDataLayer('_DeliveryAddressNotFound','delivery-address-not-found-category','Address not found',addressForEvent);jQuery('#order-form #latitude').val(null);jQuery('#order-form #longitude').val(null);com.upmenu.longitude=null;com.upmenu.latitude=null;api.refreshCart(false,function(){if(data.responseJSON.status=='ADDRESS_NOT_FOUND'){jQuery('.address-not-found-error').show();}});});};jQuery(document).on('change','#order-form #order-form-city, #order-form #order-form-street, #order-form #order-form-region, #order-form #order-form-streetNumber, '+' #order-form #order-form-postalCode, #order-form #order-form-customAddressField1Value,'+' #order-form #order-form-customAddressField2Value, #order-form #order-form-customAddressField3Value',function(){com.upmenu.prototype._deliveryValuesChanged();com.upmenu.prototype._clearError(jQuery(this));});jQuery(document).on('change','input[name="firstName"], input[name="lastName"], input[name="phone"], input[name="email"], '+' input[name="companyName"], input[name="invoiceCompanyName"], input[name="invoiceAddress"], input[name="invoiceTaxId"] ',function(){com.upmenu.prototype._clearError(jQuery(this));});jQuery(document).on('change','input[name="termsOfService"]',function(){if(this.checked){com.upmenu.prototype._clearError(jQuery(this));}});com.upmenu.prototype._clearError=function(input){if(input.val()){input.closest('.form-group').find('.help-block').remove();}}
jQuery(document).on('keyup','#order-form #order-form-city, #order-form #order-form-street, #order-form #order-form-region, #order-form #order-form-streetNumber, '+' #order-form #order-form-postalCode, #order-form #order-form-customAddressField1Value,'+' #order-form #order-form-customAddressField2Value, #order-form #order-form-customAddressField3Value',function(){com.upmenu.processOrder=false;});com.upmenu.prototype._emailValueChanged=function(){var api=new com.upmenu();com.upmenu.email=jQuery('#order-form input[name="email"]').val();com.upmenu.Cookies.saveCustomerData({email:com.upmenu.email});api.refreshCart();api.checkCustomerExistence();};com.upmenu.prototype._phoneValueChanged=function(){var api=new com.upmenu();com.upmenu.phone=jQuery('#order-form input[name="phone"]').val();com.upmenu.Cookies.saveCustomerData({phone:com.upmenu.phone});api.refreshCart();};com.upmenu.prototype._timeChanged=function(){var api=new com.upmenu();com.upmenu.deliveryTime=jQuery("#order-form #delivery-time-select").val();api.refreshCart();};com.upmenu.prototype._firstNameSaved=function(){com.upmenu.firstName=jQuery('#order-form input[name="firstName"]').val();com.upmenu.Cookies.saveCustomerData({firstName:com.upmenu.firstName});};com.upmenu.prototype._lastNameSaved=function(){com.upmenu.lastName=jQuery('#order-form input[name="lastName"]').val();com.upmenu.Cookies.saveCustomerData({lastName:com.upmenu.lastName});};com.upmenu.prototype._phoneSaved=function(){com.upmenu.phone=jQuery('#order-form input[name="phone"]').val();com.upmenu.phoneCountryCode=jQuery('#order-form input[name="phoneCountryCode"]').val();com.upmenu.Cookies.saveCustomerData({phone:com.upmenu.phone,phoneCountryCode:com.upmenu.phoneCountryCode});};com.upmenu.prototype._companyNameSaved=function(){com.upmenu.companyName=jQuery('#order-form input[name="companyName"]').val();com.upmenu.Cookies.saveCustomerData({companyName:com.upmenu.companyName});};com.upmenu.prototype._invoiceTaxId=function(){com.upmenu.invoiceTaxId=jQuery('#order-form input[name="invoiceTaxId"]').val();api.refreshCart();};jQuery(document).on('change','#order-form #delivery-time-select',com.upmenu.prototype._timeChanged);jQuery(document).on('change','#order-form input[name="email"]',com.upmenu.prototype._emailValueChanged);jQuery(document).on('change','#order-form input[name="phone"]',com.upmenu.prototype._phoneValueChanged);jQuery(document).on('change','#order-form input[name="firstName"]',com.upmenu.prototype._firstNameSaved);jQuery(document).on('change','#order-form input[name="lastName"]',com.upmenu.prototype._lastNameSaved);jQuery(document).on('change','#order-form input[name="phone"]',com.upmenu.prototype._phoneSaved);jQuery(document).on('change','#order-form input[name="companyName"]',com.upmenu.prototype._companyNameSaved);jQuery(document).on('change','#order-form input[name="invoiceTaxId"]',com.upmenu.prototype._invoiceTaxId);com.upmenu.prototype.isCustomFieldVisible=function(){return true;};com.upmenu.prototype._buildHours=function(){var date=jQuery('#delivery-date-hidden').val();var $timeSelect=jQuery('#delivery-time-select');if(date==''){$timeSelect.hide();return;}
var unavailability=com.upmenu.i18n.unavailability;var selectedHour=$timeSelect.val();$timeSelect.html('');var deliveryType=jQuery('input[name=deliveryType]:checked','#order-form').val();for(i in com.upmenu.OrderForm.model.settings.calendar){var day=com.upmenu.OrderForm.model.settings.calendar[i];if(date!==day.day)continue;if(day.deliveryType!=deliveryType)continue;for(h in day.orderHours){var time=day.orderHours[h];var hour=time.hour;var isAvailable=time.available;if(selectedHour===hour){$timeSelect.append('<option value="'+hour+'" selected="selected">'+api.formatTime(hour)+'</option>');}else{if(isAvailable){$timeSelect.append('<option value="'+hour+'">'+api.formatTime(hour)+'</option>');}else{$timeSelect.append('<option value="'+hour+'" disabled>'+api.formatTime(hour)+' ('+unavailability+')</option>');}}}}
$timeSelect.show();com.upmenu.deliveryDate=date;com.upmenu.deliveryTime=jQuery('#delivery-time-select option:selected').val();api.refreshCart();};com.upmenu.prototype._buildDays=function(fromError){$('#delivery-date-input').prop('disabled',true);var deliveryType=jQuery('input[name=deliveryType]:checked','#order-form').val();com.upmenu.RestApi.Order.buildCalendar(deliveryType).done(function(data){com.upmenu.OrderForm.model.settings.calendar=data;var deliveryDateInput=jQuery('#order-form #delivery-date-hidden');var deliveryDateInputValue=deliveryDateInput.val();if(fromError&&deliveryDateInputValue){var date=moment(deliveryDateInputValue,'DD-MM-YYYY').toDate();date=moment(date).format(com.upmenu.dateFormat.toUpperCase());com.upmenu.picker.setDate(date);$('#delivery-date-input').val(date);}
api._buildHours();$('#delivery-date-input').prop('disabled',false);}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});setupPhoneInput("phone");});};com.upmenu.prototype.showTermsOfService=function(){jQuery('#_terms-of-service-modal-body').html(com.upmenu.OrderForm.model.settings.termsOfServiceContent);jQuery('#_terms-of-service-modal').modal('show');};com.upmenu.prototype.showNewsletterGDPR=function(){jQuery('#_terms-of-service-modal-body').html(com.upmenu.OrderForm.model.settings.newsletterGdpr);jQuery('#_terms-of-service-modal').modal('show');};com.upmenu.prototype.showPrivacyPolicy=function(){if(jQuery('#_privacy-policy-content').length==1){jQuery('#_privacy-policy-modal-body').html(jQuery('#_privacy-policy-content').html());}else{jQuery('#_privacy-policy-modal-body').html(com.upmenu.OrderForm.model.settings.privacyPolicyContent);}
jQuery('#_privacy-policy-modal').modal('show');};com.upmenu.prototype.showAdultTerms=function(){jQuery('#form-adult-terms-modal-content').html(com.upmenu.OrderForm.model.settings.adultTermsContent);jQuery('#form-adult-terms-modal').modal('show');};jQuery(document).on("click","._start-order",function(event){if(jQuery(this).hasClass('disabled'))
return false;var api=new com.upmenu();api.startOrder();$('#_product-recommendation-modal').on('shown.bs.modal',function(e){jQuery('#_product-recommendation-modal-body .theme-product').each(function(){var priceHeight=jQuery(this).find('.theme-product-types').height()+25;jQuery(this).find('.theme-product-types').addClass('theme-product-types-to-bottom');jQuery(this).css('padding-bottom',priceHeight).css('position','relative');});});function checkModalOpen(){if(jQuery('#_order-form-modal-content .modal-body').length==1){if(location.protocol!=='https:'){jQuery('._get-gps-location').hide();}
api.refreshCart();return true;}
setTimeout(checkModalOpen,50);}
checkModalOpen();jQuery('body').removeClass('mobile-cart-open');jQuery('._mobile-cart-backdrop').css({opacity:0}).removeClass('open-cart-panel open-nav-panel').hide();jQuery('#_cart-mobile-nav').hide();jQuery('#_shopping-cart').delay(100).fadeIn();jQuery('._account-panel').removeClass('open');jQuery('.mobile-restaurant-details').removeClass('visible');jQuery(document).trigger("upmenu:startOrderClicked");return false;});function toggleCartDetails(){jQuery('#_cart-mobile-nav').stop().fadeToggle();jQuery('.mobile-restaurant-details').removeClass('visible');jQuery('body').toggleClass('mobile-cart-open');var $cartBackdrop=jQuery('._mobile-cart-backdrop');if(jQuery('body').hasClass('mobile-cart-open')){jQuery('#_shopping-cart').hide();jQuery('._account-panel').removeClass('open');jQuery('.mobile-restaurant-details').removeClass('visible');$cartBackdrop.show().removeClass('open-nav-panel').addClass('open-cart-panel').animate({opacity:1},350);}
else{$cartBackdrop.animate({opacity:0},350,function(){jQuery('#_shopping-cart').delay(100).fadeIn();$cartBackdrop.hide().removeClass('open-cart-panel');});}};jQuery(document).on('click','._mobile-cart-details',function(e){e.preventDefault();toggleCartDetails();});function toggleNavDetails(button){var $restaurantPanel=jQuery('.mobile-restaurant-details');var $cartBackdrop=jQuery('._mobile-cart-backdrop');if($cartBackdrop.hasClass('open-nav-panel')){$restaurantPanel.removeClass('visible');$cartBackdrop.stop().animate({opacity:0},350,function(){button.toggleClass('open');$cartBackdrop.hide().removeClass('open-nav-panel');});}
else{$restaurantPanel.addClass('visible');$cartBackdrop.show().addClass('open-nav-panel').stop().animate({opacity:1},350,function(){button.toggleClass('open');});}};jQuery(document).on('click','._account-panel',function(e){e.preventDefault();toggleNavDetails(jQuery(this));});function showMoreItems(){var scrollItems=$('#scroll-items');var showMore=com.upmenu.i18n.showMore;var showLess=com.upmenu.i18n.showLess;if(scrollItems.find('li').length>3){$('.more-items-btn').show();}else{$('.more-items-btn').hide();}
for(var i=1;i<4;i++){$("#scroll-items li:nth-of-type("+i+")").addClass('shown');}
$('#scroll-items li').not('.shown').hide();$('#scroll-items .showMore').on('click',function(e){e.preventDefault();$('#scroll-items li').not('.shown').toggle(300);$(this).html($(this).html()=='<i class="fa fa-angle-down"></i> '+showMore+''?'<i class="fa fa-angle-up"></i> '+showLess+'':'<i class="fa fa-angle-down"></i> '+showMore+'');});}
jQuery(document).on('click','._order-form-submit',function(e){e.preventDefault();var api=new com.upmenu();api.createOrder();return false;});jQuery(document).on('change','#order-form input[name=deliveryType]',function(){var api=new com.upmenu();api._changeDeliveryType();api.refreshCart();return false;});jQuery(document).on('change','#order-form input[name=paymentType]',function(){var api=new com.upmenu();api._changePaymentType();api.refreshCart();return false;});jQuery(document).on('change','#order-form input[name=invoice]',function(){var api=new com.upmenu();api._changeInvoiceType();return false;});jQuery(document).on('change','#order-form input[name=createAccount]',function(){var api=new com.upmenu();api._changeCreateAccount();api.refreshCart();return false;});jQuery(document).on('click','#order-form #delivery-date',function(){if(jQuery('#delivery-date').is(':checked')){var api=new com.upmenu();api.refreshCart();jQuery("#delivery-date-field").show();}});jQuery(document).on('click','#order-form #as-soon-as-possible',function(){if(jQuery('#as-soon-as-possible').is(':checked')){var api=new com.upmenu();api.refreshCart();jQuery("#delivery-date-field").hide();}});jQuery('body').on('click','#_show-terms-of-service',function(){var api=new com.upmenu();api.showTermsOfService();return false;});jQuery('body').on('click','._show-newsletter-gdpr',function(){var api=new com.upmenu();api.showNewsletterGDPR();return false;});jQuery('body').on('click','#_show-privacy-policy',function(){var api=new com.upmenu();api.showPrivacyPolicy();return false;});jQuery('body').on('click','._show-adult-terms-modal',function(){var api=new com.upmenu();api.showAdultTerms();return false;});jQuery(document).on('click','._show-order-comment',function(e){e.preventDefault();jQuery('.order-comment').toggle();});jQuery(document).on('click','._order-form-cancel',function(e){e.preventDefault();jQuery('#_order-form-modal-content .modal-body').remove();jQuery(window).trigger('resize');});function getWeekStart(countryCode){const sundayStartCountries=['US','CA','AR','BR','CO','ZA','NG','EG','IN','PK','ID','BD','JP','KR','IL','SA','AE'];if(sundayStartCountries.includes(countryCode.toUpperCase())){return 0;}else{return 1;}}
com.upmenu.GoogleAnalytics.sendCreateOrderEvent=function(order){try{if(com.upmenu.GoogleAnalytics.id.length==0)return;com.upmenu.GoogleAnalytics._sendOneCreateOrderEvent(order,'');if(com.upmenu.GoogleAnalytics.id.length<2)return;com.upmenu.GoogleAnalytics._sendOneCreateOrderEvent(order,'b.');}catch(e){elasticApm.captureError(e);}};com.upmenu.GA4.sendCreateOrderEvent=function(order){try{com.upmenu.GA4._sendCreateOrderEvent(order);}catch(e){elasticApm.captureError(e);}}
com.upmenu.GA4._sendCreateOrderEvent=function(order){const items=[];for(i in order.items){let obj={};var item=order.items[i];obj['item_id']=item.productId;obj['item_name']=item.name;obj['item_category']=item.groupName;obj['price']=item.price;obj['quantity']=item.quantity;items.push(obj);}
gtag("event","purchase",{currency:order.currency,transaction_id:order.id,value:order.totalCost,affiliation:order.restaurantName,shipping:order.deliveryCost,items:items,});}
com.upmenu.GTM.sendCreateOrderEvent=function(order){try{com.upmenu.GTM._sendCreateOrderEvent(order);}catch(e){elasticApm.captureError(e);}}
com.upmenu.GTM._sendCreateOrderEvent=function(order){trackEventsDataLayer('_OrderCreated','order-created-category','Order created',order.id);for(i in order.items){var item=order.items[i];dataLayer.push({'event':'_SingleProductEcommerce','ecommerce':{'purchase':{'actionField':{'id':order.id,'affiliation':order.restaurantName,'revenue':order.totalCost,'shipping':order.deliveryCost},'products':[{'name':item.name,'id':item.id,'price':item.price,'sku':item.productPriceId,'category':item.groupName,'quantity':item.quantity}]}}});for(a in item.addons){var addon=item.addons[a];dataLayer.push({'event':'_SingleAddonsEcommerce','ecommerce':{'purchase':{'actionField':{'id':order.id,'affiliation':order.restaurantName,'revenue':order.totalCost,'shipping':order.deliveryCost},'products':[{'name':addon.name,'id':addon.id,'price':addon.price,'sku':addon.productPriceId,'category':addon.groupName,'quantity':addon.quantity}]}}});}}}
com.upmenu.GoogleAnalytics._sendOneCreateOrderEvent=function(order,prefix){ga(prefix+'send','event','Order','Order created',order.id);ga(prefix+'ecommerce:addTransaction',{'id':order.id,'affiliation':order.restaurantName,'revenue':order.totalCost,'shipping':order.deliveryCost,'tax':''});var tmpQuantity={};for(i in order.items){var item=order.items[i];if(tmpQuantity[item.productPriceId]==undefined){tmpQuantity[item.productPriceId]=item.quantity;}else{tmpQuantity[item.productPriceId]+=item.quantity;}
for(a in item.addons){var addon=item.addons[a];if(tmpQuantity[addon.productPriceId]==undefined){tmpQuantity[addon.productPriceId]=addon.quantity;}else{tmpQuantity[addon.productPriceId]+=addon.quantity;}}}
for(i in order.items){var item=order.items[i];ga(prefix+'ecommerce:addItem',{'id':order.id,'name':item.name,'sku':item.productPriceId,'category':item.groupName,'price':item.price,'quantity':''+tmpQuantity[item.productPriceId]+''});for(a in item.addons){var addon=item.addons[a];ga(prefix+'ecommerce:addItem',{'id':order.id,'name':addon.name,'sku':addon.productPriceId,'category':addon.groupName,'price':addon.price,'quantity':''+tmpQuantity[addon.productPriceId]+''});}}
ga(prefix+'ecommerce:send');};com.upmenu.Facebook.sendCreateOrderEvent=function(order){pixelTrackEvent('Purchase',{value:order.totalCost,currency:order.currency,eventID:order.id});};com.upmenu.Facebook.sendAddToCartEvent=function(order){pixelTrackEvent('AddToCart',{value:order.value,currency:order.currency,});};com.upmenu.Facebook.sendInitiateCheckoutEvent=function(){pixelTrackEvent('InitiateCheckout');};com.upmenu.Facebook.sendViewContentEvent=function(){pixelTrackEvent('ViewContent');};com.upmenu.Facebook.sendContactEvent=function(){pixelTrackEvent('Contact');};com.upmenu.Facebook.sendCompleteRegistrationEvent=function(){pixelTrackEvent('CompleteRegistration');};com.upmenu.pikaday.initOrderCalendar=function(selector){moment.lang(com.upmenu.language);if(!$(selector)[0]){return;}
$(selector).prop('disabled',true);com.upmenu.picker=new Pikaday({field:$(selector)[0],trigger:$(selector)[0],format:com.upmenu.dateFormat.toUpperCase(),firstDay:getWeekStart(com.upmenu.countryCode),container:$(selector)[0].closest('.pikaday-container'),keyboardInput:false,disableDayFn:function(date){return com.upmenu.pikaday.verifyCalendarDay(date);},onSelect:function(){date=moment(moment(com.upmenu.picker.toString(),com.upmenu.dateFormat.toUpperCase()).toDate()).format('DD-MM-YYYY');jQuery('#order-form #delivery-date-hidden').val(date);var api=new com.upmenu();api._buildHours();},i18n:com.upmenu.pikaday.translations})}
com.upmenu.pikaday.verifyCalendarDay=function(date){var dateFromCalendar=moment(date).format('DD-MM-YYYY');for(var i in com.upmenu.OrderForm.model.settings.calendar){var day=com.upmenu.OrderForm.model.settings.calendar[i];var deliveryType=jQuery('input[name=deliveryType]:checked','#order-form').val();if(dateFromCalendar===day.day&&deliveryType===day.deliveryType){return false;}}
return true;};

com.upmenu._initClock=function(order){let $clock=jQuery('#_clock');let $lastStep=jQuery('._last-step');if(order.secondsToFinishDelivery!=null&&order.secondsToFinishDelivery>0){var timer=new easytimer.Timer();timer.start({countdown:true,startValues:{seconds:order.secondsToFinishDelivery}});timer.addEventListener('secondsUpdated',function(e){$clock.html(timer.getTimeValues().toString());});}
else{$clock.html('00:00:00');order.status==='ACCEPTED'&&$lastStep.addClass('done').removeClass('current');}};var orderInterval;com.upmenu.prototype.repeatOrder=function(shoppingCartId){com.upmenu.RestApi.Cart.recreate(shoppingCartId).done(function(response){com.upmenu.Cookies.saveCartId(response.shoppingCartId);window.location=response.restaurantMenuUrl;}).fail(function(jqXHR){if(jqXHR.status===404){jQuery('[data-shopping-cart-id="'+shoppingCartId+'"]').remove();noty({text:I18n.t('cms_cant_reorder')});}else{noty({text:I18n.t('cms_ajax_error')});}});};com.upmenu.prototype.showOrderById=function(orderId){window.clearInterval(orderInterval);var api=new com.upmenu();var orderStatus='';var deliveryTime=0;com.upmenu.RestApi.Order.get(orderId,com.upmenu.language).done(function(order){com.upmenu.order=order;orderStatus=order.status;deliveryTime=order.deliveryTime;com.upmenu.Templates.order(order);try{com.upmenu._initRatings(order);com.upmenu._initClock(order);com.upmenu.initCmsStripe()
com.upmenu.initCmsPaypal(com.upmenu.paypalEnv);com.upmenu.initAdyen();com.upmenu.RestApi.Order.loyaltyInformation(com.upmenu.siteId,order.restaurantId,order.customerId).done(function(loyaltyProgramDto){setTimeout(function(){com.upmenu.Templates.loyaltySummaryView(loyaltyProgramDto,order);},1);});}catch(error){com.upmenu.logError('orderSummaryCannotShowModal',error);}
jQuery('#_cms-modal').modal('show');var modalHeight=com.upmenu.iframeParentHeight;var modalMargin=$(".modal-dialog").outerHeight(true);var modalHeightAll=modalHeight-modalMargin;$('#_cms-modal .modal-body').css({'max-height':modalHeightAll+'px'});}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});orderInterval=setInterval(function(){com.upmenu.RestApi.Order.get(orderId,com.upmenu.language).done(function(order){com.upmenu.order=order;var newOrderStatus=order.status;if(orderStatus==newOrderStatus&&order.deliveryTime===deliveryTime){if(order.secondsToFinishDelivery<=0){com.upmenu._initClock(order);}
return;}
orderStatus=newOrderStatus;deliveryTime=order.deliveryTime;com.upmenu.Templates.order(order);com.upmenu._initRatings(order);com.upmenu._initClock(order);com.upmenu.RestApi.Order.loyaltyInformation(com.upmenu.siteId,order.restaurantId,order.customerId).done(function(loyaltyProgramDto){setTimeout(function(){com.upmenu.Templates.loyaltySummaryView(loyaltyProgramDto,order);},1);var modalHeight=com.upmenu.iframeParentHeight;var modalMargin=$(".modal-dialog").outerHeight(true);var modalHeightAll=modalHeight-modalMargin;$('#_cms-modal .modal-body').css({'max-height':modalHeightAll+'px'});});}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});},20000);};com.upmenu.orderId=null;com.upmenu.order=null;com.upmenu.prototype.showOrder=function(){var name='orderId';var api=new com.upmenu();var orderId=api._getParameterByName(name);com.upmenu.orderId=orderId;if(orderId=='')return;api.showOrderById(orderId);return false;};var api=new com.upmenu();jQuery(document).ready(function(){api.showOrder();});com.upmenu.prototype.showOrderAfterOnlinePayment=function(){var name='orderPaymentId';var api=new com.upmenu();var orderPaymentId=api._getParameterByName(name);if(orderPaymentId=='')return;jQuery.ajax({url:'/api/v1/orderPaymentId/'+orderPaymentId,type:'POST',success:function(data){var location=api._updateParameterByName(window.location.toString(),'orderId',orderPaymentId);location=api._updateParameterByName(location,'orderPaymentId','');window.location=location;}});return false;};api.showOrderAfterOnlinePayment();com.upmenu.prototype.changePaymentType=function(orderId,newPaymentType){jQuery.ajax({url:'/api/v1/changePaymentType/'+orderId+'?newPaymentType='+newPaymentType,type:'POST',success:function(data){com.upmenu.RestApi.Order.get(orderId,com.upmenu.language).done(function(order){var orderStatus=order.status;com.upmenu.Templates.order(order);com.upmenu._initRatings(order);com.upmenu._initClock(order);$('#order-noty').noty({text:I18n.t('js_order_view_payment_type_changed'),type:'success'});}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});},error:function(data){$('#order-noty').noty({text:I18n.t('js_order_view_payment_type_changed_error'),type:'error'});}});return false;};jQuery(document).on('click','._btn-online-payment',function(e){$('.change-payment-type-wrapper').hide();});jQuery(document).on("click","#_change-payment-type-to-cash",function(event){var api=new com.upmenu();api.changePaymentType(jQuery(this).attr('data-order-id'),'CASH');return false;});jQuery(document).on("click","#_change-payment-type-to-cart",function(event){var api=new com.upmenu();api.changePaymentType(jQuery(this).attr('data-order-id'),'CART');return false;});jQuery(document).on("click","._show-order",function(event){var api=new com.upmenu();api.showOrderById(jQuery(this).attr('data-order-id'));return false;});jQuery(document).on("click","._repeat-order",function(event){var api=new com.upmenu();let shoppingCartId=jQuery(this).attr('data-shopping-cart-id');api.repeatOrder(shoppingCartId);return false;});com.upmenu.prototype.acceptOrder=function(){var name='orderId';var api=new com.upmenu();var orderId=api._getParameterByName(name);if(orderId=='')return false;jQuery.ajax({url:'/api/v1/acceptOrder/'+orderId,type:'POST',success:function(data){window.location=api._updateParameterByName(window.location.toString(),'orderId',orderId);}});return false;};com.upmenu.initCmsPaypal=function(){if(jQuery('#_paypal-cms-body').length==0){return;}
if(com.upmenu.order==null){com.upmenu.logError('orderSummaryPayPalNoOrder');}
jQuery.ajax({type:'GET',url:"/startPayPalPayment/"+com.upmenu.order.id+"?fromDesktop=true",data:{language:com.upmenu.language},success:function(data){jQuery('#_paypal-cms-body').html(data)},error:function(data){com.upmenu.logError('orderSummaryPayPalPaymentError',data);noty({text:'Paypal payment error',type:'error',killer:true});}});};com.upmenu.initCmsStripe=function(){if(jQuery('#_stripe-container').length==0){return;}
if(com.upmenu.order==null){elasticApm.captureError("PayPal error (no order)");}
jQuery.ajax({type:'GET',url:"/startStripePayment/"+com.upmenu.order.id+"?fromDesktop=true",data:{language:com.upmenu.language},success:function(data){jQuery('#_stripe-container').html(data)},error:function(data){elasticApm.captureError(data);noty({text:'Stripe payment error',type:'error',killer:true});}});};com.upmenu.initAdyen=function(){if(jQuery('#adyen-body').length==0){return;}
if(com.upmenu.order==null){alert('Adyen payment error - no order');}
jQuery.ajax({type:'GET',url:"/payment/adyen/start/"+com.upmenu.order.id,data:{language:com.upmenu.language},success:function(data){jQuery('#adyen-body').html(data)},error:function(data){elasticApm.captureError(data);noty({text:'Adyen payment error',type:'error',killer:true});}});};

com.upmenu._initStars=function(){jQuery('.raty').each(function(){var readOnly=jQuery(this).attr('data-readonly');if(readOnly=='true'){readOnly=true;}else{readOnly=false;}
jQuery(this).raty({path:com.upmenu.staticPath+'/images/icons/',starOn:'star-on.png',starOff:'star-off.png',starHalf:"star-half.png",scoreName:jQuery(this).attr('id'),score:jQuery(this).attr('data-score'),readOnly:readOnly,hints:[I18n.t('js_order_view_rating_1'),I18n.t('js_order_view_rating_2'),I18n.t('js_order_view_rating_3'),I18n.t('js_order_view_rating_4'),I18n.t('js_order_view_rating_5')]});});}
com.upmenu._initRatings=function(order){jQuery("._order-rating-section-wrapper").hide();if(order.canAddRating){com.upmenu.Templates.orderRatingForm({});jQuery("._order-rating-section-wrapper").show();}
else if(order.rating){jQuery("._order-rating-section-wrapper").show();}
com.upmenu._initStars();}
com.upmenu.prototype.createOrderRating=function(){var api=new com.upmenu();jQuery(document).off('submit','#_order-rating-form');const $btn=jQuery('#_order-rating-form-submit');const loader=$btn.find('._order-rating-submit-loader');loader.show();$btn.prop('disabled',true);var $orderRatingForm=jQuery('#_order-rating-form');com.upmenu.RestApi.OrderRating.create(api._serializeObject($orderRatingForm),com.upmenu.orderId,com.upmenu.language).done(function(data){com.upmenu.RestApi.Order.get(com.upmenu.orderId,com.upmenu.language).done(function(order){loader.hide();$btn.prop('disabled',false);com.upmenu.Templates.order(order);com.upmenu._initRatings(order);com.upmenu._initClock(order);})}).fail(function(data){loader.hide();$btn.prop('disabled',false);com.upmenu.Templates.orderRatingForm(data.responseJSON);com.upmenu._initStars();});return false;}
jQuery(document).on('click','#_order-rating-form-submit',function(){var api=new com.upmenu();api.createOrderRating();return false;});;

var com=com||{};com.upmenu=com.upmenu||function(){};com.upmenu.BuyingFlow={};com.upmenu.BuyingFlow.PRODUCT_ID_PARAM='pid';com.upmenu.BuyingFlow.PRODUCT_PRICE_ID_PARAM='ppid';com.upmenu.BuyingFlow.MODAL_ID='#_buying-flow-modal';com.upmenu.BuyingFlow.current;com.upmenu.BuyingFlow.bigPhoto=false;com.upmenu.BuyingFlow.startByShoppingCartItemId=function(shoppingCartItemId,productId){com.upmenu.RestApi.BuyingFlow.startByShoppingCartItemId(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,shoppingCartItemId).done(function(data){let dataAll=data;dataAll.productId=productId
com.upmenu.BuyingFlow.current=dataAll;com.upmenu.Templates.buyingFlow(dataAll);jQuery(com.upmenu.BuyingFlow.MODAL_ID).modal();jQuery(com.upmenu.BuyingFlow.MODAL_ID).on('shown.bs.modal',function(){jQuery('#_buying-flow-modal .modal-body').scroll();setFlowHalf(dataAll.half);com.upmenu.Facebook.sendViewContentEvent();});}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;};com.upmenu.BuyingFlow.startByProductPrice=function(productPriceId){api.trackPageEvent('PRODUCT_CLICKED');var cartId=com.upmenu.Cookies.getCartId();com.upmenu.RestApi.BuyingFlow.startByProductPrice(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,productPriceId,cartId).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlow(data);jQuery(com.upmenu.BuyingFlow.MODAL_ID).modal();jQuery(com.upmenu.BuyingFlow.MODAL_ID).on('shown.bs.modal',function(){jQuery('#_buying-flow-modal .modal-body').scroll();setFlowHalf(data.half);com.upmenu.Facebook.sendViewContentEvent();});}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;};com.upmenu.BuyingFlow.startByProduct=function(productId){api.trackPageEvent('PRODUCT_CLICKED');var cartId=com.upmenu.Cookies.getCartId();com.upmenu.RestApi.BuyingFlow.startByProduct(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,productId,cartId).done(function(data){if(!data.productName)return false;com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlow(data);jQuery(com.upmenu.BuyingFlow.MODAL_ID).modal();setFlowHalf(data.half);}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;};com.upmenu.BuyingFlow.changeType=function(productPriceId){var cartId=com.upmenu.Cookies.getCartId();var buyingFlowId=com.upmenu.BuyingFlow.current?com.upmenu.BuyingFlow.current.buyingFlowId:null;com.upmenu.RestApi.BuyingFlow.startByProductPrice(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,productPriceId,cartId,buyingFlowId).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,'variant');}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;};com.upmenu.BuyingFlow.finish=function(){com.upmenu.BuyingFlow.current.cartId=com.upmenu.Cookies.getCartId();com.upmenu.RestApi.BuyingFlow.finish(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,com.upmenu.BuyingFlow.current).done(function(data){const order={'value':data.totalPrice,'currency':com.upmenu.site.currency};if(com.upmenu.editMode!==true){api.trackPageEvent('CART_ADD_PRODUCT');}
com.upmenu.Cookies.saveCartId(data.cartId);$(com.upmenu.BuyingFlow.MODAL_ID).modal('hide');api.refreshCart(true,function(){jQuery(document).trigger("upmenu:productAddedToCart");com.upmenu.Facebook.sendAddToCartEvent(order);let badgeCount=getProductQuantity(data.productPriceId);if(badgeCount>1){animationCart(data.productPriceId,'heartBeat','.price .price-value',badgeCount);}else{animationCart(data.productPriceId,'fadeIn','',badgeCount);}
ga('send','event','Cart','Add to cart');trackEventsDataLayer('_AddToCart','add-to-cart-category','Add to cart','Cart');gtag("event","add_to_cart");});}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON);setFlowHalf(data.responseJSON.half);jQuery(".lazy-image:not(.load-spinner)").Lazy();noty({text:I18n.t('cms_buying_flow_errors'),killer:true});var $container=jQuery('#_buying-flow-modal-content .modal-body'),$scrollTo=jQuery('#_buying-flow-modal-content .alert-danger').first().closest('.theme-modal-section-row');var isBuyingFlowV2=jQuery('#_buying-flow-modal').hasClass('theme-buying-flow-modal-v2');if($scrollTo.length>0){var distance=$scrollTo.offset().top-$container.offset().top+$container.scrollTop()-(isBuyingFlowV2?72:0);$container.animate({scrollTop:distance},350,function(){$scrollTo.find('.badge-alert').addClass('animate__animated animate__shakeX');});}});return false;};com.upmenu.BuyingFlow.nextStep=function(){let maxHeight=jQuery('#_buying-flow-modal .modal-body').css('max-height');com.upmenu.RestApi.BuyingFlow.nextStep(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,com.upmenu.BuyingFlow.current).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlow(data);setFlowHalf(data.half);jQuery('#_buying-flow-modal .modal-body').css('max-height',maxHeight);}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON);setFlowHalf(data.responseJSON.half);jQuery(".lazy-image:not(.load-spinner)").Lazy();noty({text:I18n.t('cms_buying_flow_errors'),killer:true});var $container=jQuery('#_buying-flow-modal-content .modal-body'),$scrollTo=jQuery('#_buying-flow-modal-content .alert-danger').first().closest('.theme-modal-section-row');var isBuyingFlowV2=jQuery('#_buying-flow-modal').hasClass('theme-buying-flow-modal-v2');if($scrollTo.length>0){var distance=$scrollTo.offset().top-$container.offset().top+$container.scrollTop()-(isBuyingFlowV2?72:0);$container.animate({scrollTop:distance},350,function(){$scrollTo.find('.badge-alert').addClass('animate__animated animate__shakeX');});}});return false;};com.upmenu.BuyingFlow.previousStep=function(){let maxHeight=jQuery('#_buying-flow-modal .modal-body').css('max-height');com.upmenu.RestApi.BuyingFlow.previousStep(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,com.upmenu.BuyingFlow.current).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlow(data);setFlowHalf(data.half);jQuery('#_buying-flow-modal .modal-body').css('max-height',maxHeight);}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON);setFlowHalf(data.responseJSON.half);});return false;};com.upmenu.BuyingFlow.addProduct=function(id,groupId){com.upmenu.RestApi.BuyingFlow.addProduct(id,com.upmenu.language,com.upmenu.BuyingFlow.current).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,groupId);}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,groupId);});return false;};com.upmenu.BuyingFlow.removeProduct=function(id,groupId){com.upmenu.RestApi.BuyingFlow.removeProduct(id,com.upmenu.language,com.upmenu.BuyingFlow.current).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,groupId);ga('send','event','Cart','Remove from cart');trackEventsDataLayer('_RemoveFromCart','remove-from-cart','Remove from cart','Cart');gtag("event","remove_from_cart");}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,groupId);});return false;};com.upmenu.BuyingFlow.increaseQuantity=function(){com.upmenu.RestApi.BuyingFlow.increaseQuantity(com.upmenu.BuyingFlow.current,com.upmenu.language).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,'quantity');ga('send','event','Cart','Increase in cart');trackEventsDataLayer('_IncreaseItemInCart','increase-item-in-cart','Increase item in cart','Cart');}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,'quantity');noty({text:I18n.t('cms_buying_flow_errors')});});return false;};com.upmenu.BuyingFlow.decreaseQuantity=function(productId){com.upmenu.RestApi.BuyingFlow.decreaseQuantity(com.upmenu.BuyingFlow.current,com.upmenu.language).done(function(data){let dataAll=data;dataAll.productId=productId
com.upmenu.BuyingFlow.current=dataAll;com.upmenu.Templates.buyingFlowFragments(dataAll,'quantity');ga('send','event','Cart','Decrease in cart');trackEventsDataLayer('_DecreaseItemInCart','decrease-item-in-cart','Decrease item in cart','Cart');}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,'quantity');});return false;};com.upmenu.BuyingFlow.setQuantity=function(value){com.upmenu.RestApi.BuyingFlow.setQuantity(com.upmenu.BuyingFlow.current,value,com.upmenu.language).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,'quantity');}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,'quantity');noty({text:I18n.t('cms_buying_flow_errors')});});return false;};com.upmenu.BuyingFlow.halfToggle=function(){com.upmenu.RestApi.BuyingFlow.halfToggle(com.upmenu.BuyingFlow.current).done(function(data){com.upmenu.BuyingFlow.current=data;com.upmenu.Templates.buyingFlowFragments(data,'half');}).fail(function(data){com.upmenu.BuyingFlow.current=data.responseJSON;com.upmenu.Templates.buyingFlowFragments(data.responseJSON,'half');});return false;};jQuery(document).on("click","._buying-flow-increase-qty",function(event){com.upmenu.BuyingFlow.increaseQuantity();return false;});jQuery(document).on('input',"._buying-flow-comment-input",function(event){com.upmenu.BuyingFlow.current.comment=event.target.value;});jQuery(document).on("click","._buying-flow-decrease-qty",function(event){const $this=jQuery(this);const productId=$this.attr('data-product-id');com.upmenu.BuyingFlow.decreaseQuantity(productId);return false;});jQuery(document).on("keyup","._buying-flow-set-qty",function(event){var $this=jQuery(this);var value=$this.val();if(Math.floor(value)!=value||!$.isNumeric(value))value=1;if(value>100)value=100;if(value<1)value=1;$this.val(value);return false;});jQuery(document).on("change","._buying-flow-set-qty",function(event){var $this=jQuery(this);var value=$this.val();if(Math.floor(value)!=value||!$.isNumeric(value))value=1;if(value>100)value=100;if(value<1)value=1;$this.val(value);com.upmenu.BuyingFlow.setQuantity(value);return false;});jQuery(document).on("click","._buying-flow-half-toggle",function(event){com.upmenu.BuyingFlow.halfToggle();jQuery(document).trigger("upmenu:buyingFlowHalfToggle");return false;});jQuery(document).on("change","._buying-flow-change-type",function(event){var productPriceId=jQuery(this).attr('data-product-price-id');com.upmenu.BuyingFlow.changeType(productPriceId);return false;});jQuery(document).on("click","._buying-flow-finish",function(event){const $this=jQuery(this);const productId=$this.attr('data-product-id');let badgeCount=$this.attr('data-pquantity');$this.prop('disabled',true);$this.find('.spinner-container').html('<i class="fa fa-circle-o-notch fa-spin m-l-sm m-r-sm"></i>');jQuery('.products-quantity[data-product-id="'+productId+'"]').text(badgeCount==='0'?'':badgeCount).fadeOut(500);jQuery('.products-number[data-product-id="'+productId+'"]').text(badgeCount==='0'?'':badgeCount).fadeOut(500);jQuery('._group-products-list-item .badge[data-product-id="'+productId+'"').text(badgeCount==='0'?'':badgeCount).fadeOut(500);com.upmenu.BuyingFlow.finish();return false;});jQuery(document).on("click","._buying-flow-next-step",function(event){com.upmenu.BuyingFlow.nextStep();return false;});jQuery(document).on("click","._buying-flow-previous-step",function(event){com.upmenu.BuyingFlow.previousStep();return false;});jQuery(document).on("click","._buying-flow-add-product",function(event){var groupId=jQuery(this).closest('._buying-flow-step-group').data('addon-id');var id=jQuery(this).attr('data-id');com.upmenu.BuyingFlow.addProduct(id,groupId);return false;});jQuery(document).on("click","._buying-flow-remove-product",function(event){var groupId=jQuery(this).closest('._buying-flow-step-group').data('addon-id');var id=jQuery(this).attr('data-id');com.upmenu.BuyingFlow.removeProduct(id,groupId);return false;});jQuery(document).on("change","._buying-flow-add-and-remove-radio-btn",function(event){var groupId=jQuery(this).closest('._buying-flow-step-group').data('addon-id');var id=jQuery(this).attr('data-id');if($(this).is(':checked')){com.upmenu.BuyingFlow.addProduct(id,groupId);}else{com.upmenu.BuyingFlow.removeProduct(id,groupId);}
return false;});jQuery(document).on("click","._buying-flow-image",function(event){event.preventDefault();event.stopPropagation();var productId=jQuery(this).attr('data-product-id');com.upmenu.BuyingFlow.bigPhoto=true;com.upmenu.BuyingFlow.startByProduct(productId);return false;});jQuery(document).on("click",".theme-plus-btn",function(event){jQuery(document).trigger("upmenu:addToCartClicked");});jQuery(document).on("click",".theme-modal-section",function(e){e.preventDefault();jQuery(this).find('i.fa').toggleClass('fa-angle-down fa-angle-up');jQuery(this).next().slideToggle(250);});jQuery(document).on('click','._scroll-modal',function(e){e.preventDefault();var container=jQuery('#_buying-flow-modal-content .modal-body');var isBuyingFlowV2=jQuery('#_buying-flow-modal').hasClass('theme-buying-flow-modal-v2');if(jQuery('#_buying-flow-modal-content .theme-buying-flow-variants:visible').length>0){var scrollTo=jQuery('#_buying-flow-modal-content .theme-buying-flow-variants');}
else if(jQuery('#_buying-flow-modal-content .theme-buying-flow-half:visible').length>0){var scrollTo=jQuery('#_buying-flow-modal-content .theme-buying-flow-half');}
else if(jQuery('#_buying-flow-modal-content .theme-modal-section-row:visible:first').length>0){var scrollTo=jQuery('#_buying-flow-modal-content .theme-modal-section-row:visible:first');}
else{var scrollTo=jQuery('#_buying-flow-modal-content .modal-body');}
var distance=scrollTo.offset().top-container.offset().top+container.scrollTop()-(isBuyingFlowV2?72:0);container.animate({scrollTop:distance},350);});var onModalScroll=function($modal){if(jQuery('#_buying-flow-modal-content .theme-buying-flow-variants:visible').length==0&&jQuery('#_buying-flow-modal-content .theme-buying-flow-half:visible').length==0&&jQuery('#_buying-flow-modal-content .theme-modal-section-row:visible:first').length==0){return false;}
var container=jQuery('#_buying-flow-modal-content').scrollTop(),modalBody=jQuery('#_buying-flow-modal-content .modal-body').scrollTop(),$scrollBtn=jQuery('._scroll-modal'),$stickyContainer=jQuery('.modal-close-container'),distance=modalBody-container,opacity=1-distance/150;titleOpacity=distance/50;if(titleOpacity>0){$stickyContainer.css({opacity:titleOpacity,visibility:'visible'});}else{$stickyContainer.css({opacity:0,visibility:'hidden'});}
var innerH=jQuery('#_buying-flow-modal-content .modal-sections').height();if(innerH-jQuery('#_buying-flow-modal-content').height()<100){return false;}
if(opacity<=0){$scrollBtn.hide();}
else{$scrollBtn.show().css({opacity:opacity});}};function setFlowHalf(half){if(!half){return;}
if(!half.enabled){jQuery('#_buying-flow-modal-content .theme-buying-flow-half').hide();}else if(half.enabled){jQuery('#_buying-flow-modal-content .theme-buying-flow-half').show();}}
$(function(){$(document).on("upmenu:menuLoaded",function(){var productId=api._getParameterByName(com.upmenu.BuyingFlow.PRODUCT_ID_PARAM);if(productId=='')return;com.upmenu.BuyingFlow.bigPhoto=false;com.upmenu.BuyingFlow.startByProduct(productId);return false;});});$(function(){$(document).on("upmenu:menuLoaded",function(){var productPriceId=api._getParameterByName(com.upmenu.BuyingFlow.PRODUCT_PRICE_ID_PARAM);if(productPriceId=='')return;com.upmenu.BuyingFlow.bigPhoto=false;com.upmenu.BuyingFlow.startByProductPrice(productPriceId);return false;});});

com.upmenu.prototype.startCreateRating=function(){var api=new com.upmenu();ga('send','event','Rating','Start create rating');trackEventsDataLayer('_StartCreateRating','start-create-rating-category','Start create rating','Rating');jQuery.ajax({url:'/api/v1/startCreateRating/'+com.upmenu.siteId+'/'+com.upmenu.siteLanguageId+'?restaurantId='+com.upmenu.restaurantId,type:'POST',success:function(data){jQuery('#_cms-modal-content').html(data);jQuery('#_cms-modal').modal();}});return false;}
com.upmenu.prototype.createRating=function(){var api=new com.upmenu();jQuery.ajax({type:jQuery('#_rating-form').attr('method'),url:jQuery('#_rating-form').attr('action')+'/'+com.upmenu.siteId+'/'+com.upmenu.siteLanguageId,data:jQuery('#_rating-form').serialize(),success:function(data){ga('send','event','Rating','Create rating');trackEventsDataLayer('_CreateRating','create-rating-category','Create rating','Rating');jQuery('#_cms-modal-content').html(data);},error:function(data){ga('send','event','Rating','Validation error');trackEventsDataLayer('_CreateRatingError','create-rating-error-category','Validation error rating','Rating');jQuery('#_cms-modal-content').html(data.responseText);}});return false;}
jQuery(document).on("click","#_start-create-rating",function(event){var api=new com.upmenu();api.startCreateRating();return false;});jQuery(document).on('click','#_rating-form-submit',function(){var api=new com.upmenu();api.createRating();return false;});com.upmenu.prototype.showRatings=function(id,container){var api=new com.upmenu();var siteId=com.upmenu.siteId;if(id===''){var url='/restapi/ratings/'+siteId;}
else{var url='/restapi/ratings/'+siteId+'/'+id;}
jQuery.ajax({type:'GET',url:url,success:function(data){var template=com.upmenu.Templates.restaurantRatings(data);jQuery(container).html(template);},error:function(data){}});}
jQuery(document).on('click','._show-restaurant-ratings',function(e){e.preventDefault();var api=new com.upmenu();var $this=jQuery(this);if($this.hasClass('all-ratings')){var id='';}
else{var id=$this.data('id');}
jQuery('.restaurants-filter > span').html($this.html());api.showRatings(id,'#_theme-ratings');});jQuery(document).on('click','._show-ratings-modal',function(e){e.preventDefault();var api=new com.upmenu();var id=jQuery(this).data('id');api.showRatings(id,'._ratings-modal-content');jQuery('#_restaurant-info-modal').modal('hide');jQuery('#_ratings-modal').modal('show');});function showRestaurantRating(){var averageGrade=com.upmenu.restaurant.averageGrade
var starTotal=5;var starPercentage=(averageGrade/starTotal)*100;var starPercentageRounded=(Math.round(starPercentage/10)*10)+"%";$('#rating_restaurant .stars-inner').css({"width":starPercentageRounded});};

com.upmenu.prototype.subscribeToNewsletter=function($form){$form.find('input[name=siteId]').val(com.upmenu.siteId);jQuery.ajax({type:'POST',url:$form.attr('action'),data:$form.serialize(),success:function(data){$form.closest('._newsletter-subscribe-form-wrapper').replaceWith(data);setupPhoneInput('phone');},error:function(data){$form.closest('._newsletter-subscribe-form-wrapper').replaceWith(data.responseText);setupPhoneInput('phone');}});return false;};com.upmenu.prototype.showNewsletterSubscribeFormModal=function(){var api=new com.upmenu();jQuery.ajax({url:'/api/v1/showNewsletterSubscribeFormModal/'+com.upmenu.siteId,type:'POST',success:function(data){jQuery('#_newsletter-subscription-modal .modal-content').html(data);jQuery('#_newsletter-subscription-modal').modal('show');setupPhoneInput('phone');},error:function(data){setupPhoneInput('phone');}});return false;};jQuery(document).on('click','._start-newsletter-subscribe',function(){var api=new com.upmenu();api.showNewsletterSubscribeFormModal();return false;});jQuery(document).on('click','._newsletter-subscribe-form-submit',function(){var api=new com.upmenu();api.subscribeToNewsletter(jQuery(this).closest('._newsletter-subscribe-form'));return false;});com.upmenu.prototype.showNewsletterSubscribeFormAutomatically=function(){if(com.upmenu.newsletterSubscribePopup=='true'){var api=new com.upmenu();var newsletterCookie=com.upmenu.Cookies.getNewsletterModal();if(newsletterCookie==null){api.showNewsletterSubscribeFormModal();}
jQuery('#_newsletter-subscription-modal').on('hidden.bs.modal',function(){com.upmenu.Cookies.saveNewsletterModal();});}};jQuery(function(){var api=new com.upmenu();if(com.upmenu.deviceType!='MOBILE'){setTimeout(function(){api.showNewsletterSubscribeFormAutomatically();},30000);}});com.upmenu.prototype.unsubscribeFromNewsletter=function(){jQuery.ajax({type:'POST',url:jQuery('#_newsletter-unsubscribe-form').attr('action'),data:jQuery('#_newsletter-unsubscribe-form').serialize(),success:function(data){jQuery('#_cms-modal-narrow-content').html(data);},error:function(data){jQuery('#_cms-modal-narrow-content').html(data.responseText);}});return false;};jQuery(document).on('click','#_newsletter-unsubscribe-form-submit',function(){var api=new com.upmenu();api.unsubscribeFromNewsletter();return false;});com.upmenu.prototype.showNewsletterUnsubscribeForm=function(){var name='newsletterUnsubscribe';var api=new com.upmenu();var newsletterUnsubscribe=api._getParameterByName(name);if(newsletterUnsubscribe=='')return;jQuery.ajax({url:'/api/v1/showNewsletterUnsubscribeForm/'+newsletterUnsubscribe,type:'POST',success:function(data){jQuery('#_cms-modal-narrow-content').html(data);jQuery('#_cms-modal-narrow').modal();},error:function(data){setupPhoneInput('phone');}});return false;};jQuery(document).on('click','._show-unsubscribe-modal',function(e){e.preventDefault();jQuery.ajax({url:jQuery(this).attr('href'),type:'GET',success:function(data){jQuery('#_unsubscribe-modal-body').html(data);setupPhoneInput('phone');jQuery('#_unsubscribe-modal').modal('show');}});})
jQuery(document).on('click','._unsubscribe-from-selected',function(){const $form=jQuery('#_unsubscribe-form');jQuery.ajax({type:'POST',url:$form.attr('action'),data:$form.serialize(),success:function(data){jQuery('#_unsubscribe-modal-body').html(data);},error:function(data){jQuery('#_unsubscribe-modal-body').html(data.responseText);setupPhoneInput('phone');}});return false;});jQuery(document).on('input','#_unsubscribe-form',function(){const $form=jQuery(this);const $button=jQuery('._unsubscribe-from-selected');const emailChecked=$form.find('input[name="emailUnsubscribe"]').is(':checked');const phoneChecked=$form.find('input[name="phoneUnsubscribe"]').is(':checked');if(emailChecked){jQuery('._email-unsubscribe-input').removeClass('hidden');}else{jQuery('._email-unsubscribe-input').addClass('hidden');}
if(phoneChecked){jQuery('._phone-unsubscribe-input').removeClass('hidden');}else{jQuery('._phone-unsubscribe-input').addClass('hidden');}
if(emailChecked||phoneChecked){$button.prop('disabled',false);}
else{$button.prop('disabled',true);}})
var api=new com.upmenu();api.showNewsletterUnsubscribeForm();;

com.upmenu.prototype.showCustomerAccountSummary=function(customerId){var api=new com.upmenu();jQuery.ajax({url:'/api/v1/customerAccountSummary/'+com.upmenu.siteId+'/'+com.upmenu.siteLanguageId+'?customerId='+customerId,type:'POST',success:function(data){$('#_cms-modal-big-content').html(data);$('#_cms-modal-big').modal();$('.popover').popover('hide');$("[data-toggle=popover]").popover();}});return false;}
com.upmenu.prototype.initShowCustomerAccountSummary=function(){var name='showCustomerAccountSummary';var name2='customerId';var api=new com.upmenu();var show=api._getParameterByName(name);var customerId=api._getParameterByName(name2);if(customerId==''||show!='true')return;api.showCustomerAccountSummary(customerId);return false;}
jQuery(document).on("click","#_show-customer-account-summary",function(event){var api=new com.upmenu();api.showCustomerAccountSummary();return false;});var api=new com.upmenu();api.initShowCustomerAccountSummary();com.upmenu.prototype.showCustomerOrders=function(){var api=new com.upmenu();jQuery.ajax({url:'/api/v1/customerOrders/'+com.upmenu.siteId+'/'+com.upmenu.siteLanguageId,type:'POST',success:function(data){$('#_cms-modal-big-content').html(data);$('#_cms-modal-big').modal();}});return false;}
jQuery(document).on("click","#_show-customer-orders",function(event){var api=new com.upmenu();api.showCustomerOrders();return false;});jQuery(document).on("click","#check-existence-customer",function(event){var api=new com.upmenu();api.checkCustomerExistence();return false;});jQuery(document).on('keyup focus','#customer-password-change',function(e){passwordStrength('customer');});jQuery(document).on('keyup focus','#forgot-password-change, #forgotPasswordConfirm',function(e){passwordStrength('forgot');});com.upmenu.prototype.startEditCustomer=function(){var api=new com.upmenu();jQuery.ajax({url:'/restapi/v2/customer/account/'+com.upmenu.siteId+'/'+com.upmenu.customer.id,type:'GET',success:function(customer){var data=com.upmenu.Templates.customerForm(customer,com.upmenu.site)
$('#_cms-modal-big-content').html(data);$('#_cms-modal-big').modal();$('[data-toggle=popover]').popover();api._initCustomerAccountFormMap();setupPhoneInput("phone");}});return false;}
com.upmenu.prototype.saveCustomer=function(){jQuery(".info-success").hide();var api=new com.upmenu();jQuery.ajax({type:'POST',url:'/restapi/v2/customer/account/'+com.upmenu.siteId,data:jQuery('#customer-account-form').serialize(),headers:{language:com.upmenu.language},success:function(customer){var data=com.upmenu.Templates.customerForm(customer,com.upmenu.site)
$('#_cms-modal-big-content').html(data);api._initCustomerAccountFormMap();jQuery(".info-success").show();$('[data-toggle=popover]').popover();},error:function(customer){var data=com.upmenu.Templates.customerForm(customer.responseJSON,com.upmenu.site)
$('#_cms-modal-big-content').html(data);api._initCustomerAccountFormMap();setupPhoneInput("phone");$('[data-toggle=popover]').popover();}});return false;}
com.upmenu.prototype._initCustomerAccountFormMap=function(){$('#_customer-account-form-map-container').html('<div id="_customer-account-form-map"></div>');var options={center:[52.1,19.3],zoom:8,};var map=L.map(document.getElementById("_customer-account-form-map"),options);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:18}).addTo(map);var api=new com.upmenu();var lat=jQuery('#customer-account-form #latitude').val();var lng=jQuery('#customer-account-form #longitude').val();if(lat!=''&&lng!=''){var latLng=L.latLng(lat,lng);var icon=L.icon({iconUrl:com.upmenu.staticPath+'/images/icons/map-pin.png',iconSize:[21,34],iconAnchor:[10.5,34]});var marker=L.marker(latLng,{icon:icon});marker.addTo(map);map.setView(latLng,14);}
setTimeout(function(){map.invalidateSize()},250);}
com.upmenu.prototype.checkCustomerExistence=function(){if(jQuery("#_customer_email").val()){com.upmenu.RestApi.Customer.getByEmail(jQuery("#_customer_email").val()).done(function(){jQuery('._customer-login').show();}).fail(function(){jQuery('._customer-login').hide();});}
return false;}
jQuery(document).on('click','._open-login-modal',function(e){e.preventDefault();jQuery('#_customer_email').popover('hide');jQuery('#_start-login').click();});jQuery(document).on('click','._close-login-popover',function(e){e.preventDefault();jQuery('#_customer_email').popover('hide');});jQuery(document).on('click','#_customer-account-save',function(){var api=new com.upmenu();api.saveCustomer();return false;});jQuery(document).on("click","#_start-edit-customer",function(event){var api=new com.upmenu();api.startEditCustomer();return false;});jQuery(document).on('change','#customer-account-form #city, #customer-account-form #street, #customer-account-form #streetNumber',function(){if(jQuery("#customer-account-form #city").val()==''||jQuery("#customer-account-form #street").val()==''||jQuery("#customer-account-form #streetNumber").val()==''){return;}
var city=jQuery("#customer-account-form #city").val();var street=jQuery("#customer-account-form #street").val();var streetNumber=jQuery("#customer-account-form #streetNumber").val();var api=new com.upmenu();var addressGeocodingDto={city:city,street:street,streetNumber:streetNumber};com.upmenu.RestApi.Address.findAddress(addressGeocodingDto).done(function(location){if(location==null){return;}
var lat=location.latitude;var lng=location.longitude;jQuery('#customer-account-form #latitude').val(lat);jQuery('#customer-account-form #longitude').val(lng);api._initCustomerAccountFormMap();});});$(function(){if($('.theme-nav-customer-account-wrapper').length){var model=$.extend({},{},{customer:com.upmenu.customer});var source=$("#cms3-navCustomerAccount-html").html();var template=Handlebars.compile(source);var html=template(model);$(".theme-nav-customer-account-wrapper").html(html);}
if(com.upmenu.customer){fillCustomerData('customer-data-street',com.upmenu.customer.street);fillCustomerData('customer-data-streetNumber',com.upmenu.customer.streetNumber);fillCustomerData('customer-data-city',com.upmenu.customer.city);fillCustomerData('customer-data-latitude',com.upmenu.customer.latitude);fillCustomerData('customer-data-longitude',com.upmenu.customer.longitude);}
function fillCustomerData(selector,value){if(selector&&value){$("."+selector).val(value);}}});

var checkDeliveryMap=null;var checkDeliveryMarkers=[];var $deliveryForm=jQuery('#_restaurants-delivery-check-form');var leafletMapIcon=L.icon({iconUrl:com.upmenu.staticPath+'/images/icons/map-pin.png',iconSize:[21,34],iconAnchor:[10.5,34],popupAnchor:[10.5,34]});com.upmenu.prototype.deliveryCheckFormHandlePlaceChange=function(place,searchPhrase){com.upmenu.prototype.saveGooglePlacesResponseToCustomerCookie(place,searchPhrase);var customer=com.upmenu.Cookies.getCustomerData();var fields=api._getDeliveryFormFields();com.upmenu.prototype.deliveryCheckFormFindByLatLng(customer.city,customer.latitude,customer.longitude,fields.deliveryType);};com.upmenu.prototype._initDeliveryCheckFormMap=function(){if(jQuery('#_delivery-check-form-map').length==0)return;if(jQuery('#_delivery-check-restaurants ._restaurant').length==0)return;checkDeliveryMarkers=[];if(jQuery('#_delivery-check-form-map').hasClass('leaflet-container')==false){checkDeliveryMap=L.map(document.getElementById('_delivery-check-form-map'),{center:[51,19],zoom:10});L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:18}).addTo(checkDeliveryMap);}
var lat=jQuery('#delivery-check-form #latitude').val();var lng=jQuery('#delivery-check-form #longitude').val();if(lat!=''&&lng!=''){var latLng=L.latLng(lat,lng);var marker=L.marker(latLng,{icon:leafletMapIcon,});marker.bindPopup(I18n.t('js_restaurants_map_your_are_here'));marker.addTo(checkDeliveryMap);checkDeliveryMarkers.push(marker);}
jQuery('#_delivery-check-restaurants ._restaurant').each(function(){var latLng=L.latLng(jQuery(this).attr('data-lat'),jQuery(this).attr('data-lng'));var marker=L.marker(latLng,{icon:leafletMapIcon,});marker.bindPopup($("<div/>").append($(this).clone().removeClass('_restaurant')).html());marker.addTo(checkDeliveryMap);checkDeliveryMarkers.push(marker);});api._centerMapOnMarkers();if($('#_delivery-check-form-map').length>0){var mapWidth=$('#_delivery-check-form-map').parent().width();$('#_delivery-check-form-map').css('width',mapWidth);checkDeliveryMap.invalidateSize();}};com.upmenu.prototype._centerMapOnMarkers=function(){if(checkDeliveryMap==null)return;if(checkDeliveryMarkers.length==0)
return;var featureGroup=new L.featureGroup();for(var i=0;i<checkDeliveryMarkers.length;i++){checkDeliveryMarkers[i].addTo(featureGroup);}
checkDeliveryMap.fitBounds(featureGroup.getBounds(),{padding:[50,50]});};com.upmenu.prototype._checkDeliveryRestaurantEnter=function(element){if(checkDeliveryMap==null)return;var latLng=L.latLng(jQuery(element).attr('data-lat'),jQuery(element).attr('data-lng'));checkDeliveryMap.setView(latLng,12);};com.upmenu.prototype._checkDeliveryRestaurantLeave=function(){api._centerMapOnMarkers();};com.upmenu.prototype._getDeliveryFormFields=function(){var fields={deliveryAddress:jQuery('#check-form-address'),city:jQuery('#delivery-check-form [name=city]'),street:jQuery('#delivery-check-form [name=street]'),streetNumber:jQuery('#delivery-check-form [name=streetNumber]'),region:jQuery('#delivery-check-form [name=region]'),apartmentNumber:jQuery('#delivery-check-form [name=apartmentNumber]'),floorNumber:jQuery('#delivery-check-form [name=floorNumber]'),customAddressField1:jQuery('#delivery-check-form [name=customAddressField1Value]'),customAddressField2:jQuery('#delivery-check-form [name=customAddressField2Value]'),customAddressField3:jQuery('#delivery-check-form [name=customAddressField3Value]'),deliveryType:jQuery(".delivery-type-form.active").attr('data-value')=="ALL"?null:jQuery(".delivery-type-form.active").attr('data-value'),postalCode:jQuery('#delivery-check-form [name=postalCode]'),latitude:jQuery('#delivery-check-form [name=latitude]'),longitude:jQuery('#delivery-check-form [name=longitude]'),restaurantTemplate:jQuery('#delivery-check-form [name=restaurantTemplate]')};return fields;};com.upmenu.prototype._initFields=function(){if(com.upmenu.site.hideAddressSearchOnRestaurantList){return;}
var fields=api._getDeliveryFormFields();var customer=com.upmenu.Cookies.getCustomerData();var $deliveryData=jQuery('.delivery-type-form[data-value='+customer.deliveryType+']');fields.city.val(customer.city);fields.street.val(customer.street);fields.streetNumber.val(customer.streetNumber);fields.latitude.val(customer.latitude);fields.longitude.val(customer.longitude);fields.postalCode.val(customer.postalCode);fields.region.val(customer.region);fields.customAddressField1.val(customer.customAddressField1);fields.customAddressField2.val(customer.customAddressField2);fields.customAddressField3.val(customer.customAddressField3);$deliveryData.addClass('active');var defaultFormat="{city}, {street} {streetNumber} {postalCode} {customAddressField1Value} {customAddressField2Value} {customAddressField3Value}";var addressFormat=com.upmenu.site.geocodeFormat;if(!addressFormat){addressFormat=defaultFormat;}
var fullAddress=addressFormat.replace("{city}",safeNullify(customer.city)).replace("{street}",safeNullify(customer.street)).replace("{streetNumber}",safeNullify(customer.streetNumber)).replace("{postalCode}",safeNullify(customer.postalCode)).replace("{region}",safeNullify(customer.region)).replace("{customAddressField1Value}",safeNullify(customer.customAddressField1)).replace("{customAddressField2Value}",safeNullify(customer.customAddressField2)).replace("{customAddressField3Value}",safeNullify(customer.customAddressField3)).replace("{city*}",safeNullify(customer.city)).replace("{street*}",safeNullify(customer.street)).replace("{streetNumber*}",safeNullify(customer.streetNumber)).replace("{postalCode*}",safeNullify(customer.postalCode)).replace("{region*}",safeNullify(customer.region)).replace("{customAddressField1Value*}",safeNullify(customer.customAddressField1)).replace("{customAddressField2Value*}",safeNullify(customer.customAddressField2)).replace("{customAddressField3Value*}",safeNullify(customer.customAddressField3)).replace("{region*}",safeNullify(customer.region));if(fullAddress.trim().length>2){fields.deliveryAddress.html('<i class="fa fa-map-marker fa-fw "></i>&nbsp;'+fullAddress.replace(/,(\s+)?$/,''));jQuery('._clear-form-address').removeClass('hidden');if(com.upmenu.cmsv4){jQuery('.check-form-filters ,.check-form-restaurants').show();}}
$deliveryData.addClass('active');jQuery('.restaurants-filter span').html($deliveryData.html());}
jQuery(document).on('click','.reset-filter',function(e){e.preventDefault();jQuery('._restaurant').show();jQuery('.restaurants-filter span').html(jQuery(this).html());jQuery('.reset-filter').addClass('active').siblings().removeClass('active');});com.upmenu.prototype.safeString=safeNullify=function(text){if(text){return text;}
else return'';};com.upmenu.prototype._renderDeliveryCheckForm=function(restaurants,message,messageType){if(restaurants.length===1&&!com.upmenu.cmsv4&&com.upmenu.theme_settings.theme_settings_restaurants_redirect_when_found==="true"){window.location.href=restaurants[0].url;return;}
var fields=api._getDeliveryFormFields();com.upmenu.RestApi.Restaurant.kitchenTypes().done(function(kitchenTypes){com.upmenu.Templates.deliveryCheckForm(restaurants,message,messageType,fields.restaurantTemplate.val(),com.upmenu.restaurantSearchForm,kitchenTypes);api._initFields();if(restaurants.length>0){jQuery(document).trigger("upmenu:restaurantsListShown");}else{jQuery(document).trigger("upmenu:restaurantsListHidden");}
jQuery(".lazy-image").Lazy();setTimeout(function(){api._initDeliveryCheckFormMap();$('.dropdown-toggle').dropdown();if(location.protocol!=='https:'){jQuery('._get-gps-location').hide();}},200);})};com.upmenu.prototype.showDeliveryCheckFormModal=function(){var api=new com.upmenu();com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){ga('send','event','Cart','Show delivery check modal');trackEventsDataLayer('_ShowDeliveryCheckModal','show-delivery-check-form-category','Show delivery check modal','Delivery check');com.upmenu.prototype._renderDeliveryCheckForm(restaurants);com.upmenu.restaurantsToSearch=restaurants;jQuery('#_delivery-check-modal').modal();setTimeout(function(){api._initDeliveryCheckFormMap();if(location.protocol!=='https:'){jQuery('._get-gps-location').hide();}},200);}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;};com.upmenu.prototype.filterRestaurantsByDeliveryType=function(deliveryType){var $deliveryData=jQuery('.delivery-type-form[data-value='+deliveryType+']');if(deliveryType==="TAKEAWAY"){jQuery('._restaurant').each(function(){$('.delivery-max-order-price').hide();var that=jQuery(this);var takeawy=that.data("takeaway");if(!takeawy){that.hide();}else that.show();});}else if(deliveryType==="DELIVERY"){$('.delivery-max-order-price').show();jQuery('._restaurant').each(function(){var that=jQuery(this);var delivery=that.data("delivery");if(!delivery){that.hide();}else that.show();});}else if(deliveryType==="ONSITE"){$('.delivery-max-order-price').hide();jQuery('._restaurant').each(function(){var that=jQuery(this);var onsite=that.data("onsite");if(!onsite){that.hide();}else that.show();});}else{$('.delivery-max-order-price').show();jQuery('._restaurant').show();}
if(jQuery('._restaurant:not([style*="display: none"])').size()==0){jQuery('.filter-no-restaurants').removeClass('hidden');}else{jQuery('.filter-no-restaurants').addClass('hidden');}
$deliveryData.addClass('active');jQuery('.restaurants-filter span').html($deliveryData.html());};function isNotValid(field,element){return(field.length===1&&field.val()===''&&jQuery(element).data('required')===true);}
com.upmenu.prototype.checkDelivery=function(){var api=new com.upmenu();var fields=api._getDeliveryFormFields();if(jQuery("#delivery-check-form").validate({rules:{streetNumber:{required:{depends:function(element){return isNotValid(fields.streetNumber,element);}}},street:{required:{depends:function(element){return isNotValid(fields.street,element);}}},city:{required:{depends:function(element){return isNotValid(fields.city,element);}}},region:{required:{depends:function(element){return isNotValid(fields.region,element);}}},postalCode:{required:{depends:function(element){return isNotValid(fields.postalCode,element);}}},floorNumber:{required:{depends:function(element){return isNotValid(fields.floorNumber,element);}}},apartmentNumber:{required:{depends:function(element){return isNotValid(fields.apartmentNumber,element);}}},customAddressField1Value:{required:{depends:function(element){return isNotValid(fields.customAddressField1,element);}}},customAddressField2Value:{required:{depends:function(element){return isNotValid(fields.customAddressField2,element);}}},customAddressField3Value:{required:{depends:function(element){return isNotValid(fields.customAddressField3,element);}}}},messages:{street:I18n.t('NotEmpty'),city:I18n.t('NotEmpty'),region:I18n.t('NotEmpty'),postalCode:I18n.t('NotEmpty'),streetNumber:I18n.t('NotEmpty'),customAddressField1Value:I18n.t('NotEmpty'),customAddressField2Value:I18n.t('NotEmpty'),customAddressField3Value:I18n.t('NotEmpty'),floorNumber:I18n.t('NotEmpty'),apartmentNumber:I18n.t('NotEmpty')},errorClass:'help-block',highlight:function(element){$(element).closest('.form-group').removeClass('has-success').addClass('has-error');},success:function(element){element.closest('.form-group').removeClass('has-error').addClass('has-success');}}).form()){function isEmptySearch(){return(fields.city.length===0||(fields.city.length!==0&&fields.city.val().isBlank()))&&(fields.street.length===0||(fields.street.length!==0&&fields.street.val().isBlank()))&&(fields.streetNumber.length===0||(fields.streetNumber.length!==0&&fields.streetNumber.val().isBlank()))&&(fields.postalCode.length===0||(fields.postalCode.length!==0&&fields.postalCode.val().isBlank()))&&(fields.region.length===0||(fields.region.length!==0&&fields.region.val().isBlank()))&&(fields.customAddressField1.length===0||(fields.customAddressField1.length!==0&&fields.customAddressField1.val().isBlank()))&&(fields.customAddressField2.length===0||(fields.customAddressField2.length!==0&&fields.customAddressField2.val().isBlank()))&&(fields.customAddressField3.length===0||(fields.customAddressField3.length!==0&&fields.customAddressField3.val().isBlank()));}
function isShowByCitySearch(){return(fields.city.length===0||(fields.city.length!==0&&!fields.city.val().isBlank()))&&(fields.street.length===0||(fields.street.length!==0&&fields.street.val().isBlank()))&&(fields.streetNumber.length===0||(fields.streetNumber.length!==0&&fields.streetNumber.val().isBlank()))&&(fields.postalCode.length===0||(fields.postalCode.length!==0&&fields.postalCode.val().isBlank()))&&(fields.region.length===0||(fields.region.length!==0&&fields.region.val().isBlank()))&&(fields.customAddressField1.length===0||(fields.customAddressField1.length!==0&&fields.customAddressField1.val().isBlank()))&&(fields.customAddressField2.length===0||(fields.customAddressField2.length!==0&&fields.customAddressField2.val().isBlank()))&&(fields.customAddressField3.length===0||(fields.customAddressField3.length!==0&&fields.customAddressField3.val().isBlank()));}
function saveCustomerDataToCookie(){com.upmenu.Cookies.saveCustomerData({city:fields.city.val(),street:fields.street.val(),streetNumber:fields.streetNumber.val(),latitude:fields.latitude.val(),longitude:fields.longitude.val(),postalCode:fields.postalCode.val(),region:fields.region.val(),customAddressField1:fields.customAddressField1.val(),customAddressField2:fields.customAddressField2.val(),customAddressField3:fields.customAddressField3.val(),deliveryType:fields.deliveryType});}
if(isEmptySearch()){com.upmenu.prototype.filterRestaurantsByDeliveryType(fields.deliveryType);return;}
if(isShowByCitySearch()){fields.latitude.val('');fields.longitude.val('');saveCustomerDataToCookie();com.upmenu.RestApi.Restaurant.getByCity(com.upmenu.siteId,com.upmenu.language,fields.city.val(),fields.deliveryType).done(function(restaurants){if(restaurants.length>0){com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_in_city'),'alert-success');}
else{com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_not_delivery'),'alert-danger');}}).fail(function(){noty({text:I18n.t('cms_ajax_error')});});return;}
var address=fields.street.val()+', '+fields.street.val()+' '+fields.streetNumber.val();var addressGeocodingDto={siteId:com.upmenu.siteId,restaurantId:com.upmenu.restaurantId,city:fields.city.val(),street:fields.street.val(),streetNumber:fields.streetNumber.val(),postalCode:fields.postalCode.val(),region:fields.region.val(),customAddressField1:fields.customAddressField1.val(),customAddressField2:fields.customAddressField2.val(),customAddressField3:fields.customAddressField3.val()};com.upmenu.RestApi.Address.findAddress(addressGeocodingDto).done(function(location){ga('send','event','Delivery check','Address found',address);trackEventsDataLayer('_ShowDeliveryAddressFound','show-delivery-address-found-category','Address found',address);var latlng=null;if(location!=null&&location.latitude!=null){latlng={lat:location.latitude,lng:location.longitude};}
if(latlng==null){com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){com.upmenu.prototype._renderDeliveryCheckForm([],I18n.t('js_restaurants_no_address_body'),'alert-danger');}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return;}
fields.latitude.val(latlng.lat);fields.longitude.val(latlng.lng);saveCustomerDataToCookie();com.upmenu.prototype.deliveryCheckFormFindByLatLng(fields.city.val(),fields.latitude.val(),fields.longitude.val(),fields.deliveryType,addressGeocodingDto);}).fail(function(err){ga('send','event','Delivery check','Address not found',address);trackEventsDataLayer('_ShowDeliveryAddressNotFound','show-delivery-address-not-found-category','Address not found',address);com.upmenu.prototype._renderDeliveryCheckForm([],I18n.t('js_restaurants_no_address_body'),'alert-danger');saveCustomerDataToCookie();});return false;}
return false;};com.upmenu.prototype.deliveryCheckFormFindByLatLng=function findByLatLng(city,latitude,longitude,deliveryType,addressGeocodingDto){com.upmenu.RestApi.Restaurant.getByLatLng(com.upmenu.siteId,com.upmenu.language,latitude,longitude,deliveryType,addressGeocodingDto).done(function(restaurants){com.upmenu.restaurantsToSearch=restaurants;if(restaurants.length===0){com.upmenu.RestApi.Restaurant.getClosest(com.upmenu.siteId,com.upmenu.language,city,latitude,longitude).done(function(restaurants){if(com.upmenu.findRestaurantsByDistance&&restaurants.length>0){com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_closest_restaurants'),'alert-danger');}
else{com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_not_delivery'),'alert-danger');}
api._invalidateMapSize();api._mapAffix();}).fail(function(){if(restaurants.length===0){com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_not_delivery'),'alert-danger');}});}
if(restaurants.length>1){com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_delivery_more_restaurants'),'alert-success');const cheapestDeliveryRestaurant=com.upmenu.prototype.findRestaurantWithCheapestDelivery(restaurants);if(cheapestDeliveryRestaurant){$('#_restaurant-'+cheapestDeliveryRestaurant.id+' ._delivery-cost-extra-info-placeholder').text(I18n.t('js_restaurants_cheapest_delivery'));}}
if(restaurants.length===1){if(com.upmenu.restaurantId===restaurants[0].id){api.refreshCart(true);com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_delivery_this')+"<span class='_delivery-check-cost'></span>",'alert-success');}else{com.upmenu.prototype._renderDeliveryCheckForm(restaurants,I18n.t('js_restaurants_delivery')+"<span class='_delivery-check-cost'></span>",'alert-success');}}}).fail(function(){noty({text:I18n.t('cms_ajax_error')});});};com.upmenu.prototype.findRestaurantWithCheapestDelivery=function(restaurants){let cheapestDeliveryRestaurant;restaurants.forEach(function(restaurant){if(restaurant.deliveryCost){if(!cheapestDeliveryRestaurant){cheapestDeliveryRestaurant=restaurant;}else{if(cheapestDeliveryRestaurant.deliveryCost>restaurant.deliveryCost){cheapestDeliveryRestaurant=restaurant;}}}});return cheapestDeliveryRestaurant;}
let mapMyLocation=null;com.upmenu.prototype.getGpsLocation=function(search){function initializeMapAndLocator(){function successGpsMap(position){let current_accuracy;function drawCircle(lat,lon,colorCircle){current_accuracy=L.circle(L.latLng(lat,lon),{color:colorCircle,fillColor:"#f03",fillOpacity:0.0,radius:100}).addTo(mapMyLocation);}
setTimeout(function(){$("#_show-modal-geolocation-body").html("<div id='getMyLocation' style='height: 450px;'></div>");mapMyLocation=L.map('getMyLocation').setView([0,0],10);const attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';const tileUrl='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';const tiles=L.tileLayer(tileUrl,{attribution:attribution});tiles.addTo(mapMyLocation);let cssIcon=L.divIcon({className:'css_icon',html:'<div class="gps_ring"></div>',iconSize:[40,40],iconAnchor:[19,22]});const lat=position.coords.latitude;const lon=position.coords.longitude;L.Circle.include({contains:function(latLng){return this.getLatLng().distanceTo(latLng)<this.getRadius();}});mapMyLocation.setView(L.latLng(lat,lon),20,20);let getLatLon=L.latLng(lat,lon);let markerGeoLocation=L.marker(getLatLon,{icon:cssIcon,});markerGeoLocation.addTo(mapMyLocation);if(window.outerWidth<480){drawCircle(lat,lon,"black");mapMyLocation.fitBounds(current_accuracy.getBounds());}
let marker=L.marker(mapMyLocation.getCenter(),{icon:leafletMapIcon}).addTo(mapMyLocation);let isInside=true;let positionStart={coords:{latitude:lat,longitude:lon}}
getGpsPosition(positionStart);mapMyLocation.on('drag',function(e){const center=mapMyLocation.getCenter()
marker.setLatLng(center);if(window.outerWidth<480){isInside=current_accuracy.contains(marker.getLatLng());marker.bindPopup(I18n.t('geolocation_modal_map_popup'));marker.closePopup();}});mapMyLocation.on('dragend',function(e){if(window.outerWidth<480){if(isInside){drawCircle(lat,lon,"black");let position={coords:{latitude:marker.getLatLng().lat,longitude:marker.getLatLng().lng}}
$('._show-modal-geolocation-btn').removeClass('disabled');getGpsPosition(position);}else{drawCircle(lat,lon,"red");let position={coords:{latitude:lat,longitude:lon}}
$('._show-modal-geolocation-btn').addClass('disabled');getGpsPosition(position);marker.openPopup();}}else{let position={coords:{latitude:marker.getLatLng().lat,longitude:marker.getLatLng().lng}}
$('._show-modal-geolocation-btn').removeClass('disabled');getGpsPosition(position);}});},500);jQuery('#_show-modal-geolocation').modal();}
if(navigator.geolocation){navigator.geolocation.getCurrentPosition(successGpsMap,showError);}else{console.log('Browser doesnt support Geolocation');}}
function getGpsPosition(position){var api=new com.upmenu();var gpsPosition={siteId:com.upmenu.siteId,restaurantId:com.upmenu.restaurantId,latitude:position.coords.latitude,longitude:position.coords.longitude}
jQuery.ajax({url:'/restapi/address/reverseGeocode',type:'post',data:JSON.stringify(gpsPosition),contentType:"application/json; charset=utf-8",dataType:"json",success:function(data){com.upmenu.Cookies.saveCustomerData({city:data.city,postalCode:data.postalCode,street:data.street,streetNumber:data.streetNumber,region:data.region,customAddressField1:data.customAddressField1,customAddressField2:data.customAddressField2,customAddressField3:data.customAddressField3});fillAddressFields(data);},error:function(data){if(data.responseJSON&&data.responseJSON.status&&data.responseJSON.status==='ADDRESS_NOT_COMPLETE'){fillAddressFields(data.responseJSON);}else{console.log('GPS localization error: '+data.statusText);jQuery('._get-gps-location').removeClass('show-spinner');}}});}
function fillAddressFields(data){if(jQuery('#delivery-check-form').length==1||jQuery('._order-address-group').length==1||$('#_show-modal-geolocation-address').length==1){jQuery('input[name="city"]').val(data.city);jQuery('input[name="postalCode"]').val(data.postalCode);jQuery('input[name="street"]').val(data.street);jQuery('input[name="streetNumber"]').val(data.streetNumber);jQuery('input[name="region"]').val(data.region);jQuery('select[name="region"] option[value="'+data.region+'"]').attr("selected","selected");jQuery('input[name="customAddressField1Value"]').val(data.customAddressField1);jQuery('input[name="customAddressField2Value"]').val(data.customAddressField2);jQuery('input[name="customAddressField3Value"]').val(data.customAddressField3);$('#_show-modal-geolocation-address .street').html(data.street);$('#_show-modal-geolocation-address .number').html(data.streetNumber);$('#_show-modal-geolocation-address .postal-code').html(data.postalCode);$('#_show-modal-geolocation-address .city').html(data.city);$('#_show-modal-geolocation-address .region').html(data.region);$('#_show-modal-geolocation-address .custom-field-1').html(data.customAddressField1);$('#_show-modal-geolocation-address .custom-field-2').html(data.customAddressField2);$('#_show-modal-geolocation-address .custom-field-3').html(data.customAddressField3);jQuery('._order-address-group input').trigger('change');jQuery('._get-gps-location').removeClass('show-spinner');}}
function showError(error){var errorMsg;switch(error.code){case error.PERMISSION_DENIED:errorMsg=I18n.t('cms_gps_error_denied');break;case error.POSITION_UNAVAILABLE:errorMsg=I18n.t('cms_gps_error_unavailable');break;case error.TIMEOUT:errorMsg=I18n.t('cms_gps_error_timeout');break;case error.UNKNOWN_ERROR:errorMsg=I18n.t('cms_gps_error_unknown');break;}
jQuery('._gps-error').html(errorMsg);jQuery('._get-gps-location').removeClass('show-spinner');}
initializeMapAndLocator();};com.upmenu.prototype._mapAffix=function(){if($(window).width()>=768){var screenRelativeTop=$('#_delivery-check-form-details').offset().top+50;$('#_delivery-check-form-map-affix-container').affix({offset:{top:screenRelativeTop}});}else{$(window).off('.affix');$("#_delivery-check-form-map-affix-container").removeClass("affix affix-top affix-bottom").removeData("bs.affix");}
if(checkDeliveryMap!=null)
checkDeliveryMap.invalidateSize();};com.upmenu.prototype._invalidateMapSize=function(){if($('#_delivery-check-form-map').length>0){var mapWidth=$('#_delivery-check-form-map-affix-container').parent().width();$('#_delivery-check-form-map-affix-container').css('width',mapWidth);$('#_delivery-check-form-map-affix').css('width',mapWidth);api._mapAffix();}};jQuery(document).on("click","._get-gps-location",function(e){e.preventDefault();e.stopPropagation();jQuery(this).addClass('show-spinner');api.getGpsLocation(false);});$(document).on('click','._show-modal-geolocation-btn',function(){$('#_check-delivery').trigger('click');$('#_show-modal-geolocation').modal('hide');$('._get-gps-location').removeClass('show-spinner');});$(document).on('click','._show-modal-geolocation-close',function(){$('#_show-modal-geolocation').modal('hide');$('._get-gps-location').removeClass('show-spinner');});jQuery(document).on("click","._check-form-address:not([disabled])",function(e){e.preventDefault();e.stopPropagation();jQuery(this).blur();jQuery('.check-form-group').slideToggle(100).focus();});jQuery(document).on("keyup","#search-by-phrase",function(e){if(!(e.key=='Enter'||e.keyCode==13)){jQuery('#search-by-phrase').removeClass('searching');return;}
if(jQuery(this).hasClass('searching')){return;}
jQuery(this).addClass('searching');let phrase=jQuery(this).val()
if(phrase.length==0){jQuery('#_delivery-check-restaurants ._restaurant').each(function(){jQuery(this).show();});jQuery('.filter-no-restaurants').addClass('hidden');jQuery('#search-by-phrase').val('');jQuery('.search-bar').removeClass('active');jQuery('.types-bar a:first').click();var fields=api._getDeliveryFormFields();com.upmenu.prototype.filterRestaurantsByDeliveryType(fields.deliveryType);return;}
restaurantIds=[];jQuery('#_delivery-check-restaurants ._restaurant').each(function(){restaurantIds.push(jQuery(this).data('id'));});jQuery('#_delivery-check-restaurants ._restaurant').each(function(){jQuery(this).hide();jQuery('.filter-no-restaurants').addClass('hidden');jQuery('.search-loader').show();jQuery('.search-bar').addClass('active');jQuery('.types-bar a').removeClass('selected');});com.upmenu.RestApi.Restaurant.searchByPhrase(com.upmenu.siteId,restaurantIds,phrase,com.upmenu.language).done(function(restaurants){if(restaurants.length==0){jQuery('.filter-no-restaurants').removeClass('hidden');}else{jQuery('.filter-no-restaurants').addClass('hidden');}
jQuery('.search-loader').hide();restaurants.each(function(item){jQuery('#_restaurant-'+item).show();});jQuery('#search-by-phrase').removeClass('searching');}).fail(function(){jQuery('#search-by-phrase').removeClass('searching');});});jQuery(document).on("click","._clear-form-address",function(e){e.preventDefault();e.stopPropagation();com.upmenu.Cookies.saveCustomerData({city:'',street:'',streetNumber:'',latitude:'',longitude:'',postalCode:'',region:'',customAddressField1:'',customAddressField2:'',customAddressField3:''});com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){if(jQuery('.check-form-group').length>0){jQuery('.check-form-group').slideUp(100);}
com.upmenu.prototype._renderDeliveryCheckForm(restaurants);});return false;});jQuery(document).on('click','body',function(){if(jQuery('.check-form-group').length>0){jQuery('.check-form-group').slideUp(100);}});jQuery(document).on('click','.check-form-group',function(e){e.stopPropagation();});jQuery(document).on("click","._start-check-delivery",function(){var api=new com.upmenu();api.showDeliveryCheckFormModal();return false;});jQuery(document).on("click","#_check-delivery",function(){var api=new com.upmenu();api.checkDelivery();return false;});jQuery(document).on('keyup',function(e){var api=new com.upmenu();if(e.keyCode===13&&jQuery('.check-form-group').is(':visible')){e.preventDefault();e.stopPropagation();api.checkDelivery();}});jQuery(document).on("mouseenter","#delivery-check-form ._restaurant",function(){var api=new com.upmenu();api._checkDeliveryRestaurantEnter(this);return false;});jQuery(document).on("mouseleave","#delivery-check-form ._restaurant",function(){var api=new com.upmenu();api._checkDeliveryRestaurantLeave();return false;});jQuery(document).on("click","._restaurant-info",function(){var restaurantCall=com.upmenu.RestApi.Restaurant.get(com.upmenu.restaurantId,com.upmenu.language);var deliveryCall=com.upmenu.RestApi.Restaurant.getDeliveryAreas(com.upmenu.language,com.upmenu.restaurantId);$.when(restaurantCall,deliveryCall).done(function(restaurantResponse,deliveryResponse){com.upmenu.restaurant=restaurantResponse[0];com.upmenu.Templates.restaurantInfo(deliveryResponse[0]);var api=new com.upmenu();api.drawDeliveryAreasOnMap('_restaurant-info-map');jQuery('#_restaurant-info-modal').modal();}).fail(function(data){com.upmenu.Templates.restaurantInfo([]);var api=new com.upmenu();api.drawDeliveryAreasOnMap('_restaurant-info-map');jQuery('#_restaurant-info-modal').modal();});return false;});jQuery(document).on('click','.delivery-type-form',function(e){e.preventDefault();jQuery('.delivery-type-form').each(function(){jQuery(this).removeClass('active');});jQuery(this).addClass('active');var api=new com.upmenu();api.checkDelivery();return false;});jQuery(document).on('click','.types-bar .show-more',function(e){e.preventDefault();jQuery('.types-bar').addClass('active');});jQuery(document).on('click','.types-bar .show-less',function(e){e.preventDefault();jQuery('.types-bar').removeClass('active');});jQuery(document).on('click','.types-bar a:not(.show-more):not(.show-less):not(.show-more-btn):not(.show-less-btn)',function(e){e.preventDefault();jQuery('.types-bar a').removeClass('selected');jQuery(this).addClass('selected');var selected=jQuery(this).text();jQuery('.rest-box-wrapper').each(function(){var type1=jQuery(this).attr('type1');var type2=jQuery(this).attr('type2');var type3=jQuery(this).attr('type3');if(selected==type1||selected==type2||selected==type3){jQuery(this).parent().parent().show();}else{jQuery(this).parent().parent().hide();}});jQuery('.filter-no-restaurants').addClass('hidden');jQuery('.search-bar').removeClass('active');jQuery('#search-by-phrase').val('');});jQuery(document).on('click','.types-bar a.all',function(e){e.preventDefault();jQuery('.types-bar a').removeClass('selected');jQuery(this).addClass('selected');jQuery('.rest-box-wrapper').each(function(){jQuery(this).parent().parent().show();});});jQuery(function(){api._initFields();api._initDeliveryCheckFormMap();if(location.protocol!=='https:'){jQuery('._get-gps-location').hide();}
var fields=api._getDeliveryFormFields();if(fields.street.val()!=undefined&&fields.streetNumber.val()!=undefined&&fields.city.val()!=undefined&&fields.region.val()!=undefined&&fields.latitude.val()!=undefined&&fields.longitude.val()!=undefined&&fields.streetNumber.val()!=undefined){if(!fields.street.val().isBlank()&&!fields.streetNumber.val().isBlank()&&!fields.city.val().isBlank()&&!fields.region.val().isBlank()&&!fields.latitude.val().isBlank()&&!fields.longitude.val().isBlank()&&!fields.streetNumber.val().isBlank()){api.checkDelivery();}}
$(window).load(function(){api._invalidateMapSize();});$(window).resize(function(){api._invalidateMapSize();});});jQuery(document).on('click','.show-more-btn',function(e){e.preventDefault();$('.more-item').removeClass('more-item');$('.show-more-btn').hide();$('.show-less-btn').removeClass('more');});jQuery(document).on('click','.show-less-btn',function(e){e.preventDefault();let $menuItems=$('.btn-upmenu').not('.show-more-btn, .show-less-btn');$menuItems.slice(8).addClass('more-item');$('.show-more-btn').show();$('.show-less-btn').addClass('more');});$(function(){if($deliveryForm.length){com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){com.upmenu.prototype._renderDeliveryCheckForm(restaurants);com.upmenu.restaurantsToSearch=restaurants;});}});

com.upmenu.prototype.sendEmail=function(serialized,callback){grecaptcha.ready(function(){grecaptcha.execute('6LfGsr4ZAAAAAFdBCFSb7inVYblljd4vpLtRdNu3',{action:'submit'}).then(function(token){jQuery.ajax({url:'/api/v1/sendEmail/'+com.upmenu.siteId+'/'+com.upmenu.siteLanguageId
+'?'+serialized+'&restaurantId='+com.upmenu.restaurantId+'&page_url='+document.URL,data:JSON.stringify({captchaToken:token}),contentType:'application/json',type:'POST',}).done(callback);});});};

var com=com||{};com.upmenu=com.upmenu||function(){};com.upmenu.CampaignTracker={};com.upmenu.CampaignTracker.COOKIE_LIFETIME_DAYS=60;com.upmenu.CampaignTracker.PARAM_NAME='umcid';com.upmenu.CampaignTracker.MAX_COOKIES_COUNT=30;com.upmenu.CampaignTracker.track=function(){var api=new com.upmenu();var cid=api._getParameterByName(com.upmenu.CampaignTracker.PARAM_NAME);if(cid==''){return;}
for(var i=0;i<com.upmenu.CampaignTracker.MAX_COOKIES_COUNT;i++){var cookie=com.upmenu.Cookies.getCampaignTracker(i);if(cookie!==null){if(cookie==cid){com.upmenu.Cookies.saveCampaignTracker(i,null,null)}}}
for(var i=0;i<com.upmenu.CampaignTracker.MAX_COOKIES_COUNT;i++){var cookie=com.upmenu.Cookies.getCampaignTracker(i);if(cookie===null||cookie===''){com.upmenu.Cookies.saveCampaignTracker(i,cid,com.upmenu.CampaignTracker.COOKIE_LIFETIME_DAYS);return;}}};com.upmenu.CampaignTracker.combine=function(){var ids=[];for(var i=0;i<com.upmenu.CampaignTracker.MAX_COOKIES_COUNT;i++){var cookie=com.upmenu.Cookies.getCampaignTracker(i);if(cookie!==null){ids.push(cookie);}}
var idsString=ids.join(',');com.upmenu.Cookies.saveCampaignTrackerids(idsString);return idsString;};$(function(){com.upmenu.CampaignTracker.track();com.upmenu.CampaignTracker.combine();});

com.upmenu.prototype._initFacebookWidget=function(){if(jQuery('.facebook-widget .fb-page').length==0)return;jQuery('.facebook-widget, .facebook-slide').show();$("#_facebook-slide").css("left","-300px");$("#_facebook-slide").hover(function(){$("#_facebook-slide").stop().animate({left:"0px"},400);$(this).addClass("_facebook-close");},function(){$("#_facebook-slide").stop().animate({left:"-300px"},400);$(this).removeClass("_facebook-close");});}
$(function(){var api=new com.upmenu();api._initFacebookWidget();});

var contactMaps=[];jQuery(document).ready(function(){jQuery(document).on('click','._contact-form-submit',function(){if(jQuery("#_contact-form").validate({rules:{contact:"required",title:"required",message:"required",email:{required:true,email:true},_restaurantId:{required:true}},messages:{contact:I18n.t('js_contact_name_required'),title:I18n.t('js_contact_title_required'),message:I18n.t('js_contact_message_required'),email:I18n.t('js_contact_email_required'),},highlight:function(element){$(element).closest('.form-group').removeClass('has-success').addClass('has-error');},success:function(element){element.closest('.form-group').removeClass('has-error').addClass('has-success');}}).form()){var api=new com.upmenu();var serialized=jQuery('#_contact-form').serialize();if(isEmpty(com.upmenu.restaurantId)){com.upmenu.restaurantId=jQuery('select[name="_restaurantId"]').val();if(isEmpty(com.upmenu.restaurantId)){com.upmenu.restaurantId=jQuery('input[name="_restaurantId"]').val();}}
ga('send','event','Contact page','Contact send');trackEventsDataLayer('_ContactForm','contact-form-category','Message send','Contact');com.upmenu.Facebook.sendContactEvent();api.sendEmail(serialized,function(){jQuery('#_contact-form').html("<p class='alert alert-success'>"+I18n.t('js_contact_send')+"</p>");});}
return false;});});var isEmpty=function(name){return typeof name==='undefined'||name===null||name===""}
com.upmenu.prototype.drawDeliveryAreasOnMap=function(mapId,markerIconUrl){if(jQuery('#'+mapId).length==0){return;}
com.upmenu.RestApi.Restaurant.getDeliveryAreas(com.upmenu.language,com.upmenu.restaurantId).done(function(data){drawDeliveryAreas(data);}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});function makePolygon(map,editableLayers,active,deliveryArea){var polygonPointsArray=createPolygonPointsArrayFromString(deliveryArea.points);var polygon;var shapeType=deliveryArea.deliveryShape;if(shapeType==='CIRCLE'){polygon=L.circle(polygonPointsArray[0],{radius:deliveryArea.radius});}else{polygon=L.polygon(polygonPointsArray);}
var backgroundColor=deliveryArea.backgroundColor;if(active!=null&&active==true){polygon.setStyle({fillColor:backgroundColor,color:backgroundColor,fillOpacity:"0.35"});}else{polygon.setStyle({fillColor:"#FF000000",color:"#FF000000",fillOpacity:"1"});}
return polygon;}
function createPolygonPointsArrayFromString(polygonPointsString){if(polygonPointsString.substr(polygonPointsString.length-1)==';'){polygonPointsString=polygonPointsString.slice(0,-1);}
var resultLatLngArray=[];var latLngStrings=polygonPointsString.split(';');for(var i=0;i<latLngStrings.length;i++){var latLngArray=latLngStrings[i].split(',');var lat=parseFloat(latLngArray[0]);var lng=parseFloat(latLngArray[1]);resultLatLngArray.push([lat,lng]);}
return resultLatLngArray;}
function makeMarker(map,lat,lng,title,markerIconUrl){var icon=leafletMapIcon;if(markerIconUrl!=undefined){icon=L.icon({iconUrl:markerIconUrl});}
var marker=L.marker([lat,lng],{icon:icon,title:title});marker.addTo(map);return marker;}
function drawDeliveryAreas(deliveryAreas){var deliveryMap;if(deliveryAreas==undefined||deliveryAreas.length==0)
return;deliveryMap=L.map(document.getElementById(mapId),{center:[51.505,-0.09],zoom:14});L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:18}).addTo(deliveryMap);editableLayers=new L.FeatureGroup();deliveryMap.addLayer(editableLayers);deliveryMap.on('draw:created',function(e){editableLayers.addLayer(e.layer);});var polygons=[];var polygonBounds=[];var center=[];for(var i=0;i<deliveryAreas.length;i++){var deliveryArea=deliveryAreas[i];for(var j=0;j<deliveryArea.areas.length;j++){var area=deliveryArea.areas[j];center=area.points;var show=deliveryArea.active;var polygon=makePolygon(deliveryMap,editableLayers,show,area);buildPopup(polygon,deliveryArea,area);polygonBounds.push(polygon._bounds);polygons.push({polygon:polygon,active:show});}}
for(var i=polygons.length-1;i>=0;i--){var poly=polygons[i];if(poly.active!=null&&poly.active==true){polygons[i].polygon.addTo(deliveryMap);}}
setTimeout(function(){if(polygonBounds.length>0){deliveryMap.invalidateSize();if(polygonBounds!==undefined){for(var i=polygonBounds.length-1;i>=0;i--){if(polygonBounds[i]===undefined){polygonBounds.splice(i,1);}}
if(polygonBounds.length>0){deliveryMap.fitBounds(polygonBounds);}
else{var lat=createPolygonPointsArrayFromString(center)[0][0];var lon=createPolygonPointsArrayFromString(center)[0][1];deliveryMap.fitBounds(L.latLngBounds(L.latLng(com.upmenu.restaurant.latitude,com.upmenu.restaurant.longitude),L.latLng(lat,lon)));}}}},250);makeMarker(deliveryMap,com.upmenu.restaurant.latitude,com.upmenu.restaurant.longitude,com.upmenu.restaurant.name,markerIconUrl);}
function buildPopup(polygon,deliveryArea,area){var popupHtml=com.upmenu.Templates.restaurantInfoDeliveryAreaPopup({name:area.name,minOrderPrice:deliveryArea.minOrderPrice,price:deliveryArea.price,currency:com.upmenu.site.currency,freeDeliveryAbove:deliveryArea.freeDeliveryAbove});if(deliveryArea.active!=null){polygon.on('mouseover',function(e){jQuery('#delivery-area-info-div').addClass('_active');jQuery('.delivery-area-info').html(popupHtml);this.openPopup();});polygon.on('mouseout',function(e){jQuery('#delivery-area-info-div').removeClass("_active");this.closePopup();});}}};com.upmenu.prototype.drawContactMap=function(mapDiv,customOptions,customIcon){var $map=jQuery(mapDiv);if($map.length==0){return;}
var latitude=$map.attr('data-latitude');var longitude=$map.attr('data-longitude');var windowContent=$map.attr('data-window-content');if(latitude==''||longitude==''){return;}
var latLng=L.latLng(latitude,longitude);var options={center:[latitude,longitude],zoom:15,scrollWheelZoom:false};if(customOptions!=undefined){$.extend(options,customOptions);}
var map=L.map($map.get(0),options);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',maxZoom:18}).addTo(map);var marker=L.marker([latitude,longitude],{icon:leafletMapIcon});marker.addTo(map);marker.bindPopup(windowContent);return map;};jQuery(document).ready(function(){var api=new com.upmenu();api.drawDeliveryAreasOnMap('mapWithDeliveryAreas');var maps=document.querySelectorAll('.theme-contact-map-canvas');[].forEach.call(maps,function(singleMap){var contactMap=api.drawContactMap(singleMap);contactMaps.push(contactMap);});});var leafletMapIcon=L.icon({iconUrl:com.upmenu.staticPath+'/images/icons/map-pin.png',iconSize:[21,34],iconAnchor:[10.5,34]});jQuery(document).on('change','._init-restaurant-map',function(e){e.preventDefault();var api=new com.upmenu();var $this=jQuery(this);var $selected=$this.find(':selected');var id=$selected.val();var longitude=$selected.data('longitude');var latitude=$selected.data('latitude');var name=$selected.data('name');var street=$selected.data('street');var city=$selected.data('city');var html='<div class="theme-contact-map-canvas" data-latitude="'+latitude+'" data-longitude="'+longitude+'" data-window-content="<strong>'+name+'</strong><br>'+street+', '+city+'"></div>';jQuery('.contact-map-container').html(html);var maps=document.querySelectorAll('.theme-contact-map-canvas');[].forEach.call(maps,function(singleMap){var contactMap=api.drawContactMap(singleMap);contactMaps.push(contactMap);});jQuery('input[name="_restaurantId"]').val(id);jQuery('.restaurant-info').hide();jQuery('.restaurant-info#'+id).show();jQuery('.contact-info').show();});

com.upmenu.prototype.showOnPageEnterRecommendations=function(){var toHash='';var cookieValue=com.upmenu.Cookies.getRecommendationOnPageEnter();if(jQuery('.recommendOnPageEnter').length==0){return;}
var products=[];let $pageEnterRecommendationModal=jQuery('#_product-on-page-enter-recommendation-modal');jQuery('#_product-on-page-enter-recommendation-modal-body').html('');jQuery('.recommendOnPageEnter').each(function(){var id=jQuery(this).attr('data-id');if($.inArray(id,products)>-1){return;}
products.push(id);if(isMobile()&&com.upmenu.cmsv4&&com.upmenu.theme_JSON.globalStyles.menu.columnsMobile==='1'){var cols=jQuery('<div class="col-sm-12 theme-product-box-small"></div>');}else{var cols=jQuery('<div class="col-sm-6 theme-product-box-col"></div>');}
if(jQuery('.recommendOnPageEnter').length==1){cols='<div class="col-sm-12"></div>';}
var col=jQuery(cols);var el=jQuery(this).clone();el=el.removeClass("hidden");el=el.css('height','');el.removeClass(function(index,css){return(css.match(/(^|\s)col-\S+/g)||[]).join(' ');});col=col.append(el);jQuery('#_product-on-page-enter-recommendation-modal-body').append(col);toHash+=jQuery(this).attr('data-id');});if($pageEnterRecommendationModal.find('.modal-with-carousel > div').length>1&&com.upmenu.deviceType==='MOBILE'){$pageEnterRecommendationModal.find('.modal-with-carousel').addClass('owl-carousel').owlCarousel({items:1,margin:0,stagePadding:45,autoHeight:true,loop:true,dots:false,autoplay:true,autoplayHoverPause:true,nav:false});}else{$pageEnterRecommendationModal.find('.modal-with-carousel').addClass('row-flex flex-wrap').removeClass('modal-with-carousel');}
jQuery('#_product-on-page-enter-recommendation-modal-body .recommendOnPageEnter').removeClass('col-md-4');jQuery('#_product-on-page-enter-recommendation-modal-body').find('._add-to-cart').attr('data-recommendation-type','ON_PAGE_ENTER');var hash=api._hashCode(toHash);if(hash==cookieValue){return;}
com.upmenu.Cookies.saveRecommendationOnPageEnter(hash);$pageEnterRecommendationModal.modal();jQuery(".lazy-image:not(.load-spinner)").Lazy();jQuery(".lazy-image.load-spinner").Lazy({afterLoad:function(element){element.find('img').remove();jQuery(".theme-gallery").matchHeight();}});};

com.upmenu.prototype.showCouponCodeForm=function(){var api=new com.upmenu();com.upmenu.Templates.couponForm({});$('#_cms-modal-narrow').modal();return false;}
com.upmenu.prototype.addCouponToCart=function(couponCode){var cartId=com.upmenu.Cookies.getCartId();var api=new com.upmenu();if(!couponCode){couponCode=jQuery('#_coupon-code-form input[name=code]').val();}
com.upmenu.RestApi.CartCoupons.add(com.upmenu.siteId,com.upmenu.language,com.upmenu.restaurantId,cartId,couponCode).done(function(data){com.upmenu.Cookies.saveCartId(data.cartId);api.refreshCart();$('#_cms-modal-narrow').modal('hide');}).fail(function(data){noty({text:I18n.t('CouponNotExist')});com.upmenu.Templates.couponForm(data.responseJSON);});return false;}
com.upmenu.prototype.removeCouponFromCart=function(code){var cartId=com.upmenu.Cookies.getCartId();var api=new com.upmenu();com.upmenu.RestApi.CartCoupons.remove(cartId,code).done(function(data){api.refreshCart();}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});return false;}
jQuery(document).on('click','._remove-coupon-from-cart',function(){var api=new com.upmenu();api.removeCouponFromCart(jQuery(this).attr('data-coupon-code'));return false;});jQuery(document).on('click','._show-coupon-code-form',function(){var api=new com.upmenu();api.showCouponCodeForm();return false;});jQuery(document).on('click','#_coupon-code-submit',function(){var api=new com.upmenu();api.addCouponToCart();return false;});jQuery(document).on('submit','#_coupon-code-form',function(){var api=new com.upmenu();api.addCouponToCart();return false;});(function(){const couponCode=api._getParameterByName('code');if(couponCode){api.addCouponToCart(couponCode);let url=new URL(getUrl);url.searchParams.delete('code');window.history.replaceState({},window.title,url);}})();

com.upmenu.prototype.subscribeToMailchimp=function(listId,email,firstName,lastName,restaurantName,okCallback,errorCallback){jQuery.ajax({type:'POST',url:'/api/mailchimp/v1/subscribe',data:{siteId:com.upmenu.siteId,listId:listId,email:email,firstName:firstName,lastName:lastName,restaurantName:restaurantName},success:function(data){okCallback(data);},error:function(data){errorCallback(data);}});return false;};

com.upmenu.prototype.subscribeToSare=function(firstName,lastName,email,phone,groupId,sInterface,okCallback,errorCallback){jQuery.ajax({type:'POST',url:'/api/sare/v1/subscribe',data:{siteId:com.upmenu.siteId,email:email,firstName:firstName,lastName:lastName,phone:phone,groupId:groupId,noSend:0,rv:1,sInterface:sInterface},success:function(data){okCallback(data);},error:function(data){errorCallback(data);}});return false;};

jQuery(document).on("change","._prices-select select",function(){var $selectWrapper=jQuery(this).parent();var $select=$selectWrapper.find('select');var $price=$selectWrapper.find('._prices-select-price');var $addToCart=$selectWrapper.find('._add-to-cart');var text=$select.find(":selected").attr('data-price');var id=$select.find(":selected").val();$price.text(text);$addToCart.attr('id',id);});jQuery(document).ready(function(){jQuery('._prices-select').each(function(){var $selectWrapper=jQuery(this);var $select=$selectWrapper.find('select');var $price=jQuery(this).find('._prices-select-price');var $addToCart=jQuery(this).find('._add-to-cart');var text=$select.find(":selected").attr('data-price');var id=$select.find(":selected").val();$price.text(text);$addToCart.attr('id',id);var length=$select.children('option').length;if(length>1)$select.show();});});

com.upmenu.BookingForm={};com.upmenu.BookingForm.model={};com.upmenu.prototype._loadReservationForm=function(restaurantId){let url='/restapi/booking/form/'+com.upmenu.siteId;let params=[];if(restaurantId){params.push('restaurantId='+restaurantId);}
if(com.upmenu.customerId){params.push('customerId='+com.upmenu.customerId);}
if(params.length>0){url+='?'+params.join('&');}
jQuery.ajax({url:url,headers:{language:com.upmenu.language},type:'GET',dataType:"json",contentType:'application/json',success:function(data){com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){com.upmenu.BookingForm.model=data;var showForm=false;restaurants.forEach(function(restaurant){if(restaurant.onlineBookingEnabled){showForm=true;}});var template=com.upmenu.Templates.reservation(data,restaurants,showForm);jQuery('#_cms-reservation-wrapper').html(template);if(jQuery('#_cms-reservation-wrapper').length<1){jQuery('._booking-form-wrapper').html(template);}
setupPhoneInput("phone");com.upmenu.pikaday.initReservationCalendar('#_reservation-delivery-date');api._toggleFormDetails($('._booking-form'));api._initReservationDeliveryDate($('._booking-form'));}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});}});}
com.upmenu.prototype.showReservationForm=function(){var api=new com.upmenu();api._loadReservationForm(com.upmenu.restaurantId);return false;}
com.upmenu.prototype._reservationBuildHours=function($form){var date=$form.find('#reservation-date-hidden').val();var unavailability=com.upmenu.i18n.unavailability;if(date=='')return;var selectedHour=$form.find('._reservation-delivery-time option:selected').val();$form.find('._reservation-delivery-time').html('');for(i in com.upmenu.BookingForm.model.settings.onSiteHours){var day=com.upmenu.BookingForm.model.settings.onSiteHours[i];if(date!==day.day)continue;for(h in day.orderHours){var time=day.orderHours[h];var hour=time.hour;var isAvailable=time.available;if(selectedHour==hour){$form.find('._reservation-delivery-time').append('<option value="'+hour+'" selected="selected">'+api.formatTime(hour)+'</option>');}else{if(isAvailable){$form.find('._reservation-delivery-time').append('<option value="'+hour+'">'+api.formatTime(hour)+'</option>');}else{$form.find('._reservation-delivery-time').append('<option value="'+hour+'" disabled>'+api.formatTime(hour)+' ('+unavailability+')</option>');}}}}}
com.upmenu.prototype._initReservationDeliveryDate=function($form){var deliveryDateInputHidden=$form.find('#reservation-date-hidden').val()
if(deliveryDateInputHidden){var date=moment(deliveryDateInputHidden,'DD-MM-YYYY').toDate();date=moment(date).format(com.upmenu.dateFormat.toUpperCase());$('#_reservation-delivery-date').val(date);com.upmenu.picker.setDate(date);}
api._reservationBuildHours($form);}
com.upmenu.pikaday.initReservationCalendar=function(selector){jQuery('.pika-single').remove();moment.lang(com.upmenu.language);com.upmenu.picker=new Pikaday({field:$(selector)[0],trigger:$(selector)[0],format:com.upmenu.dateFormat.toUpperCase(),firstDay:1,keyboardInput:false,disableDayFn:function(date){return com.upmenu.pikaday.verifyReservationDays(date);},onSelect:function(){date=moment(moment(com.upmenu.picker.toString(),com.upmenu.dateFormat.toUpperCase()).toDate()).format('DD-MM-YYYY');$form=$('._booking-form');$form.find('#reservation-date-hidden').val(date)
var api=new com.upmenu();api._reservationBuildHours($form);},i18n:com.upmenu.pikaday.translations})}
com.upmenu.pikaday.verifyReservationDays=function(date){var dateFromCalendar=moment(date).format('DD-MM-YYYY')
for(var i in com.upmenu.BookingForm.model.settings.onSiteHours){var day=com.upmenu.BookingForm.model.settings.onSiteHours[i];if(dateFromCalendar===day.day){return false;}}
return true;}
com.upmenu.prototype._toggleFormDetails=function($form){var date=$form.find('input[id=toDate]').val();var time=$form.find('select[id=people] option:selected').val();if(date!=''&&time!=''){$form.find("._reservation-form-details").show();fakeResize();}else{$form.find("._reservation-form-details").hide();fakeResize();}}
com.upmenu.prototype.makeReservation=function($form){var api=new com.upmenu();var data={restaurantId:$("#restaurantId").val(),people:$("#people").val(),firstName:$("#firstName").val(),lastName:$("#lastName").val(),email:$("#email").val(),phone:$("#phone").val(),phoneCountryCode:$("#phoneCountryCode").val(),comment:$("#comment").val(),toDate:$("#reservation-date-hidden").val(),toTime:$("#toTime").val(),newsletter:$("#newsletter").val(),newsletterSms:$("#newsletterSms").val(),customerId:$("#customerId").val(),source:com.upmenu.orderSource,deviceType:com.upmenu.deviceType,termsOfService:$("#termsOfService").is(':checked'),disabledText:$("#disabledText").val(),color:$("#color").val(),colorVariant:$("#colorVariant").val()}
jQuery.ajax({url:'/restapi/booking/'+com.upmenu.siteId,data:JSON.stringify(data),contentType:"application/json",dataType:"json",type:'POST',success:function(data){$form.html('<div class="alert alert-success" role="alert">'+I18n.t('js_reservation_created')+'</div>');window.location.href=api._updateParameterByName(window.location.toString(),'orderId',data.bookingId);},error:function(data){com.upmenu.BookingForm.model=data.responseJSON;com.upmenu.RestApi.Restaurant.getAll(com.upmenu.siteId,com.upmenu.language).done(function(restaurants){var template=com.upmenu.Templates.reservation(data.responseJSON,restaurants,true);jQuery('#_cms-reservation-wrapper').html(template);if(jQuery('#_cms-reservation-wrapper').length<1){jQuery('._booking-form-wrapper').html(template);}
setupPhoneInput("phone");api._toggleFormDetails($('._booking-form'));api._initReservationDeliveryDate($('._booking-form'));api._reservationBuildHours($('._booking-form'));ga('send','event','Booking','Booked table');trackEventsDataLayer('_BookedTable','booked-table-category','Table was booked','Booking');}).fail(function(data){noty({text:I18n.t('cms_ajax_error')});});}}).fail(function(error){setupPhoneInput("phone");api._toggleFormDetails($('._booking-form'));api._initReservationDeliveryDate($('._booking-form'));api._reservationBuildHours($('._booking-form'));});return false;}
com.upmenu.init=true;jQuery(function(){var api=new com.upmenu();if(jQuery('#_cms-reservation-wrapper').length>0){api.showReservationForm();}});var fakeResize=function(){var resizeEvent=window.document.createEvent('UIEvents');resizeEvent.initUIEvent('resize',true,false,window,0);window.dispatchEvent(resizeEvent);}
jQuery(document).on('change','._booking-form select[id=people]',function(){var $form=$(this).closest('._booking-form');var api=new com.upmenu();api._toggleFormDetails($form);return false;});jQuery(document).on('change','._booking-form select[id=restaurantId]',function(){var api=new com.upmenu();api._loadReservationForm(jQuery('._booking-form select option:selected').val());return false;});jQuery(document).on('click','._booking-form-submit',function(){var $form=$(this).closest('._booking-form');var api=new com.upmenu();api.makeReservation($form);return false;});jQuery(document).on('click','._show-booking-modal',function(){ga('send','event','Booking','Show booking modal');trackEventsDataLayer('_ShowBookingModal','show-booking-modal-category','Show booking modal','Booking');var api=new com.upmenu();var restaurantId=jQuery(this).attr('data-restaurant-id');api._loadReservationForm(restaurantId);jQuery('#_restaurant-info-modal').modal('hide');jQuery('#_booking-modal').modal('show');});jQuery('body').on('click','#_show-terms-of-service-reservation',function(){jQuery('#_terms-of-service-modal-body').html(com.upmenu.BookingForm.model.settings.termsOfServiceContent);jQuery('#_terms-of-service-modal').modal('show');return false;});jQuery(document).on('click','._show-booking-comment',function(){jQuery(this).closest('.form-group').toggleClass('opened');fakeResize();})
const $comment=document.getElementById('comment');if($comment){const resizeObserver=new ResizeObserver(fakeResize).observe($comment,{attributes:true,attributeFilter:["style"]});};

com.upmenu.prototype._showModals=function(type){var param=api._getParameterByName('popup');if(param!=''){if(jQuery('[data-permalink='+param+']').length>0){jQuery('#_theme-modals .item[data-permalink!='+param+']').remove();jQuery('#_theme-modals [data-permalink='+param+']').addClass('active');com.upmenu.Cookies.saveThemeModals('',null)}}else{jQuery('#_theme-modals .item[data-onlypopup=true]').remove();jQuery('#_theme-modals .item').removeClass('active');jQuery('#_theme-popups .item').removeClass('active');jQuery('#_theme-modals .item:first').addClass('active');jQuery('#_theme-popups .item:first').addClass('active');}
if(type==='onClick'){if(jQuery('#_theme-modals .item').length!==0){var cookieValue=com.upmenu.Cookies.getThemeModals();if('true'==cookieValue){jQuery('#popup-modal-topbar').hide();}
else{jQuery('#popup-modal-topbar').slideDown(150);}}}
if(type==='onVisit'){if(jQuery('#_theme-popups .item').length!==0){var cookieValue=com.upmenu.Cookies.getThemePopups();if('true'!==cookieValue){api._openPopupModal(type);}}}};com.upmenu.prototype._openPopupModal=function(type){if(type==='onClick'){var midnight=new Date();midnight.setHours(23,59,59,0);com.upmenu.Cookies.saveThemeModals('true',midnight);jQuery('#_theme-modals').modal('show');}
else if(type==='onVisit'){var midnight=new Date();midnight.setHours(23,59,59,0);com.upmenu.Cookies.saveThemePopups('true',midnight);jQuery('#_theme-popups').modal('show');}};jQuery(document).on('click','._show-popup-modal',function(e){e.preventDefault();jQuery('#popup-modal-topbar').hide();api._openPopupModal('onClick');});jQuery(document).on('click','._hide-topbar',function(e){e.preventDefault();jQuery('#popup-modal-topbar').hide();});jQuery(function(){jQuery(document).ready(function(){jQuery('#popup-modal-topbar').prependTo('body');if(jQuery('#_theme-modals').data('onclick')){setTimeout(function(){api._showModals('onClick');},2000);}
if(jQuery('#_theme-popups').data('onvisit')){setTimeout(function(){api._showModals('onVisit');},2000);}});});

com.upmenu.prototype.fixCookieBugIfRequired=function(){store.set('test','1234567890');var testCookie=store.get('test');if(testCookie!=='1234567890'){var api=new com.upmenu();if(api.inIframe()){jQuery(document).trigger({type:"upmenu:reloadParent",url:window.location.href});}else{$('#_cookie-iniframe-bugfix-modal').modal({backdrop:'static'});}}
store.set('test',null);return false;};com.upmenu.prototype.inIframe=function(){try{return window.self!==window.top;}catch(e){elasticApm.captureError(e);return true;}};

com.upmenu.iframeParentHeight;var UpMenuIframe=(function(){function isMobileSmall(){return window.matchMedia('(max-width: 480px)').matches}
function isMobile(){return window.matchMedia('(max-width: 767px)').matches}
function isTablet(){return window.matchMedia('(min-width:768px) and (max-width: 991px)').matches}
function isInIframe(){try{return window.self!==window.top;}catch(e){elasticApm.captureError(e);return true;}}
function getDocumentHeight(){var h=document.body.offsetHeight;return h}
function sendMessageToParent(type,data){var message={};data=data||{};switch(type){case'FIT_IFRAME_TO_WINDOW':if(typeof data.scroll_to_top!='boolean'){data.scroll_to_top=false;}
message={type:'FIT_IFRAME_TO_WINDOW',document_height:getDocumentHeight(),scroll_to_top:data.scroll_to_top};break;case'SCROLL_PARENT_TO_IFRAME_TOP':message={type:'SCROLL_PARENT_TO_IFRAME_TOP'};break;case'RELOAD_PARENT':message={type:'RELOAD_PARENT',url:data.url};break;case'SCROLL_PARENT_TO_IFRAME_OFFSET':message={type:'SCROLL_PARENT_TO_IFRAME_OFFSET',offset:data.offset};break;}
window.parent.postMessage(message,"*");}
function sendMessageToParent_fitIframe(scrollTop){sendMessageToParent('FIT_IFRAME_TO_WINDOW',{scroll_to_top:scrollTop});}
function sendMessageToParent_scrollParentToIframeTop(){sendMessageToParent('SCROLL_PARENT_TO_IFRAME_TOP');}
function sendMessageToParent_scrollParentToIframeOffset(offset){sendMessageToParent('SCROLL_PARENT_TO_IFRAME_OFFSET',{offset:offset});}
function sendMessageToParent_reloadParent(url){sendMessageToParent('RELOAD_PARENT',{url:url});}
function getFixedOffsetTop(data){var iframeFixedOffsetTop=data.iframeFixedOffsetTop;var iframeFixedTabletOffsetTop=data.iframeFixedTabletOffsetTop;var iframeFixedMobileOffsetTop=data.iframeFixedMobileOffsetTop;var fixedOffsetTop=iframeFixedOffsetTop;if(isTablet()&&iframeFixedTabletOffsetTop){fixedOffsetTop=iframeFixedTabletOffsetTop;}
if(isMobile()&&iframeFixedMobileOffsetTop){fixedOffsetTop=iframeFixedMobileOffsetTop;}
if(!fixedOffsetTop||isNaN(fixedOffsetTop))fixedOffsetTop="0";return parseInt(fixedOffsetTop);}
function getFixedOffsetBottom(data){var fixedOffsetBottom=data.iframeFixedOffsetBottom;if(!fixedOffsetBottom)fixedOffsetBottom="0";return parseInt(fixedOffsetBottom);}
function isFacebookApp(){var ua=navigator.userAgent||navigator.vendor||window.opera;return(ua.indexOf("FBAN")>-1)||(ua.indexOf("FBAV")>-1);}
var parentData=null;var $cartWrapper=jQuery('._cart-wrapper');var $categoriesWrapper=jQuery('._categories-wrapper');if(isMobile()){var mobileFooterHeight=$("._cart-wrapper").outerHeight();document.documentElement.style.setProperty('--modalFooterHeight',`${mobileFooterHeight}px`);}
function onMessageFromParent(e){var $cart=jQuery('._shopping-cart-container').not('.modal ._shopping-cart-container').parent();$cartWrapper=jQuery('._cart-wrapper');$categoriesWrapper=jQuery('._categories-wrapper');var $modal=jQuery('.modal');var $top_notification=jQuery('ul#noty_topCenter_layout_container');var $categoriesParent=$('._categories-wrapper').parent();var $cartParent=$('._cart-wrapper').parent();var $categories=jQuery('._categories-wrapper');var $buyingFlowModal=$('#_buying-flow-modal');switch(e.data.type){case'PARENT_SCROLL':parentData=e.data;com.upmenu.iframeParentHeight=parentData.iframeParentHeight;var mobile=isMobile();var modalHeight=parentData.iframeParentHeight-getFixedOffsetTop(parentData);var modalMargin=$(".modal-dialog").outerHeight(true);var modalHeight2=modalHeight-modalMargin;if(isFacebookApp()){modalHeight=modalHeight-modalMargin;}
$('#_cms-modal .modal-body').css({'max-height':modalHeight2+'px'});$categories.find('li').removeClass('active');if($cartWrapper.length>0){var cartTopOffset=$cartWrapper.offset().top;}
if($categoriesWrapper.length>0){var categoriesTopOffset=$categoriesWrapper.offset().top;}
if(parentData.iframeOffsetTop<0){if(!mobile){var resizeCart=function(){var width=$cartParent.width();$('._cart-wrapper').css('width',width);};resizeCart();$(window).resize(resizeCart);$cartWrapper.removeClass('affix-top');$cartWrapper.addClass('_fixed');$cartWrapper.css({top:parseInt(-parentData.iframeOffsetTop)+getFixedOffsetTop(parentData)});var resizeCategories=function(){var width=$categoriesParent.width();$('._categories-wrapper').css('width',width);};resizeCategories();$(window).resize(resizeCategories);$categoriesWrapper.removeClass('affix-top');$categoriesWrapper.addClass('_fixed');$categoriesWrapper.css({top:-parentData.iframeOffsetTop+getFixedOffsetTop(parentData)});}
$.noty.layouts.topCenter={name:'topCenter',container:{object:'<ul id="noty_topCenter_layout_container" />',selector:'ul#noty_topCenter_layout_container',style:function(){$(this).css({top:-parentData.iframeOffsetTop+getFixedOffsetTop(parentData)+20+'px',left:0,position:'fixed',width:'310px',height:'auto',margin:0,padding:0,listStyleType:'none',zIndex:10000000});$(this).css({left:($(window).width()-$(this).outerWidth(false))/2+'px'});}},parent:{object:'<li />',selector:'li',css:{}},css:{display:'none',width:'310px'}};$modal.css({top:-parentData.iframeOffsetTop+getFixedOffsetTop(parentData)});}else{if(!mobile){$cartWrapper.addClass('affix-top');$cartWrapper.removeClass('_fixed');$cartWrapper.css({bottom:''});$cartWrapper.css({top:''});}
$categoriesWrapper.addClass('affix-top');$categoriesWrapper.removeClass('_fixed');;$categoriesWrapper.css({top:''});$modal.css({top:''});}
if(mobile){var resizeCategories=function(){var width=$categoriesParent.width();$('._categories-wrapper').css('width',width);};resizeCategories();$(window).resize(resizeCategories);if(parseInt(-parentData.iframeOffsetTop)>=categoriesTopOffset){$categoriesWrapper.addClass('_fixed');$categoriesWrapper.css({top:-parentData.iframeOffsetTop+getFixedOffsetTop(parentData),});}else{$cartWrapper.removeClass('_fixed');$categoriesWrapper.css({top:''});}
$cartWrapper.addClass('_absolute');$cartWrapper.css({top:''});$cartWrapper.css({bottom:(parentData.iframeOffsetBottom-parentData.iframeParentHeight+getFixedOffsetBottom(parentData))});}
break;}
if(e.data.visibility=='show'){if(mobile){$cartWrapper.addClass('show-cart').removeClass('hide-cart');$categories.addClass('show-cart').removeClass('hide-cart');}}
else{if(mobile){$cartWrapper.addClass('hide-cart').removeClass('show-cart');$categories.addClass('hide-cart').removeClass('show-cart');}
$top_notification.addClass('hide-cart');}}
function init(){if(isInIframe()){window.addEventListener("message",onMessageFromParent,false);window.addEventListener("load",sendMessageToParent_fitIframe,false);window.addEventListener("resize",sendMessageToParent_fitIframe,false);sendMessageToParent_fitIframe(false);$("#_buying-flow-modal").on('show.bs.modal',function(){if(!parentData)return;var height=parentData.iframeParentHeight-getFixedOffsetTop(parentData);var modalFooterHeight=jQuery('#_buying-flow-modal-content .modal-footer').innerHeight();var modalCloseHeight=jQuery('.modal-close').innerHeight();var modalMargin=$("#_buying-flow-modal .modal-dialog").outerHeight(true);var modalPaddingBody=$("#_buying-flow-modal .modal-body").height();var intervalResizeLive=setInterval(function(){resize();},500);$(window).on('resize',function(){resize();});var resize=function(){if(parentData.iframeParentHeight-getFixedOffsetTop(parentData)!=height){height=parentData.iframeParentHeight-getFixedOffsetTop(parentData);if(isMobile()){var all=height-modalFooterHeight
$('#_buying-flow-modal .modal-body').css({'max-height':all+'px'});}else{var all=height-modalFooterHeight-modalCloseHeight
$('#_buying-flow-modal .modal-body').css({'max-height':all+'px'});}}};if(isMobile()){var all=height-modalFooterHeight/2
$(this).find('.modal-body').css({'max-height':all+'px'});}else{var all=height-modalFooterHeight-modalCloseHeight
$(this).find('.modal-body').css({'max-height':all+'px'});}});$("#_order-form-modal").on('show.bs.modal',function(){if(parentData==null)return;var modalHeight=parentData.iframeParentHeight-getFixedOffsetTop(parentData);var modalFooterHeight=jQuery('.modal-footer').innerHeight();var modalMargin=$(".order-form-fullscreen .modal-dialog").outerHeight(true);var modalPaddingBody=$(".order-form-fullscreen .modal-body > .container").height();if(isMobile()){modalHeight=modalHeight-modalMargin-30;}else{modalHeight=modalHeight+modalFooterHeight-modalMargin+(modalPaddingBody);}
if(isFacebookApp()){modalHeight=modalHeight-modalFooterHeight-modalMargin+(modalPaddingBody);}
$(this).find('.modal-body').css({'max-height':modalHeight+'px'});$("._order-form-submit").on("click",function(){setTimeout(function(){$('#_order-form-modal .modal-body').css({'max-height':modalHeight+'px'});},1000);});});$("#_product-on-page-enter-recommendation-modal, #_restaurant-info-modal, #_cms-modal-big, #_delivery-check-modal, #_ratings-modal, #promotion-modal, #_terms-of-service-modal, #_privacy-policy-modal, #_cms-modal-cart-details, #_cms-modal-narrow, #_booking-modal").on('show.bs.modal',function(){if(parentData==null)return;var modalHeight=parentData.iframeParentHeight-getFixedOffsetTop(parentData);var modalCloseHeight=$('.modal-close').innerHeight();var modalMargin=$(".modal-dialog").outerHeight(true);var modalPaddingBody=$(".modal-body").height();modalHeight=modalHeight-modalCloseHeight-modalMargin+(modalPaddingBody);$(this).find('.modal-body').css({'max-height':modalHeight+'px'});});$("#_product-recommendation-modal").on('show.bs.modal',function(){if(parentData==null)return;var modalHeight=parentData.iframeParentHeight-getFixedOffsetTop(parentData);var modalFooterHeight=jQuery('#_product-recommendation-modal .modal-footer').innerHeight();var modalCloseHeight=$('#_product-recommendation-modal .modal-close').innerHeight();var modalMargin=$("#_product-recommendation-modal .modal-dialog").outerHeight(true);var modalPaddingBody=$("#_product-recommendation-modal .modal-body").height();modalHeight=modalHeight-modalCloseHeight-modalMargin-modalFooterHeight+(modalPaddingBody);if(isFacebookApp()){modalHeight=modalHeight-120;}
$(this).find('.modal-body').css({'max-height':modalHeight+'px'});});$(document).on("upmenu:fitIframeSize",function(event){sendMessageToParent_fitIframe(false);});$(document).on("upmenu:categoryShow",function(event){sendMessageToParent_fitIframe(false);sendMessageToParent_scrollParentToIframeTop();});$(document).on("upmenu:reloadParent",function(event){sendMessageToParent_reloadParent(event.url);});$(document).on("upmenu:categoryClicked",function(event){sendMessageToParent_scrollParentToIframeOffset(event.offset);});api.fixCookieBugIfRequired();}}
return{init:init}})();$(document).on("upmenu:menuLoaded upmenu:initIframe",function(){var iframe=UpMenuIframe;iframe.init();});$(function(){var iframe=UpMenuIframe;iframe.init();});

var com=com||{};com.upmenu=com.upmenu||function(){};com.upmenu.PartnersProgram={};com.upmenu.PartnersProgram.COOKIE_LIFETIME_DAYS=60;com.upmenu.PartnersProgram.PARAM_NAME='partnerid';com.upmenu.PartnersProgram.storeCookie=function(){var api=new com.upmenu();var ppid=api._getParameterByName(com.upmenu.PartnersProgram.PARAM_NAME);if(ppid==''){return;}
com.upmenu.Cookies.savePartnersProgram(ppid,com.upmenu.PartnersProgram.COOKIE_LIFETIME_DAYS);com.upmenu.PartnersProgram.trackClick(ppid);};com.upmenu.PartnersProgram.trackClick=function(id){jQuery.ajax({url:'/restapi/partnersProgram/trackClick/'+id,type:'post',contentType:"application/json; charset=utf-8",dataType:"json"});};$(function(){com.upmenu.PartnersProgram.storeCookie();});

function isMobile(){return window.matchMedia('(max-width: 767px)').matches}
com.upmenu.prototype.loadMenu=function(){var $menuPlaceholder=jQuery("#menu-ajax-content");if($menuPlaceholder.length==0){return;}
$menuPlaceholder.html('<div class="text-center m-t-xl"><i class="fa fa-spinner fa-spin fa-3x"></i></div>');com.upmenu.RestApi.Menu.get(com.upmenu.siteId,com.upmenu.restaurantId,com.upmenu.language).done(function(data){$menuPlaceholder.replaceWith(data)
jQuery(document).trigger("upmenu:menuLoaded");jQuery(document).trigger("upmenu:initIframe");if(isMobile()){var mobileFooterHeight=$("._cart-wrapper").outerHeight(true);document.documentElement.style.setProperty('--mobileFooterHeight',`${mobileFooterHeight}px`);}
if(com.upmenu.editMode!==true){com.upmenu.prototype.trackPageEvent('MENU_OPENED');}}).fail(function(data){$menuPlaceholder.replaceWith(data.responseText)});return false;};com.upmenu.prototype.loadMenuCms2=function(){var $menuPlaceholder=jQuery("#menu-ajax-content-cms2");if($menuPlaceholder.length===0){return;}
$menuPlaceholder.html('<div class="text-center m-t-xl"><i class="fa fa-spinner fa-spin fa-3x"></i></div>');com.upmenu.RestApi.Menu.Cms2.get(com.upmenu.siteId,com.upmenu.restaurantId,com.upmenu.language).done(function(data){$menuPlaceholder.html(data)
jQuery(document).trigger("upmenu:menuLoaded");jQuery(document).trigger("upmenu:initIframe");if(isMobile()){var mobileFooterHeight=$("._cart-wrapper").outerHeight(true);document.documentElement.style.setProperty('--mobileFooterHeight',`${mobileFooterHeight}px`);}
if(com.upmenu.editMode!==true){com.upmenu.prototype.trackPageEvent('MENU_OPENED');}}).fail(function(data){$menuPlaceholder.html(data.responseText)});}
com.upmenu.prototype.loadMenuToEditCms2=function(){var $menuPlaceholder=jQuery("#menu-ajax-content-cms2");if($menuPlaceholder.length===0){return;}
$menuPlaceholder.html('<div class="text-center m-t-xl"><i class="fa fa-spinner fa-spin fa-3x"></i></div>');var menuSettings=com.upmenu.theme_JSON.globalStyles.menu;com.upmenu.RestApi.Menu.Cms2.getToEdit(com.upmenu.siteId,com.upmenu.restaurantId,com.upmenu.language,menuSettings).done(function(data){$menuPlaceholder.html(data)
jQuery(document).trigger("upmenu:menuLoaded");jQuery(document).trigger("upmenu:initIframe");if(isMobile()){var mobileFooterHeight=$("._cart-wrapper").outerHeight(true);document.documentElement.style.setProperty('--mobileFooterHeight',`${mobileFooterHeight}px`);}}).fail(function(data){$menuPlaceholder.html(data.responseText)});};

Object.defineProperty(Array.prototype,'contains',{enumerable:false,value:function(v){for(var i=0;i<this.length;i++){if(this[i]===v)return true;}
return false;}});com.upmenu.prototype.initGooglePlacesInput=function(inputId,formToPreventSubmitId,errorContainerId,handlePlaceCallback,country){var form=document.getElementById(formToPreventSubmitId);if(form!==null&&typeof form!=='undefined'){form.onsubmit=function(e){e.preventDefault();};}
var input=document.getElementById(inputId);var googlePlacesSearchPhrase=com.upmenu.Cookies.getCustomerData().googlePlacesSearchPhrase;if(typeof googlePlacesSearchPhrase!=='undefined'&&googlePlacesSearchPhrase!==null){input.value=com.upmenu.Cookies.getCustomerData().googlePlacesSearchPhrase;}
var autocomplete=new google.maps.places.SearchBox(input,{fields:['address_components','geometry','name'],componentRestrictions:{country:country}});autocomplete.addListener('places_changed',function(){if(autocomplete.getPlaces().lenght===0){return;}
var place=autocomplete.getPlaces()[0];var placesInputErrorDiv=jQuery(errorContainerId);if(!place.geometry){placesInputErrorDiv.parent().addClass('has-error');placesInputErrorDiv.html(I18n.t('js_google_input_choose_from_list_error'));return;}else{placesInputErrorDiv.parent().removeClass('has-error');placesInputErrorDiv.html('');}
if(place&&typeof place.address_components==='undefined'&&typeof place.place_id!=='undefined'){var request={placeId:place.place_id,fields:['address_components','geometry','name']};service=new google.maps.places.PlacesService(document.createElement('div'));service.getDetails(request,callback);function callback(place){handlePlaceCallback(place,input.value);}}
if(place&&place.address_components){handlePlaceCallback(place,input.value);}});};com.upmenu.prototype.saveGooglePlacesResponseToCustomerCookie=function(place,searchPhrase){var customer=com.upmenu.Cookies.getCustomerData();customer.googlePlacesSearchPhrase=searchPhrase;customer.latitude=place.geometry.location.lat();customer.longitude=place.geometry.location.lng();for(var i=0;i<place.address_components.length;i++){var component=place.address_components[i];for(var j=0;j<component.types.length;j++){var type=component.types[j];switch(type){case'street_number':{customer.streetNumber=component.long_name?component.long_name:component.short_name;break;}
case'route':{customer.street=component.long_name?component.long_name:component.short_name;break;}
case'locality':{customer.city=component.long_name?component.long_name:component.short_name;break;}
case'postal_code':{customer.postalCode=component.long_name?component.long_name:component.short_name;break;}
case'administrative_area_level_2':{customer.customAddressField1=component.long_name?component.long_name:component.short_name;break;}}}}
com.upmenu.Cookies.saveCustomerData(customer);};
