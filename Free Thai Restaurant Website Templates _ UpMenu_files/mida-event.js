function urlMatch(e){var e=new RegExp("^"+e.replace(/\*/g,".*").replace(/\/+$/g,"").replace(/\?/g,"\\?").replace("//www.","//(www.)?")+"$"),t=window.location.protocol+"//"+window.location.hostname.replace(/^www./,"")+window.location.pathname,n=window.location.protocol+"//www."+window.location.hostname.replace(/^www./,"")+window.location.pathname,a=new URL(window.location.href),r=new URLSearchParams(a.search),r=(r.delete("test-preview"),r.delete("test-variant"),a.search=r.toString(),a.toString());return e.test(t)||e.test(t.replace(/\/+$/,""))||e.test(n)||e.test(n.replace(/\/+$/,""))||e.test(r.replace(/\/+$/,""))||e.test(r.replace("//www.","//").replace(/\/+$/,""))}function mdEvtAttr(e){for(;e;){if(e.hasAttribute&&e.hasAttribute("mida-event")&&!e.hasAttribute("mida-event-processed"))return e.getAttribute("mida-event");e=e.parentElement}return null}function addMidaEventListener(e){const t=e.getAttribute("mida-event");t&&""!==t.trim()&&!e.hasAttribute("mida-event-processed")&&(e.addEventListener("click",function(){window.mida.track(t)}),e.setAttribute("mida-event-processed","true"))}function addMidaEventListeners(){document.querySelectorAll("[mida-event]:not([mida-event-processed])").forEach(addMidaEventListener)}document.addEventListener("click",e=>{let t=e.target;for(;t&&t!==document;){var n=t.tagName.toUpperCase();if("A"===n||"BUTTON"===n||"INPUT"===n&&t.type&&"submit"===t.type.toLowerCase()||"button"===t.getAttribute("role")||"IMG"===n&&t.onclick){n={element:n,text:(t.innerText||t.alt||t.value||"").trim(),url:t.href||t.action||t.src||window.location.href,class:t.className||"",id:t.id||""};mida.track("_engagement",n);break}t=t.parentNode}},!0),window.processEvent=e=>{var n;window.submittedList=[];try{if((n=JSON.parse(e))&&n.length)for(let e=0;e<n.length;e++){let t=n[e];try{var a=document.querySelectorAll(t.path_name);for(let e=0;e<a.length;e++){var r=a[e];("https://"===t.url||"https://"===t.url||!t.url||urlMatch(t.url))&&(1===Number(t.action_type)?r.addEventListener("click",function(){mida.track(t.event_name)}):2===Number(t.action_type)&&r.addEventListener("keyup",function(){window.submittedList.includes(t.event_name)||(mida.track(t.event_name),window.submittedList.push(t.event_name))}))}}catch(e){console.error(e)}}}catch(e){console.error(e)}};const midaEventObserver=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute("mida-event")&&addMidaEventListener(e),e.querySelectorAll("[mida-event]:not([mida-event-processed])").forEach(addMidaEventListener))})})});midaEventObserver.observe(document.body,{childList:!0,subtree:!0}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",addMidaEventListeners):addMidaEventListeners();